{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/ChatInput.vue?1743","webpack:///./src/components/Sidebar.vue?fe81","webpack:///./public/digitaltwin.png","webpack:///./src/components/ChatList.vue?f3fb","webpack:///./public/TF-small.svg","webpack:///./src/components/AutoComplete.vue?0134","webpack:///./src/views/Home.vue?fcbd","webpack:///./src/components/MessageCard.vue?4a81","webpack:///./src/components/UserConfigDialog.vue?0849","webpack:///./src/components/MessageBox.vue?dac9","webpack:///./src/components/ImagePreview.vue?6352","webpack:///./src/components/ChatCard.vue?6741","webpack:///./src/components/Spinner.vue?6d3d","webpack:///./src/components/GroupManagement.vue?4375","webpack:///./src/components/ContactAdd.vue?53b5","webpack:///./src/components/Button.vue?ca80","webpack:///./src/components/Topbar.vue?f2b1","webpack:///./src/App.vue","webpack:///./src/App.vue?3acc","webpack:///./src/App.vue?eabf","webpack:///./src/views/Home.vue","webpack:///./src/services/authService.ts","webpack:///./src/views/Home.vue?d5e7","webpack:///./src/views/Home.vue?a655","webpack:///./src/views/app/FileBrowser.vue","webpack:///./src/layout/AppLayout.vue","webpack:///./src/components/Sidebar.vue","webpack:///./src/components/AvatarImg.vue","webpack:///./src/store/authStore.ts","webpack:///./src/services/urlService.ts","webpack:///./src/store/statusStore.ts","webpack:///./src/components/AvatarImg.vue?adbb","webpack:///./src/components/AvatarImg.vue?de89","webpack:///./src/services/dialogService.ts","webpack:///./src/components/Sidebar.vue?e38f","webpack:///./src/components/Sidebar.vue?0db5","webpack:///./src/components/UserConfigDialog.vue","webpack:///./src/types/index.ts","webpack:///./public/config/config.ts","webpack:///./src/common/index.ts","webpack:///./src/store/chatStore.ts","webpack:///./src/store/scrollStore.ts","webpack:///./src/store/contactStore.ts","webpack:///./src/store/blockStore.ts","webpack:///./src/store/socketStore.ts","webpack:///./src/components/Dialog.vue","webpack:///./src/components/Dialog.vue?34ca","webpack:///./src/components/Dialog.vue?1ae0","webpack:///./src/store/userStore.ts","webpack:///./src/components/Button.vue","webpack:///./src/components/Button.vue?cee3","webpack:///./src/components/UserConfigDialog.vue?83c4","webpack:///./src/components/UserConfigDialog.vue?e567","webpack:///./src/components/Topbar.vue","webpack:///./src/components/Topbar.vue?2e7b","webpack:///./src/components/Topbar.vue?3e0c","webpack:///./src/layout/AppLayout.vue?f14f","webpack:///./src/layout/AppLayout.vue?8948","webpack:///./src/views/app/FileBrowser.vue?2031","webpack:///./src/views/app/FileBrowser.vue?6ef1","webpack:///./src/views/app/VideoRoom.vue","webpack:///./src/views/app/VideoRoom.vue?0e06","webpack:///./src/views/app/VideoRoom.vue?51cb","webpack:///./src/layout/Basic.vue","webpack:///./src/layout/Basic.vue?54dc","webpack:///./src/layout/Basic.vue?6882","webpack:///./src/views/app/Chat.vue","webpack:///./src/components/ChatList.vue","webpack:///./src/components/ContactAdd.vue","webpack:///./src/components/AutoComplete.vue","webpack:///./src/components/AutoComplete.vue?244b","webpack:///./src/components/AutoComplete.vue?8fd6","webpack:///./src/components/ContactAdd.vue?242a","webpack:///./src/components/ContactAdd.vue?3ef2","webpack:///./src/components/ChatRequestList.vue","webpack:///./src/components/ChatRequestList.vue?a801","webpack:///./src/components/ChatRequestList.vue?c0f7","webpack:///./src/components/ChatCard.vue","webpack:///./src/components/ChatCard.vue?7064","webpack:///./src/components/ChatCard.vue?8523","webpack:///./src/components/ChatList.vue?6e2b","webpack:///./src/components/ChatList.vue?f16a","webpack:///./src/views/app/Chat.vue?6e9b","webpack:///./src/views/app/Chat.vue?f736","webpack:///./src/views/app/Single.vue","webpack:///./src/services/popupService.ts","webpack:///./src/components/MessageCard.vue","webpack:///./src/components/MessageContent.vue","webpack:///./src/components/MessageContentType/StringContent.vue","webpack:///./src/components/MessageContentType/StringContent.vue?5137","webpack:///./src/components/MessageContentType/StringContent.vue?f8cb","webpack:///./src/components/MessageContentType/SystemContent.vue","webpack:///./src/components/MessageContentType/SystemContent.vue?6e56","webpack:///./src/components/MessageContentType/SystemContent.vue?c5a7","webpack:///./src/components/MessageContentType/FileContent.vue","webpack:///./src/components/MessageContentType/FileContent.vue?8f85","webpack:///./src/components/MessageContentType/FileContent.vue?a5d9","webpack:///./src/components/MessageContentType/AudioContent.vue","webpack:///./src/components/MessageContentType/AudioContent.vue?7f0d","webpack:///./src/components/MessageContentType/AudioContent.vue?536d","webpack:///./src/components/MessageContentType/ImageContent.vue","webpack:///./src/store/imageStore.ts","webpack:///./src/components/MessageContentType/ImageContent.vue?ae41","webpack:///./src/components/MessageContentType/ImageContent.vue?1a22","webpack:///./src/components/MessageContentType/GifContent.vue","webpack:///./src/components/MessageContentType/GifContent.vue?1d43","webpack:///./src/components/MessageContentType/GifContent.vue?1d2d","webpack:///./src/components/MessageContentType/QuoteContent.vue","webpack:///./src/components/MessageContentType/QuoteContent.vue?5985","webpack:///./src/components/MessageContentType/QuoteContent.vue?e1cc","webpack:///./src/services/contentService.ts","webpack:///./src/components/MessageContent.vue?0363","webpack:///./src/components/MessageContent.vue?ff1b","webpack:///./src/services/clockService.ts","webpack:///./src/components/Time.vue","webpack:///./src/components/TimeContent.vue","webpack:///./src/components/TimeContent.vue?481c","webpack:///./src/components/TimeContent.vue?1f7d","webpack:///./src/components/Time.vue?c444","webpack:///./src/components/Time.vue?a4b9","webpack:///./src/components/MessageCard.vue?327b","webpack:///./src/components/MessageCard.vue?c092","webpack:///./src/components/ChatInput.vue","webpack:///./src/components/GifSelector.vue","webpack:///./src/services/gifService.ts","webpack:///./src/components/GifSelector.vue?d839","webpack:///./src/components/GifSelector.vue?3879","webpack:///./src/components/ChatInput.vue?e610","webpack:///./src/components/ChatInput.vue?4e73","webpack:///./src/components/GroupManagement.vue","webpack:///./src/components/GroupManagement.vue?833a","webpack:///./src/components/GroupManagement.vue?3e58","webpack:///./src/lib/intersectionObserver.ts","webpack:///./src/services/sidebarService.ts","webpack:///./src/components/MessageBox.vue","webpack:///./src/services/messageHelperService.ts","webpack:///./src/components/Spinner.vue","webpack:///./src/components/Spinner.vue?14b1","webpack:///./src/components/MessageBox.vue?78f5","webpack:///./src/components/MessageBox.vue?ec90","webpack:///./src/components/ImagePreview.vue","webpack:///./src/components/ImagePreview.vue?f6ad","webpack:///./src/components/ImagePreview.vue?0589","webpack:///./src/views/app/Single.vue?abd2","webpack:///./src/views/app/Single.vue?09a4","webpack:///./src/views/Callback.vue","webpack:///./src/views/Callback.vue?dfee","webpack:///./src/views/Callback.vue?67df","webpack:///./src/views/Unauthorised.vue","webpack:///./src/views/Unauthorised.vue?55ed","webpack:///./src/views/Unauthorised.vue?bcc0","webpack:///./src/plugins/Router.ts","webpack:///./src/plugins/SocketIo.ts","webpack:///./src/plugins/ClickOutside.ts","webpack:///./src/main.ts","webpack:///./src/views/app/Single.vue?6a77","webpack:///./src/views/app/Chat.vue?51b7","webpack:///./src/layout/AppLayout.vue?4ef4","webpack:///./src/App.vue?0b8b"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","console","log","render","class","loginAndPush","login","loginUrl","location","href","host","split","mounted","setTimeout","setup","__scopeId","src","computedUrl","style","default","actions","width","alt","changePage","apps","app","icon","toggleShowUserConfigDialog","id","user","showOnlineStatus","unreadMessagesAmount","getMyStatus","a","origin","res","status","authState","replace","image","email","myYggdrasilAddress","calcExternalResourceLink","statusList","fetching","watchingUsers","fetchStatus","digitalTwinId","locationApiEndpoint","response","startFetchStatusLoop","contact","find","wu","indexOf","setInterval","props","required","type","Boolean","Number","large","small","xsmall","avatar","encodeURI","showAddUserDialog","showUserConfigDialog","components","AvatarImg","enabled","router","currentRoute","page","SystemMessageTypes","MessageTypes","noActions","title","isHoveringAvatar","selectFile","isEditingStatus","setEditStatus","sendNewStatus","userStatus","disabled","placeholder","myStatus","ref","accept","changeFile","blockedUsers","blockedUser","unblockUser","showEditAvatar","aspect-ratio","viewMode","zoomable","guides","minCanvasWidth","minCropBoxWidth","containerStyle","background","saveNewAvatar","cancelNewAvatar","spawnerurl","config","baseUrl","spawnerUrl","join","giphyApiKey","uuidv4","Math","random","v","toString","MessageAction","state","scrollEvents","force","popScrollEvent","pop","useScrollActions","addScrollEvent","clearScrollEvents","messageLimit","chats","chatRequests","chatInfo","selectedMessageId","undefined","messageState","chatId","message","action","params","URLSearchParams","append","then","incommingchats","forEach","chat","getChat","x","hasMore","isLoading","hasMoreMessages","messages","isGroup","otherContact","contacts","acceptedChat","removeChat","filter","newGroupchat","from","to","body","timeStamp","Date","SYSTEM","replies","subject","adminId","read","put","e","post","index","findIndex","error","getMessage","found","appendMessages","concat","fetchMessages","limit","lastMessageId","statusText","info","subjectMessageIndex","subjectMessage","replyIndex","reply","DELETE","EDIT","setLastMessage","mes","newRead","oldRead","getTime","useSocketActions","sendSocketMessage","msg","isEdit","selectedFile","isBlob","formData","FormData","now","msgToSend","headers","sort","b","adate","bdate","unix","messageId","newMessage","groupId","remove","myLocation","REMOVE_USER","ADD_USER","adminLocation","usechatsActions","addChat","retrievechats","sendMessage","addMessage","sendFile","sendMessageObject","addGroupchat","readMessage","acceptChat","updateContactsInGroup","updateChat","getNewMessages","getChatInfo","username","map","useContactsState","useContactsActions","addContact","blocklist","initBlocklist","axiosResponse","getBlockList","addUserToBlockList","userid","deleteBlockedEntry","socket","notification","sound","notify","on","emit","newContactRequest","isUpdate","messageType","sendRemoveChat","sendBlockChat","initializeSocket","sendSocketUserStatus","modelValue","$emit","cancelButtonText","okButtonText","String","emits","setNewAvatar","url","isUserAuthenticated","jdialog","Dialog","VueCropper","Button","created","ctx","showEditPic","fileInput","file","route","cropper","reader","FileReader","onload","event","target","readAsDataURL","destroy","backOrMenu","meta","back","click","newFile","files","fetch","getCroppedCanvas","toDataURL","blob","tempFile","File","sendNewAvatar","removeFile","edit","addUser","showEdit","fileinput","Sidebar","Topbar","UserConfigDialog","audio","newNot","oldNot","focused","document","hasFocus","Audio","play","appLayout","allow","collapsed","filteredChatRequests","chat-requests","filteredChats","setSelected","sendUpdate","for","isActive","setActive","contactAdd","possibleUsers","usernameAdd","usernameAddError","handleClicked","userAddLocation","groupAdd","groupnameAdd","groupnameAddError","userIsInGroup","removeUserFromGroup","usersInGroup","showOptions","searchTerm","handleInput","tabindex","reset","handleSelf","dropdownClass","searchResults","item","handleClick","Array","chosenOption","evt","clickedOutside","toLowerCase","includes","autoComplete","addGroup","usernameInGroupAdd","contactAddError","userId","pu","err","posUser","activeItem","menuItem","mylocation","u","posContacts","admin","acceptChatRequest","lastMessage","timeAgo","lastMessageBody","lastReadByMe","lastReadMessage","newMessages","time","fromNow","lstmsg","lastReadMessageId","ChatCard","ChatRequestList","context","selectedId","val","searchValue","showContacts","selectedChat","cr","newVal","ChatList","top","isOnline","showMenu","popupMeeting","blockChat","deleteChat","getChatStatus","toggleSideBar","viewAnchor","selectedid","scrollToBottom","showDialog","doBlockChat","showDeleteDialog","doDeleteChat","group-chat","popupCenter","w","h","dualScreenLeft","screenLeft","screenX","dualScreenTop","screenTop","screenY","innerWidth","documentElement","clientWidth","screen","height","innerHeight","clientHeight","systemZoom","availWidth","left","newWindow","open","focus","isFirstMessage","isread","STRING","QUOTE","editMessage","replyMessage","deleteMessage","deleteReply","contentComponent","preventRecursion","computedMessage","regularExpression","escapeHtml","unsafeHtml","escapedHtml","matches","match","joinVideo","videoRoomId","JOINED_VIDEOROOM","download","filename","controls","imageLoaded","show","imageSrc","clearImageSrc","setImageSrc","quotedMessage","MessageContent","isImage","isAudio","GIF","FILE","StringContent","SystemContent","FileContent","AudioContent","ImageContent","GifContent","QuoteContent","ClockType","clock","minuteClock","hourClock","clockType","HOURS","MINUTES","timeString","TimeContent","diff","SECONDS","Time","isMine","isreadbyme","isLastMessage","toggleSendForwardMessage","REPLY","updatedMessage","moment","showGif","sendGif","hideGif","getActionMessage","clearAction","onPaste","toggleGif","stopRecording","startRecording","showEmoji","toggleEmoji","chatsend","hideEmoji","gifs","gif","gf","fetchGif","search","trending","gs","g","images","original","st","GifSelector","emojipicker","createEditBody","newBody","createMessage","updated","editWrapperMessage","clearMessage","navigator","mediaDevices","getUserMedia","stream","mediaRecorder","MediaRecorder","audioChunks","addEventListener","start","audioBlob","Blob","stop","getAudioTracks","at","emojiPicker","querySelector","detail","emoji","clipboardData","items","pastedImage","getAsFile","groupChat","iAmAdmin","removeFromGroup","addToGroup","filteredContacts","observer","options","root","rootMargin","intersectionRatio","isIntersecting","isFullyInView","observe","IntersectionObserver","entry","unobserve","showSideBar","handleScroll","showDivider","calendar","lastRead","scrollMessageBoxToBottom","scrollTo","scrollHeight","currentMessage","nextMessage","prevMessage","previousMessage","xlarge","MessageCard","Spinner","reads","values","element","oldScrollHeight","scrollTop","newMessagesLoaded","behavior","messageBox","close","reverse","MessageBox","ChatInput","GroupManagement","ImagePreview","propRefs","truncate","substring","getMessagesSortedByUser","chatBlockIndex","reduce","acc","onlineMembers","str","preReads","forced","localStorage","setItem","JSON","stringify","routes","path","component","Home","Callback","requiresAuth","Unauthorised","Basic","children","Chat","Single","FileBrowser","VideoRoom","history","beforeEach","next","matched","some","record","install","connection","globalProperties","$socket","provide","clickOutside","beforeMount","el","binding","clickOutsideEvent","contains","unmounted","removeEventListener","App","directive","use","debug","transports","mount"],"mappings":"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","file":"js/app.f94ddf90.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"vendor.moment\",\"vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ChatInput.vue?vue&type=style&index=0&id=3080ccae&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Sidebar.vue?vue&type=style&index=0&id=45e98e26&scoped=true&lang=css\"","module.exports = \"data:image/png;base64,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\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ChatList.vue?vue&type=style&index=0&id=34659be8&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/TF-small.726ddef6.svg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./AutoComplete.vue?vue&type=style&index=0&id=c8bcf260&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Home.vue?vue&type=style&index=0&id=388f1f64&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./MessageCard.vue?vue&type=style&index=0&id=dc6e5024&lang=css&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./UserConfigDialog.vue?vue&type=style&index=0&id=99cf5eb6&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./MessageBox.vue?vue&type=style&index=0&id=44436712&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ImagePreview.vue?vue&type=style&index=0&id=519d4542&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ChatCard.vue?vue&type=style&index=0&id=691ecbc6&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Spinner.vue?vue&type=style&index=0&id=bb2f2f22&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./GroupManagement.vue?vue&type=style&index=0&id=46c6b3a9&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ContactAdd.vue?vue&type=style&index=0&id=2074b94a&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Button.vue?vue&type=style&index=0&id=306034fb&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Topbar.vue?vue&type=style&index=0&id=7e60fd63&scoped=true&lang=css\"","<template>\n    <suspense>\n        <router-view />\n    </suspense>\n</template>\n\n<script lang=\"ts\">\n    import { defineComponent } from 'vue';\n    // const {gitDescribe, gitDescribeSync} = require('git-describe');\n\n    // process.env.VUE_APP_GIT_HASH = gitDescribeSync().hash\n    console.log(`Commit hash: ${process.env.VUE_APP_GIT_HASH}`);\n    console.log(`Version: ${process.env.VUE_APP_GIT_VERSION}`);\n\n    export default defineComponent({\n        name: 'App',\n    });\n</script>\n\n<style>\n    a {\n        text-decoration: none !important;\n    }\n    #app .prose h1,\n    #app .prose h2,\n    #app .prose h3 {\n        margin-top: 0;\n        margin-bottom: 0;\n    }\n</style>\n","\n    import { defineComponent } from 'vue';\n    // const {gitDescribe, gitDescribeSync} = require('git-describe');\n\n    // process.env.VUE_APP_GIT_HASH = gitDescribeSync().hash\n    console.log(`Commit hash: ${process.env.VUE_APP_GIT_HASH}`);\n    console.log(`Version: ${process.env.VUE_APP_GIT_VERSION}`);\n\n    export default defineComponent({\n        name: 'App',\n    });\n","import { render } from \"./App.vue?vue&type=template&id=598bb154\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=598bb154&lang=css\"\nscript.render = render\n\nexport default script","<template>\n    <div class=\"grid place-items-center h-screen\">\n        <h1>\n            Welcome <b>{{ name }}</b\n            >, to your digitalTwin.\n        </h1>\n        <p>Automaticly redirecting you in 3 seconds ...</p>\n        <button class=\"fancyButton\" @click=\"loginAndPush\">\n            Verify my identity\n        </button>\n    </div>\n</template>\n\n<script lang=\"ts\">\n    import { defineComponent } from 'vue';\n    import { login } from '@/services/authService';\n\n    const loginAndPush = async () => {\n        console.log('Attempting to login ...');\n        await login();\n    };\n\n    export default defineComponent({\n        name: 'Home',\n        mounted() {\n            setTimeout(() => {\n                loginAndPush();\n            }, 3200);\n        },\n        setup() {\n            return {\n                name: window.location.host.split('.')[0],\n                loginAndPush,\n            };\n        },\n    });\n</script>\n\n<style scoped type=\"text/css\">\n    html {\n        background: url(https://www.toptal.com/designers/subtlepatterns/patterns/geometric-leaves.png);\n    }\n\n    .fancyButton {\n        border: none;\n        color: white;\n        background: darkslategray;\n        padding: 1rem 2rem;\n        border-radius: 4px;\n        cursor: pointer;\n    }\n    .fancyButton:hover {\n        background: lightslategray;\n    }\n</style>\n","export const login = () => {\n    const loginUrl = `/api/auth/signin`;\n    window.location.href = loginUrl + \"?username=\" + window.location.host.split('.')[0]\n};\n","\n    import { defineComponent } from 'vue';\n    import { login } from '@/services/authService';\n\n    const loginAndPush = async () => {\n        console.log('Attempting to login ...');\n        await login();\n    };\n\n    export default defineComponent({\n        name: 'Home',\n        mounted() {\n            setTimeout(() => {\n                loginAndPush();\n            }, 3200);\n        },\n        setup() {\n            return {\n                name: window.location.host.split('.')[0],\n                loginAndPush,\n            };\n        },\n    });\n","import { render } from \"./Home.vue?vue&type=template&id=388f1f64&scoped=true\"\nimport script from \"./Home.vue?vue&type=script&lang=ts\"\nexport * from \"./Home.vue?vue&type=script&lang=ts\"\n\nimport \"./Home.vue?vue&type=style&index=0&id=388f1f64&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-388f1f64\"\n\nexport default script","<template>\n    <app-layout>\n        <iframe\n            :src=\"computedUrl\"\n            style=\"\n                position: relative;\n                top: 0;\n                left: 0;\n                bottom: 0;\n                right: 0;\n                width: 100%;\n                height: 100%;\n                border: none;\n                margin: 0;\n                padding: 0;\n                overflow: hidden;\n                z-index: 999999;\n            \"\n        >\n            Your browser doesn't support iframes\n        </iframe>\n    </app-layout>\n</template>\n\n<script lang=\"ts\">\n    import appLayout from '../../layout/AppLayout.vue';\n    import { defineComponent, computed } from 'vue';\n    import { useAuthState } from '../../store/authStore';\n\n    export default defineComponent({\n        name: 'Apps',\n        components: {\n            appLayout,\n        },\n        setup() {\n            const { user } = useAuthState();\n\n            const computedUrl = computed(() => {\n                return `https://filebrowser.jimbertesting.be/auth/login/user/?username=${user.id}.3bot`;\n            });\n\n            return {\n                computedUrl,\n            };\n        },\n    });\n</script>\n\n<style scoped type=\"text/css\"></style>\n","<template>\n    <suspense>\n        <UserConfigDialog></UserConfigDialog>\n    </suspense>\n    <div class=\"bg-gray-100 h-full overflow-hidden relative text-sm\">\n        <div class=\"pl-0 relative h-full w-full maingrid md:bigmaingrid\">\n            <div class=\"top h-20 md:hidden\">\n                <Topbar>\n                    <template v-slot:default>\n                        <slot name=\"top\"> </slot>\n                    </template>\n                    <template v-slot:actions>\n                        <slot name=\"actions\"> </slot>\n                    </template>\n                </Topbar>\n            </div>\n            <div class=\"side hidden md:block\">\n                <slot name=\"side\">\n                    <Sidebar class=\"bg-icon md:block h-full\"></Sidebar>\n                </slot>\n            </div>\n            <div\n                class=\"content w-full h-full overflow-y-auto relative flex flex-col\"\n            >\n                <div class=\"relative w-full h-full overflow-y-auto\">\n                    <div class=\"absolute w-full h-full\">\n                        <slot></slot>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script lang=\"ts\">\n    import { defineComponent, watch } from 'vue';\n    import Sidebar from '@/components/Sidebar.vue';\n    import UserConfigDialog from '@/components/UserConfigDialog.vue';\n    import Topbar from '@/components/Topbar.vue';\n    import { useSocketState } from '../store/socketStore';\n\n    export default defineComponent({\n        name: 'AppLayout',\n        components: { Sidebar, Topbar, UserConfigDialog },\n        setup({}, ctx) {\n            const { notification } = useSocketState();\n\n            let audio = null;\n\n            watch(notification, (newNot: any, oldNot: any) => {\n                var focused = document.hasFocus();\n\n                if (focused) {\n                    return;\n                }\n\n                if (audio === null) {\n                    audio = new Audio(`/${newNot.sound}`);\n                }\n\n                audio.play();\n            });\n\n            return {};\n        },\n    });\n</script>\n\n<style scoped>\n    @tailwind base;\n    @tailwind components;\n    @tailwind utilities;\n\n    @layer utilities {\n        @variants responsive {\n            .bigmaingrid {\n                display: grid;\n                grid-template-areas:\n                    'top top'\n                    'side content'\n                    'side content';\n                grid-template-columns: 100px 1fr;\n                grid-template-rows: auto 1fr;\n            }\n        }\n    }\n\n    .maingrid {\n        display: grid;\n        grid-template-areas:\n            'top'\n            'content'\n            'content';\n        grid-template-rows: auto 1fr;\n    }\n    .top {\n        grid-area: top;\n    }\n    .side {\n        grid-area: side;\n    }\n    .content {\n        grid-area: content;\n    }\n</style>\n","<template>\n    <nav>\n        <div class=\"flex flex-col h-full items-center mx-2\">\n            <div class=\"mb-4 grid text-center text-white cursor-pointer\">\n                <div\n                    class=\"h-20 w-20 rounded-full grid place-items-center mb-1\"\n                    style=\"position: relative\"\n                    @click=\"changePage('chat')\"\n                >\n                    <img\n                        src=\"../../public/TF-small.svg\"\n                        width=\"50\"\n                        alt=\"Threefold logo\"\n                    />\n\n                    <img\n                        src=\"../../public/digitaltwin.png\"\n                        width=\"100\"\n                        alt=\"Threefold logo\"\n                    />\n                    <!-- <div class=\"text-sm\">\n                        <strong>digital </strong>\n                        <span>twin</span>\n                    </div> -->\n                </div>\n            </div>\n            <br />\n            <div\n                v-for=\"app in apps\"\n                :key=\"app.name\"\n                class=\"mb-4 grid text-center\"\n                :class=\"{\n                    'text-gray-300': !app?.enabled,\n                    'cursor-pointer': app.enabled,\n                    'text-white': !router.currentRoute?.value.path.includes(\n                        app.name\n                    ),\n                    selected: router.currentRoute?.value.path.includes(\n                        app.name\n                    ),\n                }\"\n            >\n                <div\n                    class=\"h-20 w-20 rounded-full grid place-items-center mb-1\"\n                    style=\"position: relative\"\n                    @click=\"changePage(app.name)\"\n                >\n                    <i :class=\"`fas ${app.icon} text-2xl`\"></i>\n                    <h3>\n                        {{ app.name }}\n                    </h3>\n                </div>\n            </div>\n            <div class=\"grid place-items-end flex-grow\">\n                <div\n                    class=\"w-20 h-20 grid cursor-pointer items-center justify-center justify-items-center\"\n                    @click=\"toggleShowUserConfigDialog\"\n                >\n                    <AvatarImg :id=\"user.id\" />\n                    <!--<h3 class=\"truncate w-full text-sm\">{{ user.id }}</h3>-->\n                </div>\n            </div>\n        </div>\n    </nav>\n</template>\n\n<script lang=\"ts\">\n    import { defineComponent, computed } from 'vue';\n    import { useRouter } from 'vue-router';\n    import AvatarImg from '@/components/AvatarImg.vue';\n    import { useAuthState } from '@/store/authStore';\n    import { showUserConfigDialog } from '@/services/dialogService';\n\n    export default defineComponent({\n        name: 'Sidebar',\n        components: { AvatarImg },\n        setup() {\n            const apps = [\n                {\n                    name: 'chat',\n                    icon: 'fas fa-comments',\n                    enabled: true,\n                },\n                {\n                    name: 'filebrowser',\n                    icon: 'fas fa-file-alt',\n                    enabled: true,\n                },\n                {\n                    name: 'forum',\n                    icon: 'fas fa-stream',\n                    enabled: false,\n                },\n                {\n                    name: 'meetings',\n                    icon: 'fas fa-video',\n                },\n            ];\n            const router = useRouter();\n\n            const currentRoute = computed(() => router.currentRoute.value);\n\n            const changePage = (page: any) => {\n                router.push({ name: page });\n            };\n\n            const { user } = useAuthState();\n\n            const toggleShowUserConfigDialog = () => {\n                console.log(\n                    'Showing user config dialog: ',\n                    showUserConfigDialog.value\n                );\n                showUserConfigDialog.value = !showUserConfigDialog.value;\n\n                console.log(\n                    'Showing user config dialog: ',\n                    showUserConfigDialog.value\n                );\n            };\n\n            return {\n                currentRoute,\n                apps,\n                changePage,\n                user,\n                showUserConfigDialog,\n                router,\n                toggleShowUserConfigDialog,\n            };\n        },\n    });\n</script>\n\n<style scoped>\n    .active {\n        position: relative;\n    }\n\n    .active::after {\n        position: absolute;\n        content: '';\n        left: 0;\n        top: 0;\n        width: 100%;\n        height: 100%;\n        background: #e69b5950;\n        border-left: 8px solid #e69b59;\n    }\n\n    .selected {\n        color: rgb(159, 241, 215);\n    }\n</style>\n","<template>\n    <div\n        class=\"grid relative\"\n        :class=\"{\n            'h-16 w-16': large,\n            'h-12 w-12': !small && !xsmall,\n            'h-8 w-8': small,\n            'h-6 w-6': xsmall,\n        }\"\n    >\n        <div\n            class=\"bg-icon rounded-full\"\n            :style=\"`background:url(${src}) no-repeat center/cover`\"\n            :class=\"{\n                'h-16 w-16': large,\n                'h-12 w-12': !small && !xsmall && !large,\n                'h-8 w-8': small,\n                'h-6 w-6': xsmall,\n            }\"\n        ></div>\n        <div\n            v-if=\"showOnlineStatus\"\n            class=\"h-3 w-3 bg-gray-300 rounded-full absolute bottom-0 right-0 transition-all\"\n            :class=\"{\n                'bg-red-500': status && !status.isOnline,\n                'bg-green-500': status && status.isOnline,\n            }\"\n        ></div>\n\n        <div\n            v-if=\"unreadMessagesAmount > 0\"\n            class=\"absolute -top-1 -right-1 bg-accent h-4 w-4 rounded-full text-xs z-10 align-middle text-center text-white\"\n        >\n            {{ unreadMessagesAmount }}\n        </div>\n    </div>\n</template>\n\n<script lang=\"ts\">\n    import { computed } from 'vue';\n    import { startFetchStatusLoop, statusList } from '@/store/statusStore';\n    import { calcExternalResourceLink } from '../services/urlService';\n\n    export default {\n        name: 'AvatarImg',\n        props: {\n            id: { required: true },\n            showOnlineStatus: {\n                required: false,\n                default: true,\n                type: Boolean,\n            },\n            unreadMessagesAmount: Number,\n            large: { required: false, default: false, type: Boolean },\n            small: { required: false, default: false, type: Boolean },\n            xsmall: { required: false, default: false, type: Boolean },\n        },\n        setup(props) {\n            // startFetchStatusLoop(props.id)\n\n            const status = computed(() => {\n                return statusList[<string>props.id];\n            });\n\n            const src = computed(() => {\n                if (!status.value || !status.value.avatar) {\n                    return `https://avatars.dicebear.com/4.5/api/jdenticon/${encodeURI(\n                        <string>props.id\n                    )}.svg?m=14&b=%23ffffff`;\n                }\n                return calcExternalResourceLink(status.value.avatar);\n            });\n\n            return {\n                src,\n                status,\n            };\n        },\n    };\n</script>\n","import { reactive } from '@vue/reactivity';\nimport axios from 'axios';\nimport { User } from '../types';\n\nexport const getMyStatus = async () => {\n    const res = await axios.get(`${window.location.origin}/api/user/getStatus`);\n    return res.data.status;\n};\n\nconst authState = reactive<AuthState>({\n    user: {\n        id: window.location.host\n            .split('.')[0]\n            .replace('localhost:8080', 'localhost:3000'),\n        image: `${window.location.origin}/api/user/avatar/default`,\n        email: 'testemail',\n        status: '',\n        // @TODO implement this\n        location: '@TODO implement this',\n    },\n});\n\nexport const myYggdrasilAddress = async () => {\n    const res = await axios.get(\n        `${window.location.origin}/api/yggdrasil_address`\n    );\n    return res.data;\n};\n\nexport const useAuthState = () => {\n    return {\n        ...authState,\n    };\n};\n\nexport const useAuthActions = () => {\n    return {};\n};\n\ninterface AuthState {\n    user: User;\n}\n","export const calculateBaseUrl = userId => {\n    let location = '';\n    if (window.location.origin === 'http://localhost:8080') {\n        return (location = 'http://localhost:3000');\n    }\n    let url: Array<String> = window.location.host.split('.');\n    url.splice(0, 1);\n    return (location = `https://${userId}.${url.join('.')}`);\n};\n\nexport const calcExternalResourceLink = location => {\n    return `${window.location.origin}/getExternalResource?resource=${location}`;\n};\n","import { DtId } from './../types/index';\nimport axios from 'axios';\nimport { ref } from 'vue';\nimport { reactive } from '@vue/reactivity';\nimport { useAuthState } from '@/store/authStore';\nimport { calcExternalResourceLink } from '../services/urlService';\nimport { Contact } from '@/types';\n\nexport const statusList = reactive<Object>({});\nexport const fetching: string[] = [];\nexport const watchingUsers = [];\n\nexport const fetchStatus = async (digitalTwinId: DtId) => {\n    const { user } = useAuthState();\n    const locationApiEndpoint = '/api/user/getStatus';\n    let location = '';\n    if (digitalTwinId == user.id) {\n        location = `${window.location.origin}${locationApiEndpoint}`;\n    } else {\n        location = calcExternalResourceLink(\n            `http://[${\n                watchingUsers[<string>digitalTwinId].location\n            }]${locationApiEndpoint}`\n        );\n    }\n    const response = await axios.get(location);\n    let status = response.data;\n\n    statusList[<string>digitalTwinId] = status;\n    return status;\n};\n\nexport const startFetchStatusLoop = async (contact: Contact) => {\n    if (watchingUsers.find(wu => wu === contact.id)) {\n        return;\n    }\n    watchingUsers.push(contact.id);\n    watchingUsers[<string>contact.id] = {\n        location: contact.location,\n    };\n    fetching.push(<string>contact.id);\n\n    await fetchStatus(contact.id);\n    fetching.slice(fetching.indexOf(<string>contact.id), 1);\n    setInterval(async () => {\n        try {\n            if (fetching.indexOf(<string>contact.id) !== -1) {\n                return;\n            }\n            fetching.push(<string>contact.id);\n\n            await fetchStatus(contact.id);\n\n            fetching.slice(fetching.indexOf(<string>contact.id), 1);\n        } catch (e) {\n            setTimeout(() => {\n                fetching.slice(fetching.indexOf(<string>contact.id), 1);\n            }, 10000);\n        }\n    }, 5000);\n};\n","\n    import { computed } from 'vue';\n    import { startFetchStatusLoop, statusList } from '@/store/statusStore';\n    import { calcExternalResourceLink } from '../services/urlService';\n\n    export default {\n        name: 'AvatarImg',\n        props: {\n            id: { required: true },\n            showOnlineStatus: {\n                required: false,\n                default: true,\n                type: Boolean,\n            },\n            unreadMessagesAmount: Number,\n            large: { required: false, default: false, type: Boolean },\n            small: { required: false, default: false, type: Boolean },\n            xsmall: { required: false, default: false, type: Boolean },\n        },\n        setup(props) {\n            // startFetchStatusLoop(props.id)\n\n            const status = computed(() => {\n                return statusList[<string>props.id];\n            });\n\n            const src = computed(() => {\n                if (!status.value || !status.value.avatar) {\n                    return `https://avatars.dicebear.com/4.5/api/jdenticon/${encodeURI(\n                        <string>props.id\n                    )}.svg?m=14&b=%23ffffff`;\n                }\n                return calcExternalResourceLink(status.value.avatar);\n            });\n\n            return {\n                src,\n                status,\n            };\n        },\n    };\n","import { render } from \"./AvatarImg.vue?vue&type=template&id=10eacb00\"\nimport script from \"./AvatarImg.vue?vue&type=script&lang=ts\"\nexport * from \"./AvatarImg.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","import { ref } from 'vue';\n\nexport const showAddUserDialog = ref(false);\nexport const showUserConfigDialog = ref(false);\n","\n    import { defineComponent, computed } from 'vue';\n    import { useRouter } from 'vue-router';\n    import AvatarImg from '@/components/AvatarImg.vue';\n    import { useAuthState } from '@/store/authStore';\n    import { showUserConfigDialog } from '@/services/dialogService';\n\n    export default defineComponent({\n        name: 'Sidebar',\n        components: { AvatarImg },\n        setup() {\n            const apps = [\n                {\n                    name: 'chat',\n                    icon: 'fas fa-comments',\n                    enabled: true,\n                },\n                {\n                    name: 'filebrowser',\n                    icon: 'fas fa-file-alt',\n                    enabled: true,\n                },\n                {\n                    name: 'forum',\n                    icon: 'fas fa-stream',\n                    enabled: false,\n                },\n                {\n                    name: 'meetings',\n                    icon: 'fas fa-video',\n                },\n            ];\n            const router = useRouter();\n\n            const currentRoute = computed(() => router.currentRoute.value);\n\n            const changePage = (page: any) => {\n                router.push({ name: page });\n            };\n\n            const { user } = useAuthState();\n\n            const toggleShowUserConfigDialog = () => {\n                console.log(\n                    'Showing user config dialog: ',\n                    showUserConfigDialog.value\n                );\n                showUserConfigDialog.value = !showUserConfigDialog.value;\n\n                console.log(\n                    'Showing user config dialog: ',\n                    showUserConfigDialog.value\n                );\n            };\n\n            return {\n                currentRoute,\n                apps,\n                changePage,\n                user,\n                showUserConfigDialog,\n                router,\n                toggleShowUserConfigDialog,\n            };\n        },\n    });\n","import { render } from \"./Sidebar.vue?vue&type=template&id=45e98e26&scoped=true\"\nimport script from \"./Sidebar.vue?vue&type=script&lang=ts\"\nexport * from \"./Sidebar.vue?vue&type=script&lang=ts\"\n\nimport \"./Sidebar.vue?vue&type=style&index=0&id=45e98e26&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-45e98e26\"\n\nexport default script","<template>\n    <jdialog v-model=\"showUserConfigDialog\" noActions>\n        <template v-slot:title>\n            <h1>Profile settings</h1>\n        </template>\n        <div>\n            <div class=\"avatar-container\">\n                <div class=\"flex\">\n                    <div\n                        class=\"avatar-container mr-2 flex justify-center items-center cursor-pointer\"\n                        @mouseover=\"isHoveringAvatar = true\"\n                        @mouseleave=\"isHoveringAvatar = false\"\n                    >\n                        <div\n                            class=\"overlay flex justify-center items-center\"\n                            :class=\"isHoveringAvatar ? 'block' : 'hidden'\"\n                            @click=\"selectFile\"\n                        >\n                            <i class=\"fas fa-pen text-white\"></i>\n                        </div>\n                        <AvatarImg :id=\"user.id\" large/>\n                    </div>\n                    <h1 class=\"text-center my-4\">{{ user.id }}</h1>\n                </div>\n            </div>\n\n            <div class=\"relative w-full h-full\">\n                <transition name=\"fade\">\n                    <button\n                        v-if=\"!isEditingStatus\"\n                        class=\"absolute top-0 right-0\"\n                        @click=\"setEditStatus(true)\"\n                    >\n                        <i class=\"fas fa-pen\"></i>\n                    </button>\n                </transition>\n\n                <transition name=\"fade\">\n                    <button\n                        v-if=\"isEditingStatus\"\n                        class=\"absolute top-1 right-0\"\n                        @click=\"sendNewStatus\"\n                    >\n                        <i class=\"fas fa-check\"></i>\n                    </button>\n                </transition>\n\n                <suspense>\n                    <textarea\n                        v-model=\"userStatus\"\n                        class=\"w-full\"\n                        :disabled=\"!isEditingStatus\"\n                        :placeholder=\"myStatus\"\n                    ></textarea>\n                </suspense>\n            </div>\n            <input\n                class=\"hidden\"\n                type=\"file\"\n                id=\"fileInput\"\n                ref=\"fileInput\"\n                accept=\"image/*\"\n                @change=\"changeFile\"\n            />\n\n            <div>\n                <h2>Blocked Users</h2>\n                <ul class=\"max-h-28 overflow-y-auto\">\n                    <template\n                        v-for=\"blockedUser in blockedUsers\"\n                        :key=\"blockedUser\"\n                    >\n                        <li>\n                            {{ blockedUser }}\n                            <button\n                                class=\"px-4 py-2 text-base font-medium rounded-md text-white bg-blue-600 hover:bg-blue-500 focus:border-blue-700 active:bg-blue-700 ease-in-out duration-150 cursor-pointer uppercase\"\n                                @click=\"unblockUser(blockedUser)\"\n                            >\n                                unblock\n                            </button>\n                        </li>\n                    </template>\n\n                    <!-- <li v-if=\"blockedUsers.length === 0 && blockedUsersLoading\">\n                        ...\n                    </li>\n                    <li\n                        v-if=\"blockedUsers.length === 0 && !blockedUsersLoading\"\n                    >\n                        No blocked users\n                    </li> -->\n                </ul>\n            </div>\n        </div>\n        <jdialog v-model=\"showEditAvatar\" noActions>\n            <template v-slot:title>\n                <h1>Avatar</h1>\n            </template>\n            <div class=\"flex w-full flex-col\">\n                <div class=\"w-full\">\n                    <vue-cropper\n                        ref=\"cropper\"\n                        :aspect-ratio=\"1\"\n                        :src=\"src\"\n                        :viewMode=\"2\"\n                        :zoomable=\"false\"\n                        :guides=\"false\"\n                        :minCanvasWidth=\"64\"\n                        :minCropBoxWidth=\"64\"\n                        :containerStyle='{\"max-height\": \"400px\"}'\n                        :background='false'\n                    />\n                </div>\n                <div class=\"flex flex-row justify-end\">\n                    <Button @click=\"saveNewAvatar\">\n                        SAVE\n                    </Button>\n                    <Button @click=\"cancelNewAvatar\">\n                        CANCEL\n                    </Button>\n                </div>\n            </div>\n        </jdialog>\n    </jdialog>\n</template>\n\n<script lang=\"ts\">\n    import {\n        computed,\n        defineComponent,\n        onBeforeMount,\n        onMounted,\n        ref,\n        watchEffect,\n    } from 'vue';\n    import { useAuthState, getMyStatus } from '../store/authStore';\n    import { useSocketActions } from '../store/socketStore';\n    import Dialog from '@/components/Dialog.vue';\n    import AvatarImg from '@/components/AvatarImg.vue';\n    import {\n        deleteBlockedEntry,\n        getBlockList,\n        initBlocklist,\n    } from '@/store/blockStore';\n    import { setNewAvatar } from '@/store/userStore';\n    import { fetchStatus } from '@/store/statusStore';\n    import { useRoute, useRouter } from 'vue-router';\n    import { showUserConfigDialog } from '@/services/dialogService';\n    import { statusList } from '@/store/statusStore';\n    import { calcExternalResourceLink } from '../services/urlService';\n    import VueCropper from 'vue-cropperjs';\n    import 'cropperjs/dist/cropper.css';\n    import Button from '@/components/Button.vue';\n\n    export default defineComponent({\n        name: 'UserConfigDialog',\n        components: { AvatarImg, jdialog: Dialog, VueCropper, Button },\n        emits: ['addUser'],\n        created: () => {\n            initBlocklist();\n        },\n        async setup({}, ctx) {\n            const { user } = useAuthState();\n            const showEditPic = ref(false);\n            const fileInput = ref();\n            const file = ref();\n            const userStatus = ref('');\n            const isEditingStatus = ref(false);\n            const router = useRouter();\n            const route = useRoute();\n            const myStatus = await getMyStatus();\n            const cropper = ref(null);\n            const isHoveringAvatar = ref(false);\n            const showEditAvatar = ref(false);\n\n            watchEffect(() => {\n                if(!cropper.value) {\n                    return;\n                }\n                if(!file.value) {\n                    cropper.value.destroy();\n                    return;\n                }\n                const reader = new FileReader();\n                reader.onload = event => {\n                    cropper.value.replace(event.target.result);\n                };\n                reader.readAsDataURL(file.value);\n            });\n\n            const backOrMenu = () => {\n                if (route.meta && route.meta.back) {\n                    router.push({ name: <any>route.meta.back });\n                    return;\n                }\n                showUserConfigDialog.value = true;\n            };\n\n            const selectFile = () => {\n                fileInput.value.click();\n            };\n\n            const changeFile = () => {\n                const newFile = fileInput.value?.files[0];\n                if (!newFile || newFile.type.indexOf('image/') === -1) {\n                    return;\n                }\n\n                file.value = fileInput.value?.files[0];\n                showEditAvatar.value = true;\n                fileInput.value.value = null;\n            };\n\n            const saveNewAvatar = async () => {\n                const blob = await (\n                    await fetch(\n                        cropper.value\n                            .getCroppedCanvas()\n                            .toDataURL(file.value.type)\n                    )\n                ).blob();\n                const tempFile = new File([blob], 'avatar', {\n                    type: file.value.type,\n                });\n                await sendNewAvatar(tempFile);\n                showEditAvatar.value = false;\n            };\n\n            const cancelNewAvatar = () => {\n                showEditAvatar.value = false;\n            };\n\n            const removeFile = () => {\n                file.value = null;\n            };\n\n            const sendNewAvatar = async (data: any) => {\n                await setNewAvatar(data);\n                await fetchStatus(user.id);\n            };\n\n            const setEditStatus = (edit: boolean) => {\n                isEditingStatus.value = edit;\n                userStatus.value = user.status;\n            };\n            const sendNewStatus = async () => {\n                const { sendSocketUserStatus } = useSocketActions();\n                sendSocketUserStatus(userStatus.value);\n                user.status = userStatus.value;\n                isEditingStatus.value = false;\n            };\n\n            const blockedUsers = computed(() => {\n                return getBlockList();\n            });\n            // @todo: config\n\n            const unblockUser = async user => {\n                await deleteBlockedEntry(user);\n                showUserConfigDialog.value = false;\n            };\n\n            const addUser = () => {\n                ctx.emit('addUser');\n            };\n\n            const status = computed(() => {\n                return statusList[<string>user.id];\n            });\n\n            const src = computed(() => {\n                if (!status.value || !status.value.avatar) {\n                    return `https://avatars.dicebear.com/4.5/api/jdenticon/${encodeURI(\n                        <string>user.id\n                    )}.svg?m=14&b=%23ffffff`;\n                }\n\n                return calcExternalResourceLink(status.value.avatar);\n            });\n\n            return {\n                addUser,\n                backOrMenu,\n                user,\n                showEditPic,\n                fileInput,\n                file,\n                selectFile,\n                changeFile,\n                removeFile,\n                sendNewAvatar,\n                sendNewStatus,\n                userStatus,\n                setEditStatus,\n                isEditingStatus,\n                blockedUsers,\n                unblockUser,\n                route,\n                showUserConfigDialog,\n                src,\n                myStatus,\n                cropper,\n                saveNewAvatar,\n                isHoveringAvatar,\n                showEditAvatar,\n                cancelNewAvatar,\n            };\n        },\n    });\n</script>\n\n<style scoped>\n    .configDialog {\n        position: absolute;\n        margin: auto;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        width: 800px;\n        height: 600px;\n        z-index: 10;\n        background-color: aquamarine;\n        border: 2px solid black;\n    }\n    .avatar-container {\n        position: relative;\n    }\n    .overlay {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        z-index: 20;\n        text-align: center;\n    }\n</style>\n","export interface User extends Contact {\n    image: string;\n    email: string;\n    status: string;\n}\n\nexport interface App {\n    id: string;\n    name: string;\n    url: string;\n    iconUrl: string;\n    sharedWith: User[];\n    accessHistory: User[];\n}\n\nexport interface Tab {\n    name: string;\n    icon: string;\n}\n\nexport interface userMessagesContainer {\n    id: DtId;\n    messages: Message<MessageBodyType>[];\n}\n\nexport interface Message<T> {\n    id: Id;\n    from: DtId;\n    to: Id | DtId;\n    body: T;\n    timeStamp: Date;\n    type: String;\n    subject: Id | null;\n    replies: Message<MessageBodyType>[];\n    updated?: Date;\n}\n\nexport interface MessageBodyType {}\n\nexport interface StringMessageType extends String, MessageBodyType {}\n\nexport interface QuoteBodyType extends MessageBodyType {\n    message: string;\n    quotedMessage: Message<MessageBodyType>;\n}\nexport interface GroupUpdate extends MessageBodyType {\n    type: string;\n    contact: Contact;\n    chat: Chat;\n    adminLocation: string;\n}\n\nexport interface Chat {\n    chatId: Id;\n    messages: Message<MessageBodyType>[];\n    read: {\n        [key: string]: string;\n    };\n    contacts: (AnonymousContact | Contact)[];\n    acceptedChat: boolean;\n    name: string;\n    isGroup: boolean;\n    adminId: Id;\n}\nexport interface PersonChat extends Chat {}\n\nexport interface GroupChat extends Chat {}\n\nexport interface Contact extends AnonymousContact {\n    location: string;\n}\n\nexport interface AnonymousContact {\n    id: DtId;\n}\n\nexport interface DtId extends Id {}\n\nexport interface Id extends String {}\n\nexport interface Workspace extends GroupChat {\n    subGroups: GroupChat[];\n}\n\nexport enum SystemMessageTypes {\n    REMOVE_USER = 'REMOVEUSER',\n    ADD_USER = 'ADDUSER',\n    JOINED_VIDEOROOM = 'JOINED_VIDEOROOM',\n}\n\nexport interface GroupManagementBody extends SystemBody {\n    adminLocation: any;\n    contact: Contact;\n}\nexport interface JoinedVideoRoomBody extends SystemBody {\n    id: string;\n}\n\nexport interface SystemBody {\n    type?: SystemMessageTypes;\n    message: string;\n}\n\nexport interface GetMessagesResponse {\n    hasMore: boolean;\n    messages: Array<Message<MessageBodyType>>\n}\n\nexport enum MessageTypes {\n    STRING = 'STRING',\n    SYSTEM = 'SYSTEM',\n    GIF = 'GIF',\n    MESSAGE = 'MESSAGE',\n    FILE = 'FILE',\n    FILE_UPLOAD = 'FILE_UPLOAD',\n    EDIT = 'EDIT',\n    READ = 'READ',\n    CONTACT_REQUEST = 'CONTACT_REQUEST',\n    DELETE = 'DELETE',\n    QUOTE = 'QUOTE',\n}\n","let spawnerurl = window.location.host.split('.');\nspawnerurl.shift();\nlet config = {\n    baseUrl: `${window.location.origin}/`,\n    spawnerUrl: `https://${spawnerurl.join('.')}/`,\n    giphyApiKey: `uk3XRSO0vYrPDEQKDPZJ2wGz33qzIxST`,\n};\nexport default config;\n","export function uuidv4() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(\n        /[xy]/g,\n        function (c) {\n            var r = (Math.random() * 16) | 0,\n                v = c == 'x' ? r : (r & 0x3) | 0x8;\n            return v.toString(16);\n        }\n    );\n}\n","import { reactive } from '@vue/reactivity';\nimport { readonly, ref, toRefs } from 'vue';\nimport axios from 'axios';\nimport moment from 'moment';\nimport {\n    Chat,\n    Contact, GetMessagesResponse,\n    GroupChat,\n    GroupManagementBody,\n    Message,\n    MessageBodyType,\n    MessageTypes,\n    SystemBody,\n    SystemMessageTypes,\n} from '../types';\nimport { useSocketActions } from './socketStore';\nimport { useAuthState } from './authStore';\nimport config from '../../public/config/config';\nimport { uuidv4 } from '@/common';\nimport { startFetchStatusLoop } from '@/store/statusStore';\nimport { uniqBy } from 'lodash';\nimport { useScrollActions } from './scrollStore';\nimport { myYggdrasilAddress } from '@/store/authStore';\n\nconst messageLimit = 50;\nconst state = reactive<ChatState>({\n    chats: [],\n    chatRequests: [],\n    chatInfo: {},\n});\n\nexport const selectedId = ref('');\nexport const selectedMessageId = ref(undefined);\n\nexport enum MessageAction {\n    EDIT = 'EDIT',\n    REPLY = 'REPLY',\n}\n\ninterface MessageState {\n    actions: {\n        [key: string]: {\n            message: Message<any>;\n            type: MessageAction;\n        };\n    };\n}\n\nexport const messageState = reactive<MessageState>({\n    actions: {},\n});\n\nexport const setMessageAction = (chatId: string, message: Message<any>, action: MessageAction) => {\n    messageState.actions = {\n        ...(messageState.actions ?? {}),\n        [chatId]: {\n            message,\n            type: action,\n        },\n    };\n};\n\nexport const clearMessageAction = (chatId: string) => {\n    messageState.actions = {\n        ...(messageState.actions ?? {}),\n        [chatId]: undefined,\n    };\n};\n\nconst retrievechats = async () => {\n    const params = new URLSearchParams();\n    params.append('limit', messageLimit.toString());\n\n    await axios.get(`${config.baseUrl}api/chats`, { params: params }).then(response => {\n        const incommingchats = response.data;\n\n        // debugger\n        incommingchats.forEach(chat => {\n            console.log(chat);\n            addChat(chat);\n        });\n        sortChats();\n    });\n};\n\nconst getChat = chatId => state.chats.find(x => x.chatId === chatId);\nconst setChatHasMoreMessages = (chatId: string, hasMore: boolean): void => {\n    state.chatInfo[chatId] = {\n        ...(state.chatInfo[chatId] ?? { isLoading: false }),\n        hasMoreMessages: hasMore\n    }\n};\nconst setChatMessagesAreLoading = (chatId: string, isLoading: boolean): void => {\n    state.chatInfo[chatId] = {\n        ...(state.chatInfo[chatId] ?? { hasMoreMessages: false }),\n        isLoading: isLoading\n    }\n};\nconst getChatInfo = (chatId: string) => readonly(state.chatInfo[chatId]);\n\nconst addChat = (chat: Chat) => {\n    setChatHasMoreMessages(<string>chat.chatId, chat.messages && chat.messages.length >= messageLimit);\n\n    if (!chat.isGroup) {\n        const { user } = useAuthState();\n        const otherContact: Contact = <Contact>chat.contacts.find(c => c.id !== user.id);\n        if (otherContact) {\n            startFetchStatusLoop(otherContact);\n        }\n    }\n\n    if (chat.acceptedChat) {\n        state.chats.push(chat);\n        state.chats = uniqBy(state.chats, c => c.chatId);\n    } else {\n        state.chatRequests.push(chat);\n    }\n    sortChats();\n};\n\nexport const removeChat = chatId => {\n    state.chats = state.chats.filter(c => c.chatId !== chatId);\n    sortChats();\n    selectedId.value = <string>state.chats.find(() => true)?.chatId;\n};\n\nconst addGroupchat = (name: string, contacts: Contact[]) => {\n    const { user } = useAuthState();\n    const newGroupchat: GroupChat = {\n        isGroup: true,\n        chatId: uuidv4(),\n        contacts: contacts,\n        messages: [\n            {\n                from: user.id,\n                to: name,\n                body: {\n                    message: `${user.id} has created and invited you to ${name}`,\n                } as SystemBody,\n                timeStamp: new Date(),\n                id: uuidv4(),\n                type: MessageTypes.SYSTEM,\n                replies: [],\n                subject: null,\n            },\n        ],\n        name: name,\n        adminId: user.id,\n        read: {},\n        acceptedChat: true,\n    };\n    axios\n        .put(`${config.baseUrl}api/group`, newGroupchat)\n        .then(res => {\n            console.log(res);\n        })\n        .catch(e => {\n            console.log('failed to add groupchat', e);\n        });\n};\n\nconst acceptChat = id => {\n    axios\n        .post(`${config.baseUrl}api/chats?id=${id}`)\n        .then(() => {\n            const index = state.chatRequests.findIndex(c => c.chatId == id);\n            state.chatRequests[index].acceptedChat = true;\n            addChat(state.chatRequests[index]);\n            const { user } = useAuthState();\n            sendSystemMessage(id, `${user.id} accepted invitation`);\n            state.chatRequests.splice(index, 1);\n        })\n        .catch(error => {\n            console.log('Got an error: ', error);\n        });\n};\n\nconst updateChat = (chat: Chat) => {\n    removeChat(chat.chatId);\n    addChat(chat);\n};\n\nfunction getMessage(chat: Chat, id) {\n    let message = chat.messages.find(m => m.id === id);\n\n    if (!message) {\n        chat.messages.find(m => {\n            const found = m.replies.find(r => r.id === id);\n            if (!found) {\n                return false;\n            }\n\n            message = found;\n            return true;\n        });\n    }\n\n    return message;\n}\n\nconst appendMessages = (chat: Chat, messages: Array<Message<MessageBodyType>> | undefined): void => {\n    if (!messages) return;\n    chat.messages = messages.concat(chat.messages);\n};\n\nconst fetchMessages = async (\n    chatId: string,\n    limit: number,\n    lastMessageId: string | undefined\n): Promise<GetMessagesResponse | undefined> => {\n    const params = new URLSearchParams();\n    if (lastMessageId) params.append('fromId', lastMessageId);\n    params.append('limit', limit.toString());\n\n    const response = await axios.get<GetMessagesResponse>(`${config.baseUrl}api/messages/${chatId}`, {\n        params: params,\n    });\n\n    if (200 > response.status && response.status >= 300) {\n        console.error(response.statusText + ': failed fetching more messages');\n        return;\n    }\n\n    return response.data;\n};\n\nconst getNewMessages = async (chatId: string) => {\n    const info = getChatInfo(chatId);\n    if (!info || info.isLoading || !info.hasMoreMessages) return;\n\n    try {\n        setChatMessagesAreLoading(chatId, true);\n\n        const chat = getChat(chatId);\n        if (!chat) return;\n\n        const response = await fetchMessages(<string>chat.chatId, messageLimit, <string>chat.messages[0]?.id);\n        setChatHasMoreMessages(<string>chat.chatId, response.hasMore);\n        appendMessages(chat, response.messages);\n        return response.messages.length > 0;\n    } catch (ex){\n        return false;\n    } finally {\n        setChatMessagesAreLoading(chatId, false);\n    }\n};\n\nconst addMessage = (chatId, message) => {\n    if (message.type === 'READ') {\n        const chat: Chat = getChat(chatId);\n\n        const newRead = getMessage(chat, message.body);\n        const oldRead = getMessage(chat, <string>message.from);\n\n        if (oldRead && new Date(newRead.timeStamp).getTime() > new Date(oldRead.timeStamp).getTime()) {\n            return;\n        }\n\n        chat.read = { ...chat.read, [<string>message.from]: message.body };\n        return;\n    }\n\n    if (message.type === 'REMOVEUSER' || message.type === 'ADDUSER') {\n        return;\n    }\n\n    const chat: Chat = getChat(chatId);\n\n    if (message.subject) {\n        const subjectMessageIndex = chat.messages.findIndex(m => m.id === message.subject);\n        if (subjectMessageIndex === -1) {\n            return;\n        }\n        const subjectMessage = chat.messages[subjectMessageIndex];\n\n        const replyIndex = subjectMessage.replies.findIndex(m => m.id === message.id);\n        if (replyIndex === -1) {\n            return;\n        }\n        const reply = subjectMessage.replies[replyIndex];\n        if (message.type === MessageTypes.DELETE || message.type === MessageTypes.EDIT) {\n            reply.body = message.body;\n        } else {\n            subjectMessage.replies = [...subjectMessage.replies, message];\n            chat.messages[subjectMessageIndex] = subjectMessage;\n        }\n\n        setLastMessage(chatId, message);\n        return;\n    }\n\n    if (message.type === 'EDIT') {\n        const index = chat.messages.findIndex(mes => mes.id == message.body.id);\n\n        if (index === -1) return;\n        chat.messages[index] = message.body;\n        return;\n    }\n\n    const index = chat.messages.findIndex(mes => mes.id == message.id);\n    if (index !== -1) {\n        chat.messages[index] = message;\n    }\n\n    if (index === -1) {\n        chat.messages.push(message);\n    }\n\n    sortChats();\n    setLastMessage(chatId, message);\n\n    const { addScrollEvent } = useScrollActions();\n    addScrollEvent();\n};\n\nconst sendMessage = (chatId, message, type: string = 'STRING') => {\n    const { sendSocketMessage } = useSocketActions();\n    const { user } = useAuthState();\n    const msg: Message<String> = {\n        id: uuidv4(),\n        body: message,\n        from: user.id,\n        to: chatId,\n        timeStamp: new Date(),\n        type: type,\n        replies: [],\n        subject: null,\n    };\n    addMessage(chatId, msg);\n    sendSocketMessage(chatId, msg);\n};\n\nconst sendSystemMessage = (chatId, message: string) => {\n    sendMessage(chatId, { message: message } as SystemBody, MessageTypes.SYSTEM);\n};\n\nexport const sendMessageObject = (chatId, message: Message<MessageBodyType>) => {\n    const { sendSocketMessage } = useSocketActions();\n    // console.log(chatId, message);\n    // @TODO when doing add message on SYSTEM/groupupdate results in  max call stack exeeded\n    if (message.type !== 'SYSTEM') {\n        addMessage(chatId, message);\n    }\n    const isEdit = message.type === 'EDIT' || message.type === 'DELETE';\n    sendSocketMessage(chatId, message, isEdit);\n};\n\nconst sendFile = async (chatId, selectedFile, isBlob = false) => {\n    const { user } = useAuthState();\n    const id = uuidv4();\n    var formData = new FormData();\n    if (!isBlob) {\n        formData.append('file', selectedFile);\n    } else {\n        formData.append('file', selectedFile, `recording-${Date.now()}.WebM`);\n    }\n\n    const msgToSend: Message<Object> = {\n        id,\n        body: 'Uploading file in progress ...',\n        from: user.id,\n        to: chatId,\n        timeStamp: new Date(),\n        type: 'FILE_UPLOAD',\n        replies: [],\n        subject: null,\n    };\n\n    addMessage(chatId, msgToSend);\n\n    try {\n        await axios.post(`${config.baseUrl}api/files/${chatId}/${id}`, formData, {\n            headers: {\n                'Content-Type': 'multipart/form-data',\n            },\n        });\n        console.log('File uploaded.');\n    } catch (e) {\n        msgToSend.body = `Failed to send file: ${e.message}`;\n        addMessage(chatId, msgToSend);\n        console.log(e);\n    }\n};\n\nconst setLastMessage = (chatId: string, message: Message<String>) => {\n    if (!state.chats) return;\n    const chat = state.chats.find(c => c.chatId == chatId);\n    if (!chat) return;\n\n    sortChats();\n};\n\nconst sortChats = () => {\n    state.chats.sort((a, b) => {\n        var adate = a.messages[a.messages.length - 1]\n            ? a.messages[a.messages.length - 1].timeStamp\n            : new Date(-8640000000000000);\n        var bdate = b.messages[b.messages.length - 1]\n            ? b.messages[b.messages.length - 1].timeStamp\n            : new Date(-8640000000000000);\n        return moment(bdate).unix() - moment(adate).unix();\n    });\n};\n\nconst readMessage = (chatId, messageId) => {\n    const { user } = useAuthState();\n\n    const newMessage: Message<string> = {\n        id: uuidv4(),\n        from: user.id,\n        to: chatId,\n        body: messageId,\n        timeStamp: new Date(),\n        type: 'READ',\n        replies: [],\n        subject: null,\n    };\n    sendMessageObject(chatId, newMessage);\n};\n\nconst updateContactsInGroup = async (groupId, contact: Contact, remove: boolean) => {\n    const { user } = useAuthState();\n    const myLocation = await myYggdrasilAddress();\n    const message: Message<GroupManagementBody> = {\n        id: uuidv4(),\n        from: user.id,\n        to: groupId,\n        body: {\n            type: remove ? SystemMessageTypes.REMOVE_USER : SystemMessageTypes.ADD_USER,\n            message: `${contact.id} has been ${remove ? 'removed from' : 'added to'} the group`,\n            adminLocation: myLocation,\n            contact,\n        },\n        timeStamp: new Date(),\n        type: MessageTypes.SYSTEM,\n        replies: [],\n        subject: null,\n    };\n\n    sendMessageObject(groupId, message);\n};\n\nexport const usechatsState = () => {\n    return {\n        ...toRefs(state),\n    };\n};\n\nexport const usechatsActions = () => {\n    return {\n        addChat,\n        retrievechats,\n        sendMessage,\n        addMessage,\n        sendFile,\n        sendMessageObject,\n        addGroupchat,\n        readMessage,\n        acceptChat,\n        updateContactsInGroup,\n        updateChat,\n        getNewMessages,\n        getChatInfo,\n    };\n};\n\ninterface  ChatInfo {\n    [chatId: string]: {\n        hasMoreMessages: boolean;\n        isLoading: boolean;\n    };\n}\n\ninterface ChatState {\n    chats: Chat[];\n    chatRequests: Chat[];\n    chatInfo: ChatInfo;\n}\n\nexport const handleRead = (message: Message<string>) => {\n    const { user } = useAuthState();\n\n    let chatId = message.to === user.id ? message.from : message.to;\n\n    const { chats } = usechatsState();\n    const chat = chats.value.find(c => c.chatId == chatId);\n\n    const newRead = getMessage(chat, message.body);\n    const oldRead = getMessage(chat, <string>message.from);\n\n    if (oldRead && new Date(newRead.timeStamp).getTime() < new Date(oldRead.timeStamp).getTime()) {\n        return;\n    }\n\n    chat.read[<string>message.from] = message.body;\n};\n","import { reactive } from '@vue/reactivity';\n\nconst state = reactive<State>({\n    scrollEvents: [],\n});\n\nconst addScrollEvent = (force = false) => {\n    state.scrollEvents.push(force);\n};\n\nconst popScrollEvent = () => {\n    state.scrollEvents.pop();\n}\n\nconst clearScrollEvents = () => {\n    state.scrollEvents = [];\n}\n\nexport const useScrollState = () => {\n    return {\n        ...state,\n    };\n};\n\nexport const useScrollActions = () => {\n    return {\n        addScrollEvent,\n        popScrollEvent,\n        clearScrollEvents\n    };\n};\n\ninterface State {\n    scrollEvents: boolean[];\n}\n","import { reactive } from '@vue/reactivity';\nimport { toRefs } from 'vue';\nimport axios from 'axios';\nimport moment from 'moment';\nimport { Contact } from '../types';\nimport config from '../../public/config/config';\nimport { uuidv4 } from '../../src/common/index';\nimport { Chat } from '../types';\nimport { usechatsActions, usechatsState } from './chatStore';\nimport { useAuthState } from './authStore';\nimport { Message, PersonChat, DtId } from '../types/index';\n\n// const state = reactive<State>({\n//     contacts:[]\n// });\n\n// const retrieveContacts = async () => {\n//     return axios.get(`${config.baseUrl}api/contacts`).then(function(response) {\n//         const contacts = response.data\n//         console.log(`here are the contacts`, contacts)\n\n//         state.contacts = contacts;\n//     })\n\n// }\n\n// const contactIsHealthy = (location) => {\n//     let isAvailable = false\n//     axios.get(`https://${location}.digitaltwin.jimbertesting.be/api/healthcheck`).then( (res) => {\n//         console.log(res)\n//         isAvailable = true\n//     }).catch( res => {\n//         isAvailable = false\n//     })\n//     return isAvailable\n// }\n\nconst addContact = (username: DtId, location, dontCheck = false) => {\n    const { user } = useAuthState();\n    const addMessage: Message<String> = {\n        id: uuidv4(),\n        body: `Request has been sent to ${username}`,\n        from: user.id,\n        to: username,\n        timeStamp: new Date(),\n        type: 'SYSTEM',\n        replies: [],\n        subject: null,\n    };\n    const chatname: String = username;\n    axios\n        .post(`${config.baseUrl}api/contacts`, {\n            id: username,\n            location,\n            message: addMessage,\n        })\n        .then(res => {});\n};\n\nconst calculateContacts = () => {\n    const { chats } = usechatsState();\n    const { user } = useAuthState();\n    const contacts = chats.value\n        .filter(chat => !chat.isGroup && chat.acceptedChat)\n        .map(chat => chat.contacts.find(contact => contact.id !== user.id));\n    return contacts;\n};\n\nexport const useContactsState = () => {\n    return {\n        contacts: calculateContacts(),\n        // ...toRefs(state),\n    };\n};\n\nexport const useContactsActions = () => {\n    return {\n        // retrieveContacts,\n        // setLastMessage,\n        addContact,\n    };\n};\n\n// interface State {\n//     contacts: Contact[]\n// }\n","import axios from 'axios';\nimport config from '../../public/config/config';\n\nlet blocklist = [];\n\nexport const initBlocklist = async () => {\n    try {\n        const axiosResponse = await axios.get(`${config.baseUrl}api/blocked/`);\n        blocklist = axiosResponse.data;\n    } catch (e) {\n        console.log('could not get blocklist');\n    }\n};\n\nexport const getBlockList = () => {\n    return blocklist;\n};\n\nexport const addUserToBlockList = userid => {\n    blocklist.push(userid);\n};\n\nexport const deleteBlockedEntry = async user => {\n    await axios.delete(`${config.baseUrl}api/blocked/${user}/`);\n};\n","import { Id, Message } from '@/types';\nimport { reactive } from '@vue/reactivity';\nimport { toRefs, inject } from 'vue';\nimport { handleRead, removeChat, usechatsActions } from './chatStore';\nimport { useContactsState } from './contactStore';\nimport { useAuthState } from '@/store/authStore';\nimport { addUserToBlockList } from '@/store/blockStore';\n\nconst state = reactive<State>({\n    socket: '',\n    notification: {\n        id: '',\n        sound: '',\n    },\n});\n\nconst notify = ({ id, sound = 'beep.mp3' }) => {\n    state.notification = {\n        id,\n        sound,\n    };\n};\n\nconst initializeSocket = (username: string) => {\n    state.socket = inject('socket');\n\n    state.socket.on('connect', () => {\n        console.log('connected with socket.');\n    });\n    state.socket.emit('identify', {\n        name: username,\n    });\n    state.socket.on('chat_removed', chatId => {\n        console.log('chat_removed');\n        removeChat(chatId);\n    });\n    state.socket.on('chat_blocked', chatId => {\n        removeChat(chatId);\n        addUserToBlockList(chatId);\n    });\n    state.socket.on('message', message => {\n        if (message.type === 'READ') {\n            handleRead(message);\n            return;\n        }\n        if (\n            message.type !== 'SYSTEM' ||\n            message.type !== 'EDIT' ||\n            message.type !== 'DELETE'\n        ) {\n            notify({ id: message.id });\n        }\n        const { addMessage } = usechatsActions();\n\n        const { user } = useAuthState();\n        addMessage(message.to === user.id ? message.from : message.to, message);\n    });\n    state.socket.on('connectionRequest', newContactRequest => {\n        const { addChat } = usechatsActions();\n        const { contacts } = useContactsState();\n        const { user } = useAuthState();\n        addChat(newContactRequest);\n    });\n    state.socket.on('chat_updated', chat => {\n        const { updateChat } = usechatsActions();\n        updateChat(chat);\n    });\n    state.socket.on('new_chat', chat => {\n        const { addChat } = usechatsActions();\n        addChat(chat);\n    });\n};\n\nconst sendSocketMessage = async (\n    chatId: string,\n    message: Message<any>,\n    isUpdate = false\n) => {\n    const data = {\n        chatId,\n        message,\n    };\n    const messageType = isUpdate ? 'update_message' : 'message';\n    await state.socket.emit(messageType, data);\n};\n\nexport const sendRemoveChat = async (id: Id) => {\n    state.socket.emit('remove_chat', id);\n};\nexport const sendBlockChat = async (id: Id) => {\n    state.socket.emit('block_chat', id);\n    state.socket.emit('remove_chat', id);\n};\n\nconst sendSocketUserStatus = async (status: string) => {\n    const data = {\n        status,\n    };\n    state.socket.emit('status_update', data);\n};\n\nconst getSocket = () => {\n    return state.socket;\n};\n\nexport const useSocketActions = () => {\n    return {\n        initializeSocket,\n        sendSocketMessage,\n        sendSocketUserStatus,\n        notify,\n    };\n};\n\nexport const useSocketState = () => {\n    return {\n        ...toRefs(state),\n    };\n};\n\ninterface State {\n    socket: any;\n    notification: object;\n}\n","<template>\n    <transition name=\"fade\">\n        <div\n            @keydown.esc=\"$emit('update:modelValue', false)\"\n            v-if=\"modelValue\"\n            class=\"fixed z-50 top-0 left-0 bg-black bg-opacity-50 w-screen h-screen grid place-items-center\"\n        >\n            <div\n                class=\"form-container bg-white p-4 lg:w-2/5 w-10/12 max-w-full rounded\"\n            >\n                <div class=\"flex justify-between\">\n                    <slot name=\"title\" />\n                    <button @click=\"$emit('update:modelValue', false)\">\n                        <i class=\"fas fa-times\"></i>\n                    </button>\n                </div>\n                <div class=\"py-2 flex-col\">\n                    <slot />\n                </div>\n                <div class=\"flex justify-end\" v-if=\"!noActions\">\n                    <button @click=\"$emit('update:modelValue', false)\">\n                        {{ cancelButtonText }}\n                    </button>\n                    <button @click=\"$emit('update:modelValue', true)\">\n                        {{ okButtonText }}\n                    </button>\n                </div>\n            </div>\n        </div>\n    </transition>\n</template>\n<script lang=\"ts\">\n    import { defineComponent } from 'vue';\n    export default defineComponent({\n        props: {\n            modelValue: {\n                type: Boolean,\n                default: false,\n            },\n            noActions: {\n                type: Boolean,\n                default: false,\n            },\n            okButtonText: {\n                type: String,\n                default: 'Ok',\n            },\n            cancelButtonText: {\n                type: String,\n                default: 'Cancel',\n            },\n        },\n        emits: ['update:modelValue'],\n    });\n</script>\n","\n    import { defineComponent } from 'vue';\n    export default defineComponent({\n        props: {\n            modelValue: {\n                type: Boolean,\n                default: false,\n            },\n            noActions: {\n                type: Boolean,\n                default: false,\n            },\n            okButtonText: {\n                type: String,\n                default: 'Ok',\n            },\n            cancelButtonText: {\n                type: String,\n                default: 'Cancel',\n            },\n        },\n        emits: ['update:modelValue'],\n    });\n","import { render } from \"./Dialog.vue?vue&type=template&id=eb4cdbee\"\nimport script from \"./Dialog.vue?vue&type=script&lang=ts\"\nexport * from \"./Dialog.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","import axios from 'axios';\nimport config from '../../public/config/config';\n\nexport const setNewAvatar = async selectedFile => {\n    var formData = new FormData();\n    formData.append('file', selectedFile);\n\n    const url = `${config.baseUrl}api/user/avatar`;\n    try {\n        const result = await axios.post(url, formData, {\n            headers: {\n                'Content-Type': 'multipart/form-data',\n            },\n        });\n        return result.data;\n    } catch (e) {\n        console.log(e);\n    }\n};\n\nexport const isUserAuthenticated = async () => {\n    const url = `${config.baseUrl}api/auth/authenticated`;\n    try {\n        const result = await axios.get(url);\n        return result.data;\n    } catch (e) {\n        console.log(e);\n    }\n};\n","<template>\n    <button class=\" flex items-center rounded-xl m-2 bg-accent text-white btn\">\n        <slot />\n    </button>\n</template>\n\n<script>\n    export default {\n        name: 'Button',\n    };\n</script>\n\n<style scoped>\n    .btn:disabled {\n        background-color: lightgray;\n        cursor: unset;\n    }\n</style>\n","import { render } from \"./Button.vue?vue&type=template&id=306034fb&scoped=true\"\nimport script from \"./Button.vue?vue&type=script&lang=js\"\nexport * from \"./Button.vue?vue&type=script&lang=js\"\n\nimport \"./Button.vue?vue&type=style&index=0&id=306034fb&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-306034fb\"\n\nexport default script","\n    import {\n        computed,\n        defineComponent,\n        onBeforeMount,\n        onMounted,\n        ref,\n        watchEffect,\n    } from 'vue';\n    import { useAuthState, getMyStatus } from '../store/authStore';\n    import { useSocketActions } from '../store/socketStore';\n    import Dialog from '@/components/Dialog.vue';\n    import AvatarImg from '@/components/AvatarImg.vue';\n    import {\n        deleteBlockedEntry,\n        getBlockList,\n        initBlocklist,\n    } from '@/store/blockStore';\n    import { setNewAvatar } from '@/store/userStore';\n    import { fetchStatus } from '@/store/statusStore';\n    import { useRoute, useRouter } from 'vue-router';\n    import { showUserConfigDialog } from '@/services/dialogService';\n    import { statusList } from '@/store/statusStore';\n    import { calcExternalResourceLink } from '../services/urlService';\n    import VueCropper from 'vue-cropperjs';\n    import 'cropperjs/dist/cropper.css';\n    import Button from '@/components/Button.vue';\n\n    export default defineComponent({\n        name: 'UserConfigDialog',\n        components: { AvatarImg, jdialog: Dialog, VueCropper, Button },\n        emits: ['addUser'],\n        created: () => {\n            initBlocklist();\n        },\n        async setup({}, ctx) {\n            const { user } = useAuthState();\n            const showEditPic = ref(false);\n            const fileInput = ref();\n            const file = ref();\n            const userStatus = ref('');\n            const isEditingStatus = ref(false);\n            const router = useRouter();\n            const route = useRoute();\n            const myStatus = await getMyStatus();\n            const cropper = ref(null);\n            const isHoveringAvatar = ref(false);\n            const showEditAvatar = ref(false);\n\n            watchEffect(() => {\n                if(!cropper.value) {\n                    return;\n                }\n                if(!file.value) {\n                    cropper.value.destroy();\n                    return;\n                }\n                const reader = new FileReader();\n                reader.onload = event => {\n                    cropper.value.replace(event.target.result);\n                };\n                reader.readAsDataURL(file.value);\n            });\n\n            const backOrMenu = () => {\n                if (route.meta && route.meta.back) {\n                    router.push({ name: <any>route.meta.back });\n                    return;\n                }\n                showUserConfigDialog.value = true;\n            };\n\n            const selectFile = () => {\n                fileInput.value.click();\n            };\n\n            const changeFile = () => {\n                const newFile = fileInput.value?.files[0];\n                if (!newFile || newFile.type.indexOf('image/') === -1) {\n                    return;\n                }\n\n                file.value = fileInput.value?.files[0];\n                showEditAvatar.value = true;\n                fileInput.value.value = null;\n            };\n\n            const saveNewAvatar = async () => {\n                const blob = await (\n                    await fetch(\n                        cropper.value\n                            .getCroppedCanvas()\n                            .toDataURL(file.value.type)\n                    )\n                ).blob();\n                const tempFile = new File([blob], 'avatar', {\n                    type: file.value.type,\n                });\n                await sendNewAvatar(tempFile);\n                showEditAvatar.value = false;\n            };\n\n            const cancelNewAvatar = () => {\n                showEditAvatar.value = false;\n            };\n\n            const removeFile = () => {\n                file.value = null;\n            };\n\n            const sendNewAvatar = async (data: any) => {\n                await setNewAvatar(data);\n                await fetchStatus(user.id);\n            };\n\n            const setEditStatus = (edit: boolean) => {\n                isEditingStatus.value = edit;\n                userStatus.value = user.status;\n            };\n            const sendNewStatus = async () => {\n                const { sendSocketUserStatus } = useSocketActions();\n                sendSocketUserStatus(userStatus.value);\n                user.status = userStatus.value;\n                isEditingStatus.value = false;\n            };\n\n            const blockedUsers = computed(() => {\n                return getBlockList();\n            });\n            // @todo: config\n\n            const unblockUser = async user => {\n                await deleteBlockedEntry(user);\n                showUserConfigDialog.value = false;\n            };\n\n            const addUser = () => {\n                ctx.emit('addUser');\n            };\n\n            const status = computed(() => {\n                return statusList[<string>user.id];\n            });\n\n            const src = computed(() => {\n                if (!status.value || !status.value.avatar) {\n                    return `https://avatars.dicebear.com/4.5/api/jdenticon/${encodeURI(\n                        <string>user.id\n                    )}.svg?m=14&b=%23ffffff`;\n                }\n\n                return calcExternalResourceLink(status.value.avatar);\n            });\n\n            return {\n                addUser,\n                backOrMenu,\n                user,\n                showEditPic,\n                fileInput,\n                file,\n                selectFile,\n                changeFile,\n                removeFile,\n                sendNewAvatar,\n                sendNewStatus,\n                userStatus,\n                setEditStatus,\n                isEditingStatus,\n                blockedUsers,\n                unblockUser,\n                route,\n                showUserConfigDialog,\n                src,\n                myStatus,\n                cropper,\n                saveNewAvatar,\n                isHoveringAvatar,\n                showEditAvatar,\n                cancelNewAvatar,\n            };\n        },\n    });\n","import { render } from \"./UserConfigDialog.vue?vue&type=template&id=99cf5eb6&scoped=true\"\nimport script from \"./UserConfigDialog.vue?vue&type=script&lang=ts\"\nexport * from \"./UserConfigDialog.vue?vue&type=script&lang=ts\"\n\nimport \"./UserConfigDialog.vue?vue&type=style&index=0&id=99cf5eb6&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-99cf5eb6\"\n\nexport default script","<template>\n    <div\n        class=\"items-center bg-gradient flex justify-between md:topgrid relative h-full px-4 md:px-0\"\n    >\n        <div class=\"flex\">\n            <div class=\"h-5 ml-4 items-center\">\n                <button\n                    class=\"text-lg text-white md:hidden w-12\"\n                    @click=\"backOrMenu\"\n                    :class=\"{ 'md:hidden': !(route.meta && route.meta.back) }\"\n                >\n                    <i\n                        :class=\"\n                            `fas ${\n                                route.meta && route.meta.back\n                                    ? 'fa-chevron-left'\n                                    : 'fa-bars'\n                            }`\n                        \"\n                    ></i>\n                </button>\n                <img\n                    src=\"/TFN.svg\"\n                    alt=\"TF-Logo\"\n                    class=\"md:ml-4 h-full hidden md:flex\"\n                />\n            </div>\n\n            <div\n                class=\"h-5 flex items-center col-span-3 md:col-span-1 md:hidden\"\n            >\n                <slot>\n                    <img\n                        src=\"/digitaltwin.svg\"\n                        alt=\"TF-Logo\"\n                        class=\"md:hidden md:ml-4 h-full\"\n                    />\n                </slot>\n            </div>\n        </div>\n\n        <div\n            class=\"pr-4 text-right text-gray-500 flex items-center justify-begin\"\n        >\n            <div\n                class=\"h-5 md:flex text-black items-center col-span-3 md:col-span-1 hidden\"\n            >\n                <slot>\n                    <img\n                        src=\"/TFN.svg\"\n                        alt=\"TF-Logo\"\n                        class=\"md:hidden md:ml-4 h-full\"\n                    />\n                </slot>\n            </div>\n\n            <slot name=\"actions\"></slot>\n        </div>\n    </div>\n</template>\n\n<script lang=\"ts\">\n    import { computed, defineComponent, onBeforeMount, ref } from 'vue';\n    import { useAuthState } from '../store/authStore';\n    import { useSocketActions } from '../store/socketStore';\n    import Dialog from './Dialog.vue';\n    import AvatarImg from '@/components/AvatarImg.vue';\n    import {\n        deleteBlockedEntry,\n        getBlockList,\n        initBlocklist,\n    } from '@/store/blockStore';\n    import { setNewAvatar } from '@/store/userStore';\n    import { fetchStatus } from '@/store/statusStore';\n    import { useRoute, useRouter } from 'vue-router';\n    import { showUserConfigDialog } from '@/services/dialogService';\n\n    export default defineComponent({\n        name: 'Topbar',\n        components: { AvatarImg, jdialog: Dialog },\n        emits: ['addUser'],\n        setup({}, ctx) {\n            const { user } = useAuthState();\n            const showEdit = ref(false);\n            const showEditPic = ref(false);\n            const fileinput = ref();\n            const file = ref();\n            const userStatus = ref('');\n            const isEditingStatus = ref(false);\n            const router = useRouter();\n            const route = useRoute();\n            const backOrMenu = () => {\n                if (route.meta && route.meta.back) {\n                    router.push({ name: <any>route.meta.back });\n                    return;\n                }\n\n                showUserConfigDialog.value = true;\n            };\n\n            const selectFile = () => {\n                fileinput.value.click();\n            };\n            const changeFile = () => {\n                file.value = fileinput.value?.files[0];\n                sendNewAvatar();\n            };\n            const removeFile = () => {\n                file.value = null;\n            };\n\n            const sendNewAvatar = async () => {\n                const newUrl = await setNewAvatar(file.value);\n                await fetchStatus(user.id);\n                showUserConfigDialog.value = false;\n            };\n\n            const setEditStatus = (edit: boolean) => {\n                isEditingStatus.value = edit;\n                userStatus.value = user.status;\n            };\n            const sendNewStatus = async () => {\n                const { sendSocketUserStatus } = useSocketActions();\n                sendSocketUserStatus(userStatus.value);\n                user.status = userStatus.value;\n                isEditingStatus.value = false;\n            };\n\n            const blockedUsers = computed(() => {\n                return getBlockList();\n            });\n            // @todo: config\n\n            onBeforeMount(() => {\n                initBlocklist();\n            });\n\n            const unblockUser = async user => {\n                await deleteBlockedEntry(user);\n                showUserConfigDialog.value = false;\n            };\n\n            const addUser = () => {\n                ctx.emit('addUser');\n            };\n\n            return {\n                addUser,\n                backOrMenu,\n                user,\n                showEditPic,\n                showEdit,\n                fileinput,\n                file,\n                selectFile,\n                changeFile,\n                removeFile,\n                sendNewAvatar,\n                sendNewStatus,\n                userStatus,\n                setEditStatus,\n                isEditingStatus,\n                blockedUsers,\n                unblockUser,\n                route,\n            };\n        },\n    });\n</script>\n\n<style scoped>\n    @tailwind base;\n    @tailwind components;\n    @tailwind utilities;\n\n    @layer utilities {\n        @variants responsive {\n            .topgrid {\n                display: grid !important;\n                grid-template-columns: 500px 2fr 1fr !important;\n            }\n        }\n    }\n</style>\n","\n    import { computed, defineComponent, onBeforeMount, ref } from 'vue';\n    import { useAuthState } from '../store/authStore';\n    import { useSocketActions } from '../store/socketStore';\n    import Dialog from './Dialog.vue';\n    import AvatarImg from '@/components/AvatarImg.vue';\n    import {\n        deleteBlockedEntry,\n        getBlockList,\n        initBlocklist,\n    } from '@/store/blockStore';\n    import { setNewAvatar } from '@/store/userStore';\n    import { fetchStatus } from '@/store/statusStore';\n    import { useRoute, useRouter } from 'vue-router';\n    import { showUserConfigDialog } from '@/services/dialogService';\n\n    export default defineComponent({\n        name: 'Topbar',\n        components: { AvatarImg, jdialog: Dialog },\n        emits: ['addUser'],\n        setup({}, ctx) {\n            const { user } = useAuthState();\n            const showEdit = ref(false);\n            const showEditPic = ref(false);\n            const fileinput = ref();\n            const file = ref();\n            const userStatus = ref('');\n            const isEditingStatus = ref(false);\n            const router = useRouter();\n            const route = useRoute();\n            const backOrMenu = () => {\n                if (route.meta && route.meta.back) {\n                    router.push({ name: <any>route.meta.back });\n                    return;\n                }\n\n                showUserConfigDialog.value = true;\n            };\n\n            const selectFile = () => {\n                fileinput.value.click();\n            };\n            const changeFile = () => {\n                file.value = fileinput.value?.files[0];\n                sendNewAvatar();\n            };\n            const removeFile = () => {\n                file.value = null;\n            };\n\n            const sendNewAvatar = async () => {\n                const newUrl = await setNewAvatar(file.value);\n                await fetchStatus(user.id);\n                showUserConfigDialog.value = false;\n            };\n\n            const setEditStatus = (edit: boolean) => {\n                isEditingStatus.value = edit;\n                userStatus.value = user.status;\n            };\n            const sendNewStatus = async () => {\n                const { sendSocketUserStatus } = useSocketActions();\n                sendSocketUserStatus(userStatus.value);\n                user.status = userStatus.value;\n                isEditingStatus.value = false;\n            };\n\n            const blockedUsers = computed(() => {\n                return getBlockList();\n            });\n            // @todo: config\n\n            onBeforeMount(() => {\n                initBlocklist();\n            });\n\n            const unblockUser = async user => {\n                await deleteBlockedEntry(user);\n                showUserConfigDialog.value = false;\n            };\n\n            const addUser = () => {\n                ctx.emit('addUser');\n            };\n\n            return {\n                addUser,\n                backOrMenu,\n                user,\n                showEditPic,\n                showEdit,\n                fileinput,\n                file,\n                selectFile,\n                changeFile,\n                removeFile,\n                sendNewAvatar,\n                sendNewStatus,\n                userStatus,\n                setEditStatus,\n                isEditingStatus,\n                blockedUsers,\n                unblockUser,\n                route,\n            };\n        },\n    });\n","import { render } from \"./Topbar.vue?vue&type=template&id=7e60fd63&scoped=true\"\nimport script from \"./Topbar.vue?vue&type=script&lang=ts\"\nexport * from \"./Topbar.vue?vue&type=script&lang=ts\"\n\nimport \"./Topbar.vue?vue&type=style&index=0&id=7e60fd63&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-7e60fd63\"\n\nexport default script","\n    import { defineComponent, watch } from 'vue';\n    import Sidebar from '@/components/Sidebar.vue';\n    import UserConfigDialog from '@/components/UserConfigDialog.vue';\n    import Topbar from '@/components/Topbar.vue';\n    import { useSocketState } from '../store/socketStore';\n\n    export default defineComponent({\n        name: 'AppLayout',\n        components: { Sidebar, Topbar, UserConfigDialog },\n        setup({}, ctx) {\n            const { notification } = useSocketState();\n\n            let audio = null;\n\n            watch(notification, (newNot: any, oldNot: any) => {\n                var focused = document.hasFocus();\n\n                if (focused) {\n                    return;\n                }\n\n                if (audio === null) {\n                    audio = new Audio(`/${newNot.sound}`);\n                }\n\n                audio.play();\n            });\n\n            return {};\n        },\n    });\n","import { render } from \"./AppLayout.vue?vue&type=template&id=25b66247&scoped=true\"\nimport script from \"./AppLayout.vue?vue&type=script&lang=ts\"\nexport * from \"./AppLayout.vue?vue&type=script&lang=ts\"\n\nimport \"./AppLayout.vue?vue&type=style&index=0&id=25b66247&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-25b66247\"\n\nexport default script","\n    import appLayout from '../../layout/AppLayout.vue';\n    import { defineComponent, computed } from 'vue';\n    import { useAuthState } from '../../store/authStore';\n\n    export default defineComponent({\n        name: 'Apps',\n        components: {\n            appLayout,\n        },\n        setup() {\n            const { user } = useAuthState();\n\n            const computedUrl = computed(() => {\n                return `https://filebrowser.jimbertesting.be/auth/login/user/?username=${user.id}.3bot`;\n            });\n\n            return {\n                computedUrl,\n            };\n        },\n    });\n","import { render } from \"./FileBrowser.vue?vue&type=template&id=037f167e\"\nimport script from \"./FileBrowser.vue?vue&type=script&lang=ts\"\nexport * from \"./FileBrowser.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\n    <iframe\n        :src=\"computedUrl\"\n        allow=\"microphone; camera\"\n        style=\"\n                position: relative;\n                top: 0;\n                left: 0;\n                bottom: 0;\n                right: 0;\n                width: 100%;\n                height: 100%;\n                border: none;\n                margin: 0;\n                padding: 0;\n                overflow: hidden;\n                z-index: 999999;\n            \"\n    >\n        Your browser doesn't support iframes\n    </iframe>\n</template>\n\n<script lang=\"ts\">\n    import appLayout from '../../layout/AppLayout.vue';\n    import { defineComponent, computed } from 'vue';\n    import { useAuthState } from '../../store/authStore';\n    import { useRoute } from 'vue-router';\n\n    export default defineComponent({\n        name: 'Apps',\n        components: {\n            appLayout,\n        },\n        setup() {\n            const { user } = useAuthState();\n            const route = useRoute();\n\n            const computedUrl = computed(() => {\n                return `https://freeflowconnect.threefold.me/?roomName=${route.params.id}&username=${user.id}.3bot`;\n            });\n\n            return {\n                computedUrl,\n            };\n        },\n    });\n</script>\n\n<style scoped type=\"text/css\"></style>\n","\n    import appLayout from '../../layout/AppLayout.vue';\n    import { defineComponent, computed } from 'vue';\n    import { useAuthState } from '../../store/authStore';\n    import { useRoute } from 'vue-router';\n\n    export default defineComponent({\n        name: 'Apps',\n        components: {\n            appLayout,\n        },\n        setup() {\n            const { user } = useAuthState();\n            const route = useRoute();\n\n            const computedUrl = computed(() => {\n                return `https://freeflowconnect.threefold.me/?roomName=${route.params.id}&username=${user.id}.3bot`;\n            });\n\n            return {\n                computedUrl,\n            };\n        },\n    });\n","import { render } from \"./VideoRoom.vue?vue&type=template&id=68c3f428\"\nimport script from \"./VideoRoom.vue?vue&type=script&lang=ts\"\nexport * from \"./VideoRoom.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\n    <router-view />\n</template>\n\n<script lang=\"ts\">\n    import { defineComponent } from 'vue';\n\n    export default defineComponent({\n        name: 'AppLayout',\n    });\n</script>\n\n<style scoped></style>\n","\n    import { defineComponent } from 'vue';\n\n    export default defineComponent({\n        name: 'AppLayout',\n    });\n","import { render } from \"./Basic.vue?vue&type=template&id=5a6ba44e\"\nimport script from \"./Basic.vue?vue&type=script&lang=ts\"\nexport * from \"./Basic.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\n    <app-layout>\n        <div class=\"relative h-full w-full grid md:customgrid\">\n            <ChatList v-model=\"showAddUserDialog\" />\n            <div class=\"hidden w-full h-full md:grid place-items-center\">\n                <div class=\"flex flex-col mb-12 text-center\">\n                    <p>Select a chat</p>\n                    <button\n                        @click=\"showAddUserDialog = true\"\n                        class=\"mt-2 border rounded-full py-1 px-3\"\n                    >\n                        Or start a new conversation\n                    </button>\n                </div>\n            </div>\n        </div>\n    </app-layout>\n</template>\n\n<script lang=\"ts\">\n    import appLayout from '../../layout/AppLayout.vue';\n    import { defineComponent } from 'vue';\n    import ChatList from '@/components/ChatList.vue';\n    import { showAddUserDialog } from '@/services/dialogService';\n\n    export default defineComponent({\n        name: 'Apps',\n        components: {\n            appLayout,\n            ChatList,\n        },\n        setup({}, ctx) {\n            return {\n                showAddUserDialog,\n            };\n        },\n    });\n</script>\n\n<style scoped type=\"text/css\">\n    @tailwind base;\n    @tailwind components;\n    @tailwind utilities;\n\n    @layer utilities {\n        @variants responsive {\n            .customgrid {\n                grid-template-columns: 400px 1fr;\n            }\n        }\n    }\n</style>\n","<template>\n    <section\n        class=\"h-full bg-white w-full\"\n        :class=\"{\n            'collapsed-bar': collapsed,\n            'md:w-16': collapsed,\n            'md:w-400p': !collapsed,\n        }\"\n    >\n        <div class=\"relative w-full pt-4 justify-center\">\n            <div\n                class=\"chatcard cursor-pointer flex flex-row items-center flex-row collapsed-bar:flex-col-reverse justify-center collapsed-bar:mb-0 mb-2\"\n            >\n                <div class=\"flex-1 collapsed-bar:mb-2 flex flex-row items-center\">\n                    <button @click=\"showAddUserDialog = true\" class=\"bg-icon rounded-full text-white w-8 h-8 collapsed-bar:w-10 collapsed-bar:h-10\">\n                        <i class=\"fas fa-plus\"></i>\n                    </button>\n                    <h1 class=\"collapsed-bar:hidden pt-1\">Messages</h1>\n                </div>\n                <div class=\"ml-auto collapsed-bar:m-0 collapsed-bar:mb-2 hidden md:block relative\">\n                    <button\n                        class=\"rounded-full w-8 h-8 collapsed-bar:w-10 collapsed-bar:h-10 bg-gray-100 flex justify-center\"\n                        @click=\"collapsed = !collapsed\"\n                    >\n                        <div v-if=\"collapsed\" class=\"h-full flex items-center justify-center\">\n                            <i class=\"fas fa-chevron-right\"></i>\n                        </div>\n                        <div v-else class=\"h-full flex items-center justify-center\">\n                            <i class=\"fas fa-chevron-left\"></i>\n                        </div>\n                    </button>\n                    <div\n                        v-if=\"filteredChatRequests.length > 0\"\n                        class=\"hidden collapsed-bar:block absolute -top-1 right-1 bg-accent h-4 w-4 rounded-full text-xs z-10 align-middle text-center text-white\"\n                    >\n                        {{ filteredChatRequests.length }}\n                    </div>\n                </div>\n            </div>\n            <div v-if=\"filteredChatRequests.length > 0\" class='collapsed-bar:hidden p-2'>\n                <h2 style=\"font-size: 1.5em\">\n                    You have\n                    <span style=\"\">\n                        {{ filteredChatRequests.length }}\n                    </span>\n                    new connection request<span v-if=\"filteredChatRequests.length > 1\">s</span>\n                </h2>\n                <ChatRequestList :chat-requests=\"filteredChatRequests\" />\n            </div>\n            <div\n                class=\"relative overflow-y-auto w-full max-h-full h-full flex flex-col justify-center items-center px-2 collapsed-bar:px-0\"\n                v-if=\"filteredChats && filteredChats.length\"\n            >\n                <ChatCard\n                    v-for=\"chat in filteredChats\"\n                    :key=\"`${chat.chatId}-${chat.messages.length}-${chat.read[user.id]}`\"\n                    class=\"w-full rounded-lg collapsed-bar:rounded-none p-2 collapsed-bar:my-0 my-2 cursor-pointer\"\n                    @click=\"setSelected(chat.chatId)\"\n                    :collapsed=\"collapsed\"\n                    :chat=\"chat\"\n                />\n            </div>\n        </div>\n\n        <div\n            v-if=\"filteredChatRequests.length == 0 && filteredChats.length == 0\"\n            class=\"text-center collapsed-bar:hidden\"\n        >\n            <p>It feels lonely over here :(</p>\n            <button @click=\"sendUpdate(true)\" class=\"mt-2 border rounded-full px-4\">\n                Add a contact\n            </button>\n        </div>\n\n        <jdialog :modelValue=\"showAddUserDialog\" @update:modelValue=\"sendUpdate\" noActions>\n            <template v-slot:title>\n                <h1>Create a new chat</h1>\n            </template>\n            <add-contact @closeDialog=\"sendUpdate(false)\"> </add-contact>\n        </jdialog>\n    </section>\n</template>\n\n<script lang=\"ts\">\n    import moment from 'moment';\n    import { useSocketActions } from '@/store/socketStore';\n    import { defineComponent, ref, computed, onBeforeMount, inject } from 'vue';\n    import { usechatsState, usechatsActions } from '@/store/chatStore';\n    import { useAuthState, useAuthActions } from '@/store/authStore';\n    import addContact from '@/components/ContactAdd.vue';\n    import AvatarImg from '@/components/AvatarImg.vue';\n    import ChatRequestList from '@/components/ChatRequestList.vue';\n    import Dialog from '@/components/Dialog.vue';\n    import ChatCard from '@/components/ChatCard.vue';\n    import { startFetchStatusLoop } from '@/store/statusStore';\n    import { statusList } from '@/store/statusStore';\n    import { uniqBy } from 'lodash';\n    import { useRouter } from 'vue-router';\n    import { showAddUserDialog } from '@/services/dialogService';\n    import { useScrollActions } from '@/store/scrollStore';\n    export default defineComponent({\n        name: 'Apps',\n        props: {\n            modelValue: {\n                type: Boolean,\n                default: false,\n            },\n        },\n        components: {\n            addContact,\n            jdialog: Dialog,\n            ChatCard,\n            AvatarImg,\n            ChatRequestList,\n        },\n        emits: ['closeDialog'],\n        setup(props, context) {\n            const { chats, chatRequests } = usechatsState();\n            const { retrievechats } = usechatsActions();\n            const collapsed = ref(false);\n            let selectedId = ref('');\n\n            const status = computed(() => {\n                return statusList[selectedId.value];\n            });\n\n            const { user } = useAuthState();\n\n            const m = val => moment(val);\n            const searchValue = ref('');\n            let showContacts = ref(false);\n\n            const router = useRouter();\n\n            const setSelected = id => {\n                router.push({ name: 'single', params: { id } });\n            };\n\n            const filteredChats = computed(() => {\n                if (searchValue.value == '') {\n                    return chats.value;\n                }\n                console.log('filtered', chats.value);\n                return chats.value.filter(c => c.name.toLowerCase().includes(searchValue.value.toLowerCase()));\n            });\n            onBeforeMount(() => {\n                const { initializeSocket } = useSocketActions();\n                initializeSocket(user.id.toString());\n                retrievechats();\n            });\n\n            const selectedChat = computed(() => chats.value.find(chat => chat.chatId == selectedId.value));\n\n            startFetchStatusLoop(user);\n\n            const filteredChatRequests = computed(() => {\n                const filteredChats = chatRequests.value.filter(cr => !chats.value.find(c => c.chatId === cr.chatId));\n\n                //@ts-ignore\n                return uniqBy(filteredChats, c => c.chatId);\n            });\n\n            const sendUpdate = newVal => {\n                console.log('update it');\n                showAddUserDialog.value = newVal;\n            };\n\n            return {\n                status,\n                selectedId,\n                selectedChat,\n                setSelected,\n                chats,\n                filteredChatRequests,\n                searchValue,\n                filteredChats,\n                showContacts,\n                user,\n                collapsed,\n                m,\n                sendUpdate,\n                showAddUserDialog,\n            };\n        },\n    });\n</script>\n\n<style scoped type=\"text/css\">\n    @media (min-width: 768px) {\n        .md\\:w-400p {\n            width: 400px;\n        }\n    }\n</style>\n","<template>\n    <div class=\"place-items-start\">\n        <div class=\"grid grid-cols-2\">\n            <a\n                class=\"nav-link grid-cols-6 text-center py-2\"\n                @click.prevent=\"setActive('user')\"\n                :class=\"{ active: isActive('user') }\"\n                href=\"#\"\n            >\n                Add a user\n            </a>\n            <a\n                class=\"nav-link grid-cols-6 text-center py-2\"\n                @click.prevent=\"setActive('group')\"\n                :class=\"{ active: isActive('group') }\"\n                href=\"#\"\n            >\n                Create a group\n            </a>\n        </div>\n\n        <form @submit.prevent=\"contactAdd\" class=\"w-full\" v-if=\"isActive('user')\">\n            <div class=\"flex place-items-center\">\n                <label class=\"mr-2\" for=\"username\">Username:</label>\n                <auto-complete\n                    :data=\"possibleUsers\"\n                    v-model=\"usernameAdd\"\n                    placeholder=\"Search for user...\"\n                    :error=\"usernameAddError\"\n                    @clicked=\"handleClicked\"\n                ></auto-complete>\n            </div>\n            <div class=\"flex place-items-center\">\n                <label class=\"mr-2\" for=\"location\">Location:</label>\n                <input id=\"location\" v-model=\"userAddLocation\" class=\"mb-2\" />\n            </div>\n\n            <div class=\"flex mt-4 justify-end w-full\">\n                <button type=\"button\" @click=\"$emit('closeDialog')\">\n                    Cancel\n                </button>\n                <button>Add contact</button>\n            </div>\n        </form>\n        <form @submit.prevent=\"groupAdd\" class=\"w-full\" v-if=\"isActive('group')\">\n            <div class=\"flex place-items-center\">\n                <label class=\"mr-2\" for=\"username\">Group name: </label>\n                <div class=\"w-full\">\n                    <input v-model=\"groupnameAdd\" id=\"username\" class=\"mb-2\" placeholder=\"Group name\" />\n                    <br />\n                    <span class=\"text-red-600\" v-if=\"groupnameAddError != ''\">\n                        {{ groupnameAddError }}\n                    </span>\n                </div>\n            </div>\n            <div class=\"flex flex-col max-h-52 relative overflow-auto my-2 bg-gray-100 px-4 py-2 rounded-xl\">\n                <div class=\"h-full\">\n                    <div v-if=\"!contacts.length\">\n                        <p class=\"text-gray-300 text-center py-4\">\n                            No users in group yet\n                        </p>\n                    </div>\n                    <div v-for=\"(contact, i) in contacts\" :key=\"i\" class=\"grid grid-cols-12 rounded-lg mb-2 py-2\">\n                        <div class=\"col-span-2 place-items-center grid\">\n                            <AvatarImg :id=\"contact.id\" alt=\"contact image\" />\n                        </div>\n                        <div class=\"col-span-8 pl-4 flex flex-col justify-center\">\n                            {{ contact.id }}\n                        </div>\n                        <div class=\"col-span-2 place-items-center grid\">\n                            <button\n                                class=\"h-12 rounded-full\"\n                                @click=\"removeUserFromGroup(contact)\"\n                                v-if=\"userIsInGroup(contact)\"\n                            >\n                                <i class=\"fas fa-times\"></i>\n                            </button>\n                            <button\n                                class=\"h-12 rounded-full\"\n                                @click=\"usersInGroup.push(contact)\"\n                                v-if=\"!userIsInGroup(contact)\"\n                            >\n                                <i class=\"fas fa-plus\"></i>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"flex mt-4 justify-end w-full\">\n                <button @click=\"$emit('closeDialog')\">Cancel</button>\n                <button>Add Group</button>\n            </div>\n        </form>\n    </div>\n</template>\n\n<script lang=\"ts\">\n    import { selectedId, usechatsActions, usechatsState } from '@/store/chatStore';\n    import { defineComponent, ref, computed, nextTick, watch } from 'vue';\n    import { useContactsActions, useContactsState } from '../store/contactStore';\n    import { useAuthState, myYggdrasilAddress } from '../store/authStore';\n    import { Chat, Contact, Message } from '../types/index';\n    import axios from 'axios';\n    import config from '../../public/config/config';\n    import autoComplete from './AutoComplete.vue';\n    import { uuidv4 } from '@/common';\n    import AvatarImg from '@/components/AvatarImg.vue';\n\n    export default defineComponent({\n        name: 'ContactAdd',\n        components: { AvatarImg, autoComplete },\n        emits: ['closeDialog'],\n        setup(props, { emit }) {\n            const { contacts } = useContactsState();\n            let addGroup = ref(false);\n            let usernameAdd = ref('');\n            let userAddLocation = ref('');\n            let usernameAddError = ref('');\n            let groupnameAdd = ref('');\n            let groupnameAddError = ref('');\n            let usernameInGroupAdd = ref('');\n            let usersInGroup = ref<Contact[]>([]);\n            let possibleUsers = ref<Contact[]>([]);\n            let contactAddError = ref('');\n\n            const contactAdd = () => {\n                try {\n                    let userId = usernameAdd.value;\n                    if (!possibleUsers.value.find(pu => pu.id === userId)) {\n                        usernameAddError.value = 'Not able to find DigitalTwin of this user';\n                        // return;\n                    }\n                    const { chats } = usechatsState();\n                    if (chats.value.filter(chat => !chat.isGroup).find(chat => <string>chat.chatId == userId)) {\n                        usernameAddError.value = 'Already added this user';\n                        return;\n                    }\n                    const { addContact } = useContactsActions();\n                    addContact(userId, userAddLocation.value);\n                    console.log(userId);\n                    usernameAdd.value = '';\n                    contactAddError.value = '';\n                    emit('closeDialog');\n\n                    //@todo: setTimeout is dirty should be removed\n                    // next tick was not possible reason: chat was not loaded yet\n                    setTimeout(() => {\n                        selectedId.value = userId;\n                    }, 1000);\n                } catch (err) {\n                    console.log('adding contact failed');\n                    contactAddError.value = err;\n                }\n            };\n\n            const handleClicked = () => {\n                const posUser = possibleUsers.value.find(pu => pu.id == usernameAdd.value);\n                if (posUser) {\n                    userAddLocation.value = posUser.location;\n                }\n            };\n\n            let activeItem = ref('user');\n            const isActive = menuItem => {\n                return activeItem.value === menuItem;\n            };\n\n            const setActive = menuItem => {\n                activeItem.value = menuItem;\n                groupnameAddError.value = '';\n                usernameAddError.value = '';\n            };\n\n            const groupAdd = async () => {\n                const { addGroupchat } = usechatsActions();\n                const { user } = useAuthState();\n                const { chats } = usechatsState();\n                if (groupnameAdd.value == '') {\n                    groupnameAddError.value = 'Please enter a group name';\n                    return;\n                }\n                if (groupnameAdd.value.length > 20) {\n                    groupnameAddError.value = \"The name can't contain more than 20 characters\";\n                    return;\n                }\n                const mylocation = await myYggdrasilAddress();\n                usersInGroup.value.push({\n                    id: user.id,\n                    location: mylocation,\n                });\n\n                addGroupchat(groupnameAdd.value, usersInGroup.value);\n                //@todo: setTimeout is dirty should be removed\n                // next tick was not possible reason: chat was not loaded yet\n                setTimeout(() => {\n                    selectedId.value = groupnameAdd.value;\n                }, 1000);\n                usersInGroup.value = [];\n                emit('closeDialog');\n            };\n\n            const userIsInGroup = (contact: Contact) => {\n                const user = usersInGroup.value.find(c => c.id == contact.id);\n                if (user) {\n                    return true;\n                }\n                return false;\n            };\n\n            const removeUserFromGroup = (contact: Contact) => {\n                const index = usersInGroup.value.findIndex(u => u.id == contact.id);\n                usersInGroup.value.splice(index, 1);\n            };\n\n            // @todo: config\n            axios.get(`${config.spawnerUrl}api/v1/list`, {}).then(r => {\n                const { user } = useAuthState();\n                const posContacts = <Contact[]>r.data;\n                possibleUsers.value = posContacts.filter(pu => pu.id !== user.id);\n            });\n\n            return {\n                addGroup,\n                usernameAdd,\n                usernameAddError,\n                groupnameAdd,\n                groupnameAddError,\n                usernameInGroupAdd,\n                userAddLocation,\n                contactAdd,\n                usersInGroup,\n                isActive,\n                setActive,\n                groupAdd,\n                contacts,\n                userIsInGroup,\n                removeUserFromGroup,\n                possibleUsers,\n                handleClicked,\n            };\n        },\n    });\n</script>\n\n<style scoped>\n    a.active {\n        background: #e5e7eb;\n    }\n</style>\n","<template>\n    <div class=\"relative w-full\" @keydown.esc=\"showOptions = false\">\n        <input\n            v-model=\"searchTerm\"\n            @input=\"handleInput\"\n            :placeholder=\"placeholder\"\n            ref=\"input\"\n            tabindex=\"0\"\n        />\n        <span class=\"text-red-600\" v-if=\"error != ''\"> {{ error }} </span>\n        <span\n            v-if=\"modelValue\"\n            @click.prevent=\"reset()\"\n            class=\"absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer\"\n        >\n            x\n        </span>\n        <div\n            v-show=\"showOptions\"\n            @click.self=\"handleSelf()\"\n            @focusout=\"showOptions = false\"\n            tabindex=\"0\"\n            :class=\"dropdownClass\"\n        >\n            <ul class=\"py-1\">\n                <li\n                    v-for=\"(item, index) in searchResults()\"\n                    :key=\"index\"\n                    @click=\"handleClick(item)\"\n                    class=\"px-3 py-2 cursor-pointer hover:bg-gray-200 capitalize\"\n                >\n                    <b>{{ item.id }}</b> <br />\n                    <span class=\"truncate\">{{ item.location }}</span>\n                </li>\n                <li\n                    v-if=\"!searchResults().length\"\n                    class=\"px-3 py-2 text-center\"\n                >\n                    No Matching Results\n                </li>\n            </ul>\n        </div>\n    </div>\n</template>\n\n<script lang=\"ts\">\n    import { Contact } from '@/types';\n    import { defineComponent, ref, computed } from 'vue';\n\n    export default defineComponent({\n        props: {\n            modelValue: {\n                type: String,\n                required: false,\n            },\n            placeholder: {\n                type: String,\n                required: false,\n                default: 'Enter text here.',\n            },\n            data: {\n                type: Array,\n                required: true,\n            },\n            dropdownClass: {\n                type: String,\n                required: false,\n                default:\n                    'absolute w-full z-50 bg-white border border-gray-300 mt-1 mh-48 overflow-hidden overflow-y-scroll rounded-md shadow-md',\n            },\n            error: {\n                type: String,\n                default: '',\n            },\n        },\n        emits: ['update:modelValue', 'clicked'],\n        setup(props, { emit }) {\n            const showOptions = ref(false);\n            const chosenOption = ref('');\n            const searchTerm = ref('');\n\n            const reset = () => {\n                emit('update:modelValue', '');\n                chosenOption.value = '';\n                searchTerm.value = '';\n            };\n\n            const handleInput = evt => {\n                emit('update:modelValue', evt.target.value);\n                showOptions.value = true;\n            };\n\n            const handleClick = item => {\n                console.log(chosenOption.value);\n                chosenOption.value = item.id;\n                searchTerm.value = item.id;\n                emit('update:modelValue', item.id);\n                showOptions.value = false;\n                emit('clicked');\n            };\n\n            const clickedOutside = () => {\n                showOptions.value = false;\n\n                if (!chosenOption.value) {\n                    emit('update:modelValue', '');\n                }\n            };\n            const searchResults = () => {\n                return props.data.filter((item: Contact) => {\n                    return item.id\n                        .toLowerCase()\n                        .includes(searchTerm.value.toLowerCase());\n                });\n            };\n\n            return {\n                reset,\n                handleInput,\n                handleClick,\n                clickedOutside,\n                showOptions,\n                chosenOption,\n                searchTerm,\n                searchResults,\n            };\n        },\n    });\n</script>\n\n<style scoped>\n    .mh-48 {\n        max-height: 10rem;\n    }\n</style>\n","\n    import { Contact } from '@/types';\n    import { defineComponent, ref, computed } from 'vue';\n\n    export default defineComponent({\n        props: {\n            modelValue: {\n                type: String,\n                required: false,\n            },\n            placeholder: {\n                type: String,\n                required: false,\n                default: 'Enter text here.',\n            },\n            data: {\n                type: Array,\n                required: true,\n            },\n            dropdownClass: {\n                type: String,\n                required: false,\n                default:\n                    'absolute w-full z-50 bg-white border border-gray-300 mt-1 mh-48 overflow-hidden overflow-y-scroll rounded-md shadow-md',\n            },\n            error: {\n                type: String,\n                default: '',\n            },\n        },\n        emits: ['update:modelValue', 'clicked'],\n        setup(props, { emit }) {\n            const showOptions = ref(false);\n            const chosenOption = ref('');\n            const searchTerm = ref('');\n\n            const reset = () => {\n                emit('update:modelValue', '');\n                chosenOption.value = '';\n                searchTerm.value = '';\n            };\n\n            const handleInput = evt => {\n                emit('update:modelValue', evt.target.value);\n                showOptions.value = true;\n            };\n\n            const handleClick = item => {\n                console.log(chosenOption.value);\n                chosenOption.value = item.id;\n                searchTerm.value = item.id;\n                emit('update:modelValue', item.id);\n                showOptions.value = false;\n                emit('clicked');\n            };\n\n            const clickedOutside = () => {\n                showOptions.value = false;\n\n                if (!chosenOption.value) {\n                    emit('update:modelValue', '');\n                }\n            };\n            const searchResults = () => {\n                return props.data.filter((item: Contact) => {\n                    return item.id\n                        .toLowerCase()\n                        .includes(searchTerm.value.toLowerCase());\n                });\n            };\n\n            return {\n                reset,\n                handleInput,\n                handleClick,\n                clickedOutside,\n                showOptions,\n                chosenOption,\n                searchTerm,\n                searchResults,\n            };\n        },\n    });\n","import { render } from \"./AutoComplete.vue?vue&type=template&id=c8bcf260&scoped=true\"\nimport script from \"./AutoComplete.vue?vue&type=script&lang=ts\"\nexport * from \"./AutoComplete.vue?vue&type=script&lang=ts\"\n\nimport \"./AutoComplete.vue?vue&type=style&index=0&id=c8bcf260&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-c8bcf260\"\n\nexport default script","\n    import { selectedId, usechatsActions, usechatsState } from '@/store/chatStore';\n    import { defineComponent, ref, computed, nextTick, watch } from 'vue';\n    import { useContactsActions, useContactsState } from '../store/contactStore';\n    import { useAuthState, myYggdrasilAddress } from '../store/authStore';\n    import { Chat, Contact, Message } from '../types/index';\n    import axios from 'axios';\n    import config from '../../public/config/config';\n    import autoComplete from './AutoComplete.vue';\n    import { uuidv4 } from '@/common';\n    import AvatarImg from '@/components/AvatarImg.vue';\n\n    export default defineComponent({\n        name: 'ContactAdd',\n        components: { AvatarImg, autoComplete },\n        emits: ['closeDialog'],\n        setup(props, { emit }) {\n            const { contacts } = useContactsState();\n            let addGroup = ref(false);\n            let usernameAdd = ref('');\n            let userAddLocation = ref('');\n            let usernameAddError = ref('');\n            let groupnameAdd = ref('');\n            let groupnameAddError = ref('');\n            let usernameInGroupAdd = ref('');\n            let usersInGroup = ref<Contact[]>([]);\n            let possibleUsers = ref<Contact[]>([]);\n            let contactAddError = ref('');\n\n            const contactAdd = () => {\n                try {\n                    let userId = usernameAdd.value;\n                    if (!possibleUsers.value.find(pu => pu.id === userId)) {\n                        usernameAddError.value = 'Not able to find DigitalTwin of this user';\n                        // return;\n                    }\n                    const { chats } = usechatsState();\n                    if (chats.value.filter(chat => !chat.isGroup).find(chat => <string>chat.chatId == userId)) {\n                        usernameAddError.value = 'Already added this user';\n                        return;\n                    }\n                    const { addContact } = useContactsActions();\n                    addContact(userId, userAddLocation.value);\n                    console.log(userId);\n                    usernameAdd.value = '';\n                    contactAddError.value = '';\n                    emit('closeDialog');\n\n                    //@todo: setTimeout is dirty should be removed\n                    // next tick was not possible reason: chat was not loaded yet\n                    setTimeout(() => {\n                        selectedId.value = userId;\n                    }, 1000);\n                } catch (err) {\n                    console.log('adding contact failed');\n                    contactAddError.value = err;\n                }\n            };\n\n            const handleClicked = () => {\n                const posUser = possibleUsers.value.find(pu => pu.id == usernameAdd.value);\n                if (posUser) {\n                    userAddLocation.value = posUser.location;\n                }\n            };\n\n            let activeItem = ref('user');\n            const isActive = menuItem => {\n                return activeItem.value === menuItem;\n            };\n\n            const setActive = menuItem => {\n                activeItem.value = menuItem;\n                groupnameAddError.value = '';\n                usernameAddError.value = '';\n            };\n\n            const groupAdd = async () => {\n                const { addGroupchat } = usechatsActions();\n                const { user } = useAuthState();\n                const { chats } = usechatsState();\n                if (groupnameAdd.value == '') {\n                    groupnameAddError.value = 'Please enter a group name';\n                    return;\n                }\n                if (groupnameAdd.value.length > 20) {\n                    groupnameAddError.value = \"The name can't contain more than 20 characters\";\n                    return;\n                }\n                const mylocation = await myYggdrasilAddress();\n                usersInGroup.value.push({\n                    id: user.id,\n                    location: mylocation,\n                });\n\n                addGroupchat(groupnameAdd.value, usersInGroup.value);\n                //@todo: setTimeout is dirty should be removed\n                // next tick was not possible reason: chat was not loaded yet\n                setTimeout(() => {\n                    selectedId.value = groupnameAdd.value;\n                }, 1000);\n                usersInGroup.value = [];\n                emit('closeDialog');\n            };\n\n            const userIsInGroup = (contact: Contact) => {\n                const user = usersInGroup.value.find(c => c.id == contact.id);\n                if (user) {\n                    return true;\n                }\n                return false;\n            };\n\n            const removeUserFromGroup = (contact: Contact) => {\n                const index = usersInGroup.value.findIndex(u => u.id == contact.id);\n                usersInGroup.value.splice(index, 1);\n            };\n\n            // @todo: config\n            axios.get(`${config.spawnerUrl}api/v1/list`, {}).then(r => {\n                const { user } = useAuthState();\n                const posContacts = <Contact[]>r.data;\n                possibleUsers.value = posContacts.filter(pu => pu.id !== user.id);\n            });\n\n            return {\n                addGroup,\n                usernameAdd,\n                usernameAddError,\n                groupnameAdd,\n                groupnameAddError,\n                usernameInGroupAdd,\n                userAddLocation,\n                contactAdd,\n                usersInGroup,\n                isActive,\n                setActive,\n                groupAdd,\n                contacts,\n                userIsInGroup,\n                removeUserFromGroup,\n                possibleUsers,\n                handleClicked,\n            };\n        },\n    });\n","import { render } from \"./ContactAdd.vue?vue&type=template&id=2074b94a&scoped=true\"\nimport script from \"./ContactAdd.vue?vue&type=script&lang=ts\"\nexport * from \"./ContactAdd.vue?vue&type=script&lang=ts\"\n\nimport \"./ContactAdd.vue?vue&type=style&index=0&id=2074b94a&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-2074b94a\"\n\nexport default script","<template>\n    <div v-for=\"(chat, i) in chatRequests\" :key=\"i\">\n        <div class=\"flex flex-row items-center w-full rounded-lg mb-2 py-2 align-middle\">\n            <span v-if=\"chat.isGroup\" class=\"truncate flex-1\">\n                {{ chat.admin }} invited you to {{ chat.name }}\n            </span>\n            <span v-else class=\"truncate flex-1\">\n                <b>{{ chat.name }}</b> wants to have a chat\n            </span>\n            <Button class=\"self-end\" @click=\"acceptChatRequest(chat.chatId)\">\n               ACCEPT\n            </Button>\n        </div>\n    </div>\n</template>\n<script lang=\"ts\">\n    import { usechatsActions } from '@/store/chatStore';\n    import Button from \"@/components/Button.vue\"\n\n    export default {\n        name: 'ChatRequestList',\n        components: {\n           Button\n        },\n        props: {\n            chatRequests: {},\n        },\n        setup() {\n            const acceptChatRequest = id => {\n                const { acceptChat } = usechatsActions();\n                acceptChat(id);\n            };\n            return {\n                acceptChatRequest,\n            };\n        },\n    };\n</script>\n","\n    import { usechatsActions } from '@/store/chatStore';\n    import Button from \"@/components/Button.vue\"\n\n    export default {\n        name: 'ChatRequestList',\n        components: {\n           Button\n        },\n        props: {\n            chatRequests: {},\n        },\n        setup() {\n            const acceptChatRequest = id => {\n                const { acceptChat } = usechatsActions();\n                acceptChat(id);\n            };\n            return {\n                acceptChatRequest,\n            };\n        },\n    };\n","import { render } from \"./ChatRequestList.vue?vue&type=template&id=79eb31f5\"\nimport script from \"./ChatRequestList.vue?vue&type=script&lang=ts\"\nexport * from \"./ChatRequestList.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\n    <div\n        class=\"chatcard relative text-sm flex flex-row\"\n        :class=\"{\n            'bg-gray-50': !router.currentRoute?.value.path.includes(chat.chatId),\n            'bg-gray-200': router.currentRoute?.value.path.includes(chat.chatId),\n        }\"\n    >\n        <div class=\" place-items-center relative\">\n            <AvatarImg :id=\"chat.chatId\" :showOnlineStatus=\"!chat.isGroup\" :unreadMessagesAmount=\"unreadMessagesAmount\" />\n        </div>\n        <div class=\"px-2 ml-2 content\" v-if=\"!collapsed\">\n            <p class=\"flex\">\n                <span class=\"font-bold break-normal overflow-ellipsis overflow-hidden name\">\n                    {{ chat.name }}\n                </span>\n                <span class=\"font-thin ml-2\" v-if=\"chat.isGroup\"> (group)</span>\n                <span class=\"font-thin ml-auto\" v-if=\"lastMessage\">\n                    {{ timeAgo(lastMessage.timeStamp) }}\n                </span>\n            </p>\n            <p class=\"col-end-13 col-span-2 font-thin truncate\">\n                {{ lastMessageBody }}\n            </p>\n        </div>\n    </div>\n</template>\n\n<script lang=\"ts\">\n    import { computed, defineComponent, ref } from 'vue';\n    import { findLastIndex } from 'lodash';\n    import { useAuthState } from '@/store/authStore';\n    import { Message, MessageBodyType, MessageTypes, SystemBody } from '@/types';\n    import moment from 'moment';\n    import { statusList } from '@/store/statusStore';\n    import AvatarImg from '@/components/AvatarImg.vue';\n    import { useRouter } from 'vue-router';\n\n    export default defineComponent({\n        name: 'ChatCard',\n        components: { AvatarImg },\n        props: {\n            chat: Object,\n            collapsed: Boolean,\n        },\n        setup(props) {\n            const { user } = useAuthState();\n\n            const lastReadByMe = computed(() => {\n                let lastReadMessage = props.chat.read[<string>user.id];\n                return findLastIndex(\n                    props.chat.messages,\n                    (message: Message<MessageBodyType>) => lastReadMessage === message.id\n                );\n            });\n            const lastMessage = computed(() => {\n                return props.chat && props.chat.messages && props.chat.messages.length\n                    ? props.chat.messages[props.chat.messages.length - 1]\n                    : 'No messages yet';\n            });\n            const newMessages = computed(() => {\n                return props.chat.messages.length - lastReadByMe.value - 1;\n            });\n            const timeAgo = time => {\n                return moment(time).fromNow();\n            };\n\n            const status = computed(() => {\n                return statusList[props.chat.chatId];\n            });\n\n            const router = useRouter();\n            const currentRoute = computed(() => router.currentRoute.value);\n\n            const lastMessageBody = computed(() => {\n                const lstmsg = lastMessage.value;\n                switch (lstmsg.type) {\n                    case 'GIF':\n                        return 'Gif was sent';\n                    case 'QUOTE':\n                        return lstmsg.body.message;\n                    case MessageTypes.SYSTEM:\n                        return (lstmsg.body as SystemBody).message;\n                    case 'FILE':\n                        return 'File has been uploaded';\n                    case 'DELETE':\n                    default:\n                        return lstmsg.body;\n                }\n            });\n\n            const unreadMessagesAmount = computed(() => {\n                if (!props.chat || !user) {\n                    return 0;\n                }\n\n                const lastReadMessageId = props.chat.read[<string>user.id];\n                const index = props.chat.messages?.findIndex(m => m.id === lastReadMessageId);\n                if (!index || index < 1) {\n                    return 0;\n                }\n\n                return props.chat.messages.length - (index + 1);\n            });\n\n            return {\n                status,\n                newMessages,\n                lastReadByMe,\n                lastMessage,\n                lastMessageBody,\n                timeAgo,\n                router,\n                user,\n                currentRoute,\n                unreadMessagesAmount,\n            };\n        },\n    });\n</script>\n\n<style scoped>\n    .content {\n        width: calc(100% - 4rem);\n    }\n\n    .name {\n        max-width: calc(100% - 150px);\n        box-sizing: border-box;\n    }\n    .chatcard {\n        box-sizing: border-box;\n        width: 100%;\n    }\n    .chatcard:hover {\n        background-color: lightgray;\n    }\n</style>\n","\n    import { computed, defineComponent, ref } from 'vue';\n    import { findLastIndex } from 'lodash';\n    import { useAuthState } from '@/store/authStore';\n    import { Message, MessageBodyType, MessageTypes, SystemBody } from '@/types';\n    import moment from 'moment';\n    import { statusList } from '@/store/statusStore';\n    import AvatarImg from '@/components/AvatarImg.vue';\n    import { useRouter } from 'vue-router';\n\n    export default defineComponent({\n        name: 'ChatCard',\n        components: { AvatarImg },\n        props: {\n            chat: Object,\n            collapsed: Boolean,\n        },\n        setup(props) {\n            const { user } = useAuthState();\n\n            const lastReadByMe = computed(() => {\n                let lastReadMessage = props.chat.read[<string>user.id];\n                return findLastIndex(\n                    props.chat.messages,\n                    (message: Message<MessageBodyType>) => lastReadMessage === message.id\n                );\n            });\n            const lastMessage = computed(() => {\n                return props.chat && props.chat.messages && props.chat.messages.length\n                    ? props.chat.messages[props.chat.messages.length - 1]\n                    : 'No messages yet';\n            });\n            const newMessages = computed(() => {\n                return props.chat.messages.length - lastReadByMe.value - 1;\n            });\n            const timeAgo = time => {\n                return moment(time).fromNow();\n            };\n\n            const status = computed(() => {\n                return statusList[props.chat.chatId];\n            });\n\n            const router = useRouter();\n            const currentRoute = computed(() => router.currentRoute.value);\n\n            const lastMessageBody = computed(() => {\n                const lstmsg = lastMessage.value;\n                switch (lstmsg.type) {\n                    case 'GIF':\n                        return 'Gif was sent';\n                    case 'QUOTE':\n                        return lstmsg.body.message;\n                    case MessageTypes.SYSTEM:\n                        return (lstmsg.body as SystemBody).message;\n                    case 'FILE':\n                        return 'File has been uploaded';\n                    case 'DELETE':\n                    default:\n                        return lstmsg.body;\n                }\n            });\n\n            const unreadMessagesAmount = computed(() => {\n                if (!props.chat || !user) {\n                    return 0;\n                }\n\n                const lastReadMessageId = props.chat.read[<string>user.id];\n                const index = props.chat.messages?.findIndex(m => m.id === lastReadMessageId);\n                if (!index || index < 1) {\n                    return 0;\n                }\n\n                return props.chat.messages.length - (index + 1);\n            });\n\n            return {\n                status,\n                newMessages,\n                lastReadByMe,\n                lastMessage,\n                lastMessageBody,\n                timeAgo,\n                router,\n                user,\n                currentRoute,\n                unreadMessagesAmount,\n            };\n        },\n    });\n","import { render } from \"./ChatCard.vue?vue&type=template&id=691ecbc6&scoped=true\"\nimport script from \"./ChatCard.vue?vue&type=script&lang=ts\"\nexport * from \"./ChatCard.vue?vue&type=script&lang=ts\"\n\nimport \"./ChatCard.vue?vue&type=style&index=0&id=691ecbc6&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-691ecbc6\"\n\nexport default script","\n    import moment from 'moment';\n    import { useSocketActions } from '@/store/socketStore';\n    import { defineComponent, ref, computed, onBeforeMount, inject } from 'vue';\n    import { usechatsState, usechatsActions } from '@/store/chatStore';\n    import { useAuthState, useAuthActions } from '@/store/authStore';\n    import addContact from '@/components/ContactAdd.vue';\n    import AvatarImg from '@/components/AvatarImg.vue';\n    import ChatRequestList from '@/components/ChatRequestList.vue';\n    import Dialog from '@/components/Dialog.vue';\n    import ChatCard from '@/components/ChatCard.vue';\n    import { startFetchStatusLoop } from '@/store/statusStore';\n    import { statusList } from '@/store/statusStore';\n    import { uniqBy } from 'lodash';\n    import { useRouter } from 'vue-router';\n    import { showAddUserDialog } from '@/services/dialogService';\n    import { useScrollActions } from '@/store/scrollStore';\n    export default defineComponent({\n        name: 'Apps',\n        props: {\n            modelValue: {\n                type: Boolean,\n                default: false,\n            },\n        },\n        components: {\n            addContact,\n            jdialog: Dialog,\n            ChatCard,\n            AvatarImg,\n            ChatRequestList,\n        },\n        emits: ['closeDialog'],\n        setup(props, context) {\n            const { chats, chatRequests } = usechatsState();\n            const { retrievechats } = usechatsActions();\n            const collapsed = ref(false);\n            let selectedId = ref('');\n\n            const status = computed(() => {\n                return statusList[selectedId.value];\n            });\n\n            const { user } = useAuthState();\n\n            const m = val => moment(val);\n            const searchValue = ref('');\n            let showContacts = ref(false);\n\n            const router = useRouter();\n\n            const setSelected = id => {\n                router.push({ name: 'single', params: { id } });\n            };\n\n            const filteredChats = computed(() => {\n                if (searchValue.value == '') {\n                    return chats.value;\n                }\n                console.log('filtered', chats.value);\n                return chats.value.filter(c => c.name.toLowerCase().includes(searchValue.value.toLowerCase()));\n            });\n            onBeforeMount(() => {\n                const { initializeSocket } = useSocketActions();\n                initializeSocket(user.id.toString());\n                retrievechats();\n            });\n\n            const selectedChat = computed(() => chats.value.find(chat => chat.chatId == selectedId.value));\n\n            startFetchStatusLoop(user);\n\n            const filteredChatRequests = computed(() => {\n                const filteredChats = chatRequests.value.filter(cr => !chats.value.find(c => c.chatId === cr.chatId));\n\n                //@ts-ignore\n                return uniqBy(filteredChats, c => c.chatId);\n            });\n\n            const sendUpdate = newVal => {\n                console.log('update it');\n                showAddUserDialog.value = newVal;\n            };\n\n            return {\n                status,\n                selectedId,\n                selectedChat,\n                setSelected,\n                chats,\n                filteredChatRequests,\n                searchValue,\n                filteredChats,\n                showContacts,\n                user,\n                collapsed,\n                m,\n                sendUpdate,\n                showAddUserDialog,\n            };\n        },\n    });\n","import { render } from \"./ChatList.vue?vue&type=template&id=34659be8&scoped=true\"\nimport script from \"./ChatList.vue?vue&type=script&lang=ts\"\nexport * from \"./ChatList.vue?vue&type=script&lang=ts\"\n\nimport \"./ChatList.vue?vue&type=style&index=0&id=34659be8&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-34659be8\"\n\nexport default script","\n    import appLayout from '../../layout/AppLayout.vue';\n    import { defineComponent } from 'vue';\n    import ChatList from '@/components/ChatList.vue';\n    import { showAddUserDialog } from '@/services/dialogService';\n\n    export default defineComponent({\n        name: 'Apps',\n        components: {\n            appLayout,\n            ChatList,\n        },\n        setup({}, ctx) {\n            return {\n                showAddUserDialog,\n            };\n        },\n    });\n","import { render } from \"./Chat.vue?vue&type=template&id=127bea5a&scoped=true\"\nimport script from \"./Chat.vue?vue&type=script&lang=ts\"\nexport * from \"./Chat.vue?vue&type=script&lang=ts\"\n\nimport \"./Chat.vue?vue&type=style&index=0&id=127bea5a&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-127bea5a\"\n\nexport default script","<template>\n    <appLayout>\n        <template v-slot:top>\n            <div class=\"w-full flex md:px-4\" v-if=\"chat\">\n                <div class=\"place-items-center grid mr-4\">\n                    <AvatarImg :id=\"chat.chatId\" :showOnlineStatus=\"false\"></AvatarImg>\n                </div>\n                <div class=\"py-4 pl-2\">\n                    <p class=\"font-bold font overflow-hidden overflow-ellipsis\">\n                        {{ chat.name }}\n                    </p>\n                    <p class=\"font-thin\" v-if=\"!chat.isGroup\">\n                        {{ statusList[chat.chatId]?.isOnline ? 'Is online' : 'Is offline' }}\n                    </p>\n                    <p class=\"font-thin\" v-if=\"chat.isGroup\">Group chat</p>\n                </div>\n            </div>\n            <div v-else>Loading</div>\n        </template>\n\n        <template v-slot:actions>\n            <div class=\"\">\n                <div class=\"relative\">\n                    <button class=\"text-lg text-white md:hidden\" @click=\"showMenu = true\">\n                        <i class=\"fas fa-ellipsis-v\"></i>\n                    </button>\n                    <div class=\"backdrop\" v-if=\"showMenu\" @click=\"showMenu = false\"></div>\n                    <div\n                        class=\"right-2 z-20 -top-2 flex flex-col bg-white shadow-sm w-40 rounded absolute py-2 pl-2\"\n                        v-if=\"showMenu\"\n                    >\n                        <button @click=\"popupMeeting\" class=\"flex align-center\">\n                            <div class=\"w-8 justify-center align-center\">\n                                <i class=\"fas fa-video\"></i>\n                            </div>\n                            <span class=\"ml-1 text-left\">Call</span>\n                        </button>\n\n                        <button @click=\"null\" class=\"flex\">\n                            <div class=\"w-8\">\n                                <i class=\"fas fa-info-circle\"></i>\n                            </div>\n                            <span class=\"ml-1 text-left\">Info</span>\n                        </button>\n\n                        <button @click=\"blockChat\" class=\"flex\">\n                            <div class=\"w-8\">\n                                <i class=\"fas fa-minus-circle\"></i>\n                            </div>\n                            <span class=\"ml-1 text-left\">Block chat</span>\n                        </button>\n                        <button @click=\"deleteChat\" class=\"flex\">\n                            <div class=\"w-8\">\n                                <i class=\"fas fa-trash\"></i>\n                            </div>\n                            <span class=\"ml-1 text-left\">Delete chat</span>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </template>\n        <template v-slot:default>\n            <ImagePreview />\n            <div class=\"flex flex-row relative h-full w-full\">\n                <ChatList class=\"hidden md:inline-block\" />\n                <div class=\"relative h-full flex flex-col flex-1\" v-if=\"chat\" :key=\"chat.id + selectedId\">\n                    <div class=\"topbar h-14 bg-white flex-row border border-t-0 border-gray-100 hidden md:flex\">\n                        <div class=\"py-2 pl-4 flex-1\">\n                            <p class=\"font-bold font overflow-hidden overflow-ellipsis w-80\">\n                                {{ chat.name }}\n                            </p>\n                            <p class=\"font-thin\">\n                                {{ getChatStatus }}\n                            </p>\n                        </div>\n                        <div class=\"h-full flex items-center self-end px-8  space-x-4\">\n                            <button @click=\"popupMeeting\" class=\"focus:outline-none hover:text-accent text-gray-500\">\n                                <i class=\"fas fa-video fa-w-12\"> </i>\n                            </button>\n\n                            <button\n                                @click=\"toggleSideBar\"\n                                class=\"focus:outline-none hover:text-accent\"\n                                :class=\"{\n                                    'text-accent': showSideBar,\n                                    'text-gray-500': !showSideBar,\n                                }\"\n                            >\n                                <i class=\"far fa-window-maximize transform fa-w-12 \" style=\"--tw-rotate: 90deg\"> </i>\n                            </button>\n                        </div>\n                    </div>\n                    <MessageBox :chat=\"chat\">\n                        <template v-slot:viewAnchor>\n                            <div\n                                id=\"viewAnchor\"\n                                ref=\"viewAnchor\"\n                                style=\"\n                                    height: 40vh;\n                                    position: absolute;\n                                    bottom: 0;\n                                    width: 50%;\n                                    pointer-events: none;\n                                \"\n                            ></div>\n                        </template>\n                    </MessageBox>\n\n                    <ChatInput :selectedid=\"chat.chatId\" @messageSend=\"scrollToBottom(true)\" />\n                    <jdialog v-model=\"showDialog\" noActions class=\"max-w-10\">\n                        <template v-slot:title class=\"center\">\n                            <h1 class=\"text-center\">Blocking</h1>\n                        </template>\n                        <div>\n                            Do you really want to block\n                            <b> {{ chat.name }} </b>?\n                        </div>\n                        <div class=\"grid grid-cols-2 mt-2\">\n                            <button @click=\"doBlockChat\" class=\"bg-red-500 p-2 text-white font-bold\">\n                                YES\n                            </button>\n                            <button @click=\"showDialog = false\" class=\"p-2\">\n                                NO\n                            </button>\n                        </div>\n                    </jdialog>\n                    <jdialog v-model=\"showDeleteDialog\" noActions class=\"max-w-10\">\n                        <template v-slot:title class=\"center\">\n                            <h1 class=\"text-center\">Deleting Conversation</h1>\n                        </template>\n                        <div>\n                            Do you really want to delete the conversation with\n                            <b> {{ chat.name }} </b>?\n                        </div>\n                        <div class=\"grid grid-cols-2 mt-2\">\n                            <button @click=\"doDeleteChat\" class=\"bg-red-500 p-2 text-white font-bold\">\n                                YES\n                            </button>\n                            <button @click=\"showDeleteDialog = false\" class=\"p-2\">\n                                NO\n                            </button>\n                        </div>\n                    </jdialog>\n                </div>\n                <div class=\"grid h-full w-full place-items-center\" v-else>\n                    <h2>Loading</h2>\n                </div>\n                <aside\n                    class=\"hidden relative h-full flex-col overflow-y-auto md:w-400p\"\n                    :class=\"{\n                        'md:flex': showSideBar,\n                        'md:hidden': !showSideBar,\n                    }\"\n                    v-if=\"chat\"\n                    :key=\"'aside' + chat.id + selectedId\"\n                >\n                    <div class=\"absolute max-w-full w-full p-4 pt-8\">\n                        <div\n                            class=\"bg-white p-2 pb-6 w-full relative rounded-lg mb-4 mt-0 md:grid place-items-center grid-cols-1 md:px-4\"\n                        >\n                            <div class=\"place-items-center grid relative\">\n                                <AvatarImg class=\"-mt-7\" :id=\"chat.chatId\" :showOnlineStatus=\"!chat.isGroup\" />\n                            </div>\n                            <h2 class=\"my-3 break-words text-center w-full overflow-y-auto max-h-28 text-xl\">\n                                {{ chat.name }}\n                            </h2>\n                            <p\n                                class=\"break-words w-full overflow-y-auto font-bold text-center text-gray-300\"\n                                v-if=\"!chat.isGroup\"\n                            >\n                                {{ status?.status || 'No status found' }}\n                            </p>\n                        </div>\n                        <group-management\n                            :group-chat=\"chat\"\n                            @app-call=\"popupMeeting\"\n                            @app-block=\"blockChat\"\n                            @app-delete=\"deleteChat\"\n                        ></group-management>\n                    </div>\n                </aside>\n            </div>\n        </template>\n    </appLayout>\n</template>\n\n<script lang=\"ts\">\n    import { useScrollActions, useScrollState } from '@/store/scrollStore';\n\n    import appLayout from '../../layout/AppLayout.vue';\n    import moment from 'moment';\n    import { defineComponent, onMounted, watch, ref, toRefs, nextTick, computed, onBeforeMount, onUpdated } from 'vue';\n\n    import { each } from 'lodash';\n    import { statusList } from '@/store/statusStore';\n    import { usechatsState, usechatsActions } from '@/store/chatStore';\n    import { sendBlockChat, sendRemoveChat } from '@/store/socketStore';\n    import { useAuthState } from '@/store/authStore';\n    import { popupCenter } from '@/services/popupService';\n    import MessageCard from '@/components/MessageCard.vue';\n    import ChatList from '@/components/ChatList.vue';\n    import ChatInput from '@/components/ChatInput.vue';\n    import AvatarImg from '@/components/AvatarImg.vue';\n    import GroupManagement from '@/components/GroupManagement.vue';\n    import Dialog from '@/components/Dialog.vue';\n    import * as crypto from 'crypto-js';\n    import { useIntersectionObserver } from '@/lib/intersectionObserver';\n    import { useRoute, useRouter } from 'vue-router';\n    import { getShowSideBar, toggleSideBar } from '@/services/sidebarService';\n    import { JoinedVideoRoomBody, MessageTypes, SystemMessageTypes } from '@/types';\n    import MessageBox from '@/components/MessageBox.vue';\n    import { scrollMessageBoxToBottom } from '@/services/messageHelperService';\n    import Button from '@/components/Button.vue';\n    import ImagePreview from '@/components/ImagePreview.vue';\n\n    export default defineComponent({\n        name: 'ChatView',\n        components: {\n            Button,\n            MessageBox,\n            AvatarImg,\n            ChatInput,\n            MessageCard,\n            jdialog: Dialog,\n            appLayout,\n            GroupManagement,\n            ChatList,\n            ImagePreview,\n        },\n        setup(props) {\n            const route = useRoute();\n            let selectedId = ref(<string>route.params.id);\n            watch(\n                () => route.params.id,\n                id => {\n                    selectedId.value = <string>id;\n                },\n            );\n\n            const { retrievechats } = usechatsActions();\n            onBeforeMount(retrievechats);\n\n            const { chats } = usechatsState();\n            const { sendMessage } = usechatsActions();\n            const { user } = useAuthState();\n            const m = val => moment(val);\n            const showMenu = ref(false);\n            const file = ref();\n            const router = useRouter();\n            let showDialog = ref(false);\n            let showDeleteDialog = ref(false);\n            const propRefs = toRefs(props);\n            const truncate = (value, limit = 20) => {\n                if (value.length > limit) {\n                    value = value.substring(0, limit - 3) + '...';\n                }\n                return value;\n            };\n\n            const getMessagesSortedByUser = computed(() => {\n                let chatBlockIndex = 0;\n\n                return chat.value.messages.reduce((acc: any, message) => {\n                    if (acc[chatBlockIndex] && acc[chatBlockIndex].user === <string>message.from) {\n                        acc[chatBlockIndex].messages.push(message);\n                        return acc;\n                    } else {\n                        chatBlockIndex++;\n                    }\n\n                    acc[chatBlockIndex] = {\n                        user: <string>message.from,\n                        messages: [],\n                    };\n                    acc[chatBlockIndex].messages.push(message);\n\n                    return acc;\n                }, {});\n            });\n\n            const message = ref('');\n\n            const chat = computed(() => {\n                return chats.value.find(c => c.chatId == selectedId.value);\n            });\n\n            const getChatStatus = computed(() => {\n                if (!chat.value) {\n                    return;\n                }\n\n                if (chat.value.isGroup) {\n                    let message = `${chat.value.contacts.length} members`;\n                    const onlineMembers = chat.value.contacts\n                        .filter(c => c.id != user.id)\n                        .map(c => ({\n                            ...c,\n                            isOnline: statusList[<string>c.id]?.isOnline ?? false,\n                        })).length;\n\n                    if (onlineMembers > 0) {\n                        message += `, ${onlineMembers} online`;\n                    }\n\n                    return message;\n                }\n\n                const status = statusList[<string>chat.value.chatId];\n                return status?.isOnline ? 'Online' : 'Offline';\n            });\n\n            const popupMeeting = () => {\n                // @ts-ignore\n                // const str = chat?.contacts ? chat.id : [user.id, chat.id].sort().join();\n                const str: string = chat.value.isGroup\n                    ? chat.value.chatId\n                    : chat.value.contacts\n                        .map(c => c.id)\n                        .sort()\n                        .join();\n\n                const id = crypto.SHA1(str);\n                sendMessage(\n                    chat.value.chatId,\n                    {\n                        type: SystemMessageTypes.JOINED_VIDEOROOM,\n                        message: `${user.id} joined the video chat`,\n                        id: id.toString(),\n                    } as JoinedVideoRoomBody,\n                    MessageTypes.SYSTEM,\n                );\n\n                popupCenter(`/videoroom/${id}`, 'video room', 800, 550);\n            };\n\n            const deleteChat = () => {\n                showDeleteDialog.value = true\n            };\n            const doDeleteChat = () => {\n                sendRemoveChat(chat.value.chatId);\n                router.push({ name: 'chat' });\n            };\n\n            const blockChat = () => {\n                showDialog.value = true;\n            };\n            const doBlockChat = () => {\n                showDialog.value = false;\n                sendBlockChat(chat.value.chatId);\n                router.push({ name: 'chat' });\n            };\n\n            const reads = computed(() => {\n                const preReads = {};\n                each(chat.value.read, (val: string, key: string) => {\n                    if (key === user.id) {\n                        return;\n                    }\n                    preReads[val] = preReads[val] ? [key, ...preReads[val]] : [key];\n                });\n                return preReads;\n            });\n\n            const viewAnchor = ref(null);\n\n            const { isIntersecting } = useIntersectionObserver(viewAnchor);\n\n            const scrollToBottom = (force = false) => {\n                if (!force && !isIntersecting.value) {\n                    return;\n                }\n\n                nextTick(() => {\n                    scrollMessageBoxToBottom();\n                });\n            };\n\n            onMounted(() => {\n                nextTick(() => {\n                    scrollToBottom(true);\n                });\n            });\n\n            const status = computed(() => {\n                return statusList[selectedId.value];\n            });\n\n            const { scrollEvents } = useScrollState();\n            const { clearScrollEvents } = useScrollActions();\n\n            watch(scrollEvents, () => {\n                const forced = scrollEvents.find(x => x);\n                nextTick(() => {\n                    scrollToBottom(forced);\n                    clearScrollEvents();\n                });\n            });\n\n            return {\n                chats,\n                selectedId,\n                chat,\n                getMessagesSortedByUser,\n                truncate,\n                message,\n                file,\n                m,\n                scrollToBottom,\n                status,\n                statusList,\n                popupMeeting,\n                deleteChat,\n                doDeleteChat,\n                blockChat,\n                doBlockChat,\n                viewAnchor,\n                reads,\n                showDialog,\n                showDeleteDialog,\n                showMenu,\n                showSideBar: getShowSideBar(),\n                toggleSideBar,\n                getChatStatus,\n                moment,\n                ...propRefs,\n            };\n        },\n    });\n</script>\n\n<style scoped type=\"text/css\">\n    @tailwind base;\n    @tailwind components;\n    @tailwind utilities;\n\n    @layer utilities {\n        @variants responsive {\n            .singleGrid {\n                grid-template-columns: 400px 1fr 400px;\n            }\n\n            .twoGrid {\n                grid-template-columns: 400px 1fr;\n            }\n        }\n    }\n\n    .replymsg {\n        max-width: 750px;\n        word-break: break-word;\n    }\n\n    @media (min-width: 768px) {\n        .md\\:w-400p {\n            width: 400px;\n        }\n    }\n</style>\n","export const popupCenter = (\n    url: string,\n    title: string,\n    w: number,\n    h: number\n) => {\n    const dualScreenLeft =\n        window.screenLeft !== undefined ? window.screenLeft : window.screenX;\n    const dualScreenTop =\n        window.screenTop !== undefined ? window.screenTop : window.screenY;\n    const width = window.innerWidth\n        ? window.innerWidth\n        : document.documentElement.clientWidth\n        ? document.documentElement.clientWidth\n        : screen.width;\n    const height = window.innerHeight\n        ? window.innerHeight\n        : document.documentElement.clientHeight\n        ? document.documentElement.clientHeight\n        : screen.height;\n    const systemZoom = width / window.screen.availWidth;\n    const left = (width - w) / 2 / systemZoom + dualScreenLeft;\n    const top = (height - h) / 2 / systemZoom + dualScreenTop;\n    const newWindow = window.open(\n        url,\n        title,\n        `\n      scrollbars=yes,\n      width=${w / systemZoom},\n      height=${h / systemZoom},\n      top=${top},\n      left=${left}\n      `\n    );\n    if (newWindow) newWindow.focus();\n    return newWindow;\n};\n","<template>\n    <div\n        class=\"messageCard flex flex-row\"\n        :class=\"{\n            'mb-2': isLastMessage,\n            'my-message': isMine,\n        }\"\n        v-if=\"message.type !== MessageTypes.SYSTEM\"\n        @click=\"selectedMessageId = message.id\"\n    >\n        <AvatarImg\n            small\n            class=\"mr-2 \"\n            :class=\"{\n                'opacity-0': !isLastMessage,\n            }\"\n            :id=\"message.from\"\n            :showOnlineStatus=\"false\"\n        />\n        <div class=\"flex-1\">\n            <div class=\"flex flex-row flex-wrap\">\n                <div\n                    class=\"flex flex-col rounded-md rounded-r-xl mb-1 bg-white shadow relative overflow-hidden my-message:bg-my\"\n                    :class=\"{\n                        'rounded-tl-xl': isFirstMessage,\n                        'rounded-bl-xl': isLastMessage,\n                    }\"\n                >\n                    <header class=\"p-4 pb-0 font-bold my-message:text-icon \" v-if=\"isFirstMessage && isGroup\">\n                        {{ message.from }}\n                    </header>\n                    <main class=\"msgcard flex justify-between\">\n                        <MessageContent :message=\"message\" :key=\"message.type\"></MessageContent>\n                    </main>\n                    <div class=\"h-9 flex items-center absolute right-1.5 -bottom-3 hidden my-message:block\">\n                        <i class=\"fas fa-check-double text-accent\" v-if=\"isread\"></i>\n                        <i class=\"fas fa-check text-gray-400\" v-else></i>\n                    </div>\n                </div>\n\n                <div\n                    style=\"margin-top: auto;\"\n                    class=\"actions pb-4 pl-4 md:hidden\"\n                    :class=\"{ flex: selectedMessageId === message.id, hidden: selectedMessageId !== message.id }\"\n                >\n                    <span\n                        class=\"reply text-xs pr-4 cursor-pointer hover:underline hidden my-message:inline\"\n                        @click=\"editMessage(message)\"\n                        v-if=\"message.type === MessageTypes.STRING || message.type === MessageTypes.QUOTE\"\n                    >\n                        <i class=\"fa fa-pen\"></i>\n                        <span class=\"text-gray-600 pl-2\">Edit</span>\n                    </span>\n                    <span class=\"reply text-xs pr-4 cursor-pointer hover:underline\" @click=\"replyMessage(message)\">\n                        <i class=\"fa fa-reply\"></i>\n                        <span class=\"text-gray-600 pl-2\"> Reply</span>\n                    </span>\n                    <span\n                        class=\"delete text-xs pr-4 cursor-pointer hover:underline hidden my-message:inline\"\n                        @click=\"deleteMessage(message)\"\n                        v-if=\"message.type !== 'DELETE'\"\n                    >\n                        <i class=\"fa fa-trash\"></i>\n                        <span class=\"text-gray-600 pl-2\">Delete</span>\n                    </span>\n                    <div class=\"pr-4 text-gray-600 date inline-block text-xs\">\n                        <!--<span v-if=\"message.updated\" class=\"mr-4\">edited</span>-->\n                        <Time :time=\"new Date(message.timeStamp)\" />\n                        <!-- {{ message }} -->\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"flex flex-col mb-4 ml-4 border-l-2 pl-2\" v-if=\"message.replies?.length > 0\">\n                <div class=\"text-gray-400 self-start\">\n                    Replies:\n                </div>\n                <div v-for=\"reply in message.replies\" :key=\"reply.id\" class=\"card flex mb-1\">\n                    <AvatarImg class=\"mr-2\" small :id=\"reply.from\" :showOnlineStatus=\"false\" />\n\n                    <div\n                        class=\"flex rounded-xl overflow-hidden\"\n                        :class=\"{\n                            'bg-white': reply.from !== user.id,\n                            'bg-my': reply.from === user.id,\n                        }\"\n                    >\n                        <main class=\"replymsg flex justify-between\">\n                            <MessageContent :message=\"reply\"></MessageContent>\n                        </main>\n                    </div>\n\n                    <div style=\"margin-top: auto;\" class=\"actions pb-4 pl-4 flex\">\n                        <span\n                            class=\"reply text-xs pr-4 cursor-pointer hover:underline\"\n                            @click=\"deleteReply(message, reply)\"\n                            v-if=\"reply.from === user?.id && reply.body !== 'Message has been deleted'\"\n                        >\n                            <i class=\"fa fa-trash\"></i>\n                            <span class=\"text-gray-600 pl-2\">Delete</span>\n                        </span>\n                        <div class=\"pr-4 text-gray-600 date inline-block text-xs\">\n                            <Time :time=\"new Date(message.timeStamp)\" />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div v-else>\n        <MessageContent :message=\"message\"></MessageContent>\n    </div>\n</template>\n\n<script lang=\"ts\">\n    import { computed, defineComponent, nextTick, onMounted } from 'vue';\n    import moment from 'moment';\n    import AvatarImg from '@/components/AvatarImg.vue';\n    import MessageContent from '@/components/MessageContent.vue';\n    import { Message, MessageBodyType, QuoteBodyType, StringMessageType, MessageTypes } from '@/types';\n    import { uuidv4 } from '@/common';\n    import { useAuthState } from '@/store/authStore';\n    import {\n        clearMessageAction,\n        MessageAction,\n        sendMessageObject,\n        setMessageAction,\n        usechatsActions,\n        selectedMessageId,\n    } from '@/store/chatStore';\n    import { useScrollActions } from '@/store/scrollStore';\n    import { clock } from '@/services/clockService';\n    import Time from '@/components/Time.vue';\n\n    export default defineComponent({\n        name: 'MessageCard',\n        components: { Time, MessageContent, AvatarImg },\n        props: {\n            message: Object,\n            chatId: String,\n            isMine: Boolean,\n            isGroup: Boolean,\n            isreadbyme: Boolean,\n            isread: Boolean,\n            isFirstMessage: Boolean,\n            isLastMessage: Boolean,\n        },\n        setup(props) {\n            const { user } = useAuthState();\n\n            const toggleSendForwardMessage = () => {\n                console.log('toggleSendForwardMessage');\n            };\n\n            const replyMessage = message => {\n                clearMessageAction(props.chatId);\n                //nextTick is needed because vue throws dom errors if you switch between Reply and Edit\n                nextTick(() => {\n                    setMessageAction(props.chatId, message, MessageAction.REPLY);\n                });\n            };\n\n            const { addScrollEvent } = useScrollActions();\n\n            onMounted(() => {\n                addScrollEvent();\n            });\n\n            const read = () => {\n                const { readMessage } = usechatsActions();\n                readMessage(props.chatId, props.message.id);\n            };\n\n            if (!props.isreadbyme) {\n                read();\n            }\n\n            const deleteMessage = message => {\n                //@todo: show dialog\n                const updatedMessage: Message<StringMessageType> = {\n                    id: message.id,\n                    from: message.from,\n                    to: message.to,\n                    body: 'Message has been deleted',\n                    timeStamp: message.timeStamp,\n                    type: MessageTypes.DELETE,\n                    replies: [],\n                    subject: null,\n                };\n                sendMessageObject(props.chatId, updatedMessage);\n            };\n\n            const deleteReply = (message, reply) => {\n                //@todo: show dialog\n                const updatedMessage: Message<StringMessageType> = {\n                    id: reply.id,\n                    from: reply.from,\n                    to: reply.to,\n                    body: 'Message has been deleted',\n                    timeStamp: message.timeStamp,\n                    type: MessageTypes.DELETE,\n                    replies: [],\n                    subject: message.id,\n                };\n                sendMessageObject(props.chatId, updatedMessage);\n            };\n\n            const editMessage = message => {\n                clearMessageAction(props.chatId);\n                //nextTick is needed because vue throws dom errors if you switch between Reply and Edit\n                nextTick(() => {\n                    setMessageAction(props.chatId, message, MessageAction.EDIT);\n                });\n            };\n\n            return {\n                moment,\n                toggleSendForwardMessage,\n                replyMessage,\n                user,\n                deleteMessage,\n                deleteReply,\n                editMessage,\n                MessageTypes,\n                clock,\n                selectedMessageId,\n            };\n        },\n    });\n</script>\n<style lang=\"css\" scoped>\n    .text-message * {\n        word-wrap: break-word;\n        max-width: 100%;\n        white-space: pre-wrap;\n    }\n\n    .messageCard:hover .actions {\n        display: flex;\n    }\n\n    .msgcard,\n    .replymsg {\n        max-width: 500px;\n        word-break: break-word;\n    }\n</style>\n","<template>\n    <component\n        :is=\"contentComponent\"\n        :message=\"message\"\n        :preventRecursion=\"preventRecursion\"\n        :type=\"contentComponent\"\n    />\n</template>\n\n<script lang=\"ts\">\n    import { defineComponent } from 'vue';\n\n    import StringContent from '@/components/MessageContentType/StringContent.vue';\n    import SystemContent from '@/components/MessageContentType/SystemContent.vue';\n    import FileContent from '@/components/MessageContentType/FileContent.vue';\n    import AudioContent from '@/components/MessageContentType/AudioContent.vue';\n    import ImageContent from '@/components/MessageContentType/ImageContent.vue';\n    import GifContent from '@/components/MessageContentType/GifContent.vue';\n    import QuoteContent from '@/components/MessageContentType/QuoteContent.vue';\n    import { getComponentForType } from '@/services/contentService';\n\n    export default defineComponent({\n        name: 'MessageContent',\n        components: {\n            StringContent,\n            SystemContent,\n            FileContent,\n            AudioContent,\n            ImageContent,\n            GifContent,\n            QuoteContent,\n        },\n        props: {\n            message: {\n                type: Object,\n                required: true,\n            },\n            preventRecursion: {\n                type: Boolean,\n                default: false,\n            },\n        },\n        setup(props) {\n            return {\n                contentComponent: getComponentForType(props.message),\n            };\n        },\n    });\n</script>\n","<template>\n    <span class=\" pt-2 pl-4 pb-2 pr-8 \" v-html=\"computedMessage\"></span>\n</template>\n\n<script lang=\"ts\">\n    // Disclaimer: This is not yet proven to be SAFE, this might contain XSS. Use with caution!\n    import { computed, defineComponent } from 'vue';\n\n    const regularExpression = /((http|https):\\/\\/([a-zA-Z0-9.\\/?=&\\[\\]:\\_\\-\\;\\%]+))/g;\n\n    export default defineComponent({\n        name: 'StringContent',\n        props: {\n            message: { type: Object, required: true },\n        },\n        setup(props) {\n            const escapeHtml = (unsafeHtml: string) => {\n                return unsafeHtml\n                    .replace(/&/g, '&amp;')\n                    .replace(/</g, '&lt;')\n                    .replace(/>/g, '&gt;')\n                    .replace(/\"/g, '&quot;')\n                    .replace(/'/g, '&#039;');\n            };\n\n            const computedMessage = computed(() => {\n                let escapedHtml = escapeHtml(`${props.message.body}`);\n                const matches = escapedHtml.match(regularExpression);\n\n                if (matches === null) {\n                    return escapedHtml;\n                }\n\n                escapedHtml = escapedHtml.replace(\n                    regularExpression,\n                    `<a class='hover:underline' href='$1' target='_BLANK'>$1</a>`\n                );\n\n                return escapedHtml;\n            });\n\n            return { computedMessage };\n        },\n    });\n</script>\n\n<style></style>\n","\n    // Disclaimer: This is not yet proven to be SAFE, this might contain XSS. Use with caution!\n    import { computed, defineComponent } from 'vue';\n\n    const regularExpression = /((http|https):\\/\\/([a-zA-Z0-9.\\/?=&\\[\\]:\\_\\-\\;\\%]+))/g;\n\n    export default defineComponent({\n        name: 'StringContent',\n        props: {\n            message: { type: Object, required: true },\n        },\n        setup(props) {\n            const escapeHtml = (unsafeHtml: string) => {\n                return unsafeHtml\n                    .replace(/&/g, '&amp;')\n                    .replace(/</g, '&lt;')\n                    .replace(/>/g, '&gt;')\n                    .replace(/\"/g, '&quot;')\n                    .replace(/'/g, '&#039;');\n            };\n\n            const computedMessage = computed(() => {\n                let escapedHtml = escapeHtml(`${props.message.body}`);\n                const matches = escapedHtml.match(regularExpression);\n\n                if (matches === null) {\n                    return escapedHtml;\n                }\n\n                escapedHtml = escapedHtml.replace(\n                    regularExpression,\n                    `<a class='hover:underline' href='$1' target='_BLANK'>$1</a>`\n                );\n\n                return escapedHtml;\n            });\n\n            return { computedMessage };\n        },\n    });\n","import { render } from \"./StringContent.vue?vue&type=template&id=82d9de00\"\nimport script from \"./StringContent.vue?vue&type=script&lang=ts\"\nexport * from \"./StringContent.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\n    <div\n        v-if=\"message.body.type === 'JOINED_VIDEOROOM'\"\n        class=\"cursor-pointer flex justify-center items-center mb-4\"\n        @click=\"joinVideo\"\n    >\n        <div>\n            <i class=\"fas fa-video mr-3\"></i>\n\n            <i class=\"underline\">{{ message.body.message }}</i>\n        </div>\n        <button class=\"text-xs text bg-accent text-white px-4 py-2 m-0 rounded-full ml-6\">\n            <i class=\"fas fa-video mr-3\"></i>\n            JOIN\n        </button>\n    </div>\n    <div v-else class=\"justify-around flex self-center mb-4\">\n        <u\n            ><i>{{ message.body.message }}</i></u\n        >\n    </div>\n</template>\n\n<script lang=\"ts\">\n    import { popupCenter } from '@/services/popupService';\n    import { usechatsActions, usechatsState } from '@/store/chatStore';\n    import { useRoute } from 'vue-router';\n    import { computed, defineComponent, ref } from 'vue';\n    import { useAuthState } from '@/store/authStore';\n    import { MessageTypes, SystemMessageTypes } from '@/types';\n    import * as crypto from 'crypto-js';\n\n    export default defineComponent({\n        name: 'SystemContent',\n        props: {\n            message: { type: Object, required: true },\n        },\n        setup(props) {\n            const route = useRoute();\n            let selectedId = ref(<string>route.params.id);\n            const { chats } = usechatsState();\n            const { sendMessage } = usechatsActions();\n            const { user } = useAuthState();\n            const chat = computed(() => {\n                return chats.value.find(c => c.chatId == selectedId.value);\n            });\n            const joinVideo = () => {\n                // @ts-ignore\n                const videoRoomId =\n                    <string>props.message.body.id ??\n                    crypto\n                        .SHA1(\n                            chat.value.isGroup\n                                ? <string>chat.value.chatId\n                                : chat.value.contacts\n                                      .map(c => c.id)\n                                      .sort()\n                                      .join('-')\n                        )\n                        .toString();\n\n                sendMessage(\n                    chat.value.chatId,\n                    {\n                        type: SystemMessageTypes.JOINED_VIDEOROOM,\n                        message: `${user.id} joined the video chat`,\n                        id: videoRoomId,\n                    },\n                    MessageTypes.SYSTEM\n                );\n\n                const videoRoomPopup = popupCenter(\n                    `/videoroom/${videoRoomId}`,\n                    'video room',\n                    800,\n                    550\n                );\n            };\n\n            return { joinVideo };\n        },\n    });\n</script>\n","\n    import { popupCenter } from '@/services/popupService';\n    import { usechatsActions, usechatsState } from '@/store/chatStore';\n    import { useRoute } from 'vue-router';\n    import { computed, defineComponent, ref } from 'vue';\n    import { useAuthState } from '@/store/authStore';\n    import { MessageTypes, SystemMessageTypes } from '@/types';\n    import * as crypto from 'crypto-js';\n\n    export default defineComponent({\n        name: 'SystemContent',\n        props: {\n            message: { type: Object, required: true },\n        },\n        setup(props) {\n            const route = useRoute();\n            let selectedId = ref(<string>route.params.id);\n            const { chats } = usechatsState();\n            const { sendMessage } = usechatsActions();\n            const { user } = useAuthState();\n            const chat = computed(() => {\n                return chats.value.find(c => c.chatId == selectedId.value);\n            });\n            const joinVideo = () => {\n                // @ts-ignore\n                const videoRoomId =\n                    <string>props.message.body.id ??\n                    crypto\n                        .SHA1(\n                            chat.value.isGroup\n                                ? <string>chat.value.chatId\n                                : chat.value.contacts\n                                      .map(c => c.id)\n                                      .sort()\n                                      .join('-')\n                        )\n                        .toString();\n\n                sendMessage(\n                    chat.value.chatId,\n                    {\n                        type: SystemMessageTypes.JOINED_VIDEOROOM,\n                        message: `${user.id} joined the video chat`,\n                        id: videoRoomId,\n                    },\n                    MessageTypes.SYSTEM\n                );\n\n                const videoRoomPopup = popupCenter(\n                    `/videoroom/${videoRoomId}`,\n                    'video room',\n                    800,\n                    550\n                );\n            };\n\n            return { joinVideo };\n        },\n    });\n","import { render } from \"./SystemContent.vue?vue&type=template&id=4d4b4136\"\nimport script from \"./SystemContent.vue?vue&type=script&lang=ts\"\nexport * from \"./SystemContent.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\n    <a class=\"p-4 pb-2 pr-8 bg-gray-200 my-message:bg-my\" :href=\"calcExternalResourceLink(message.body.url)\" download>\n        <div\n            class=\"icon bg-gray-600 rounded-full h-12 w-12 flex items-center justify-center text-white my-message:bg-icon\"\n        >\n            <i class=\"fas fa-file \"></i>\n        </div>\n        <div class=\"pt-2 my-message:text-icon\">\n            {{ message.body.filename }}\n        </div>\n    </a>\n</template>\n\n<script lang=\"ts\">\n    import { defineComponent } from 'vue';\n    import { calcExternalResourceLink } from '@/services/urlService';\n\n    export default defineComponent({\n        name: 'FileContent',\n        props: {\n            message: { type: Object, required: true },\n        },\n        setup(props) {\n            return {\n                calcExternalResourceLink,\n            };\n        },\n    });\n</script>\n","\n    import { defineComponent } from 'vue';\n    import { calcExternalResourceLink } from '@/services/urlService';\n\n    export default defineComponent({\n        name: 'FileContent',\n        props: {\n            message: { type: Object, required: true },\n        },\n        setup(props) {\n            return {\n                calcExternalResourceLink,\n            };\n        },\n    });\n","import { render } from \"./FileContent.vue?vue&type=template&id=19941c7f\"\nimport script from \"./FileContent.vue?vue&type=script&lang=ts\"\nexport * from \"./FileContent.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\n    <audio\n        controls\n        class=\"max-w-full\"\n        :src=\"calcExternalResourceLink(message.body.url)\"\n        @load=\"$emit('scroll')\"\n    ></audio>\n</template>\n\n<script lang=\"ts\">\n    import { computed, defineComponent } from 'vue';\n    import { calcExternalResourceLink } from '@/services/urlService';\n\n    export default defineComponent({\n        name: 'AudioContent',\n        props: {\n            message: { type: Object, required: true },\n        },\n        emits: ['scroll'],\n        setup(props) {\n            const url = computed(() => {\n                return;\n            });\n            return {\n                calcExternalResourceLink,\n            };\n        },\n    });\n</script>\n","\n    import { computed, defineComponent } from 'vue';\n    import { calcExternalResourceLink } from '@/services/urlService';\n\n    export default defineComponent({\n        name: 'AudioContent',\n        props: {\n            message: { type: Object, required: true },\n        },\n        emits: ['scroll'],\n        setup(props) {\n            const url = computed(() => {\n                return;\n            });\n            return {\n                calcExternalResourceLink,\n            };\n        },\n    });\n","import { render } from \"./AudioContent.vue?vue&type=template&id=3cea0d50\"\nimport script from \"./AudioContent.vue?vue&type=script&lang=ts\"\nexport * from \"./AudioContent.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\n    <img width=\"450\" :src=\"src\" @load=\"imageLoaded\" class=\"cursor-pointer\" @click='show' />\n</template>\n\n<script lang=\"ts\">\n    import { defineComponent } from 'vue';\n    import { calcExternalResourceLink } from '@/services/urlService';\n    import { useScrollActions } from '@/store/scrollStore';\n    import { setImageSrc } from '@/store/imageStore';\n\n    export default defineComponent({\n        name: 'ImageContent',\n        props: {\n            message: { type: Object, required: true },\n        },\n        setup(props) {\n            const { addScrollEvent } = useScrollActions();\n            const src = calcExternalResourceLink(props.message.body.url)\n            const imageLoaded = () => {\n                addScrollEvent();\n            };\n\n            const show = () => {\n                setImageSrc(src);\n            };\n\n            return { imageLoaded, show, src};\n        },\n    });\n</script>\n","import { ref, readonly} from 'vue';\n\nconst imageSrc = ref<string>();\n\nexport const getImageSrc = () => readonly(imageSrc);\nexport const clearImageSrc = () => {\n    setImageSrc(undefined);\n}\nexport const setImageSrc = (src: string) => {\n    imageSrc.value = src;\n}","\n    import { defineComponent } from 'vue';\n    import { calcExternalResourceLink } from '@/services/urlService';\n    import { useScrollActions } from '@/store/scrollStore';\n    import { setImageSrc } from '@/store/imageStore';\n\n    export default defineComponent({\n        name: 'ImageContent',\n        props: {\n            message: { type: Object, required: true },\n        },\n        setup(props) {\n            const { addScrollEvent } = useScrollActions();\n            const src = calcExternalResourceLink(props.message.body.url)\n            const imageLoaded = () => {\n                addScrollEvent();\n            };\n\n            const show = () => {\n                setImageSrc(src);\n            };\n\n            return { imageLoaded, show, src};\n        },\n    });\n","import { render } from \"./ImageContent.vue?vue&type=template&id=10ea5e9a\"\nimport script from \"./ImageContent.vue?vue&type=script&lang=ts\"\nexport * from \"./ImageContent.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\n    <div class=\"gif flex items-center justify-center\">\n        <img class=\"h-48 self-center block\" :src=\"message.body\" alt=\"\" />\n    </div>\n</template>\n\n<script lang=\"ts\">\n    import { defineComponent } from 'vue';\n\n    export default defineComponent({\n        name: 'GifContent',\n        props: {\n            message: { type: Object, required: true },\n        },\n        setup(props) {\n            return {};\n        },\n    });\n</script>\n","\n    import { defineComponent } from 'vue';\n\n    export default defineComponent({\n        name: 'GifContent',\n        props: {\n            message: { type: Object, required: true },\n        },\n        setup(props) {\n            return {};\n        },\n    });\n","import { render } from \"./GifContent.vue?vue&type=template&id=798c0ded\"\nimport script from \"./GifContent.vue?vue&type=script&lang=ts\"\nexport * from \"./GifContent.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\n    <div>\n        <div\n            class=\"quote\"\n            :class=\"{\n                'pt-2 px-4 ': !preventRecursion,\n            }\"\n        >\n            <div class=\"border-l-2 border-gray-400 my-message:border-icon \" v-if=\"!preventRecursion\">\n                <div class=\"pl-4 font-bold my-message:text-icon\" v-if=\"message.body.quotedMessage !== 'SYSTEM'\">\n                    {{ message.body.quotedMessage.from }}\n                </div>\n                <MessageContent :message=\"message.body.quotedMessage\" preventRecursion></MessageContent>\n            </div>\n        </div>\n\n        <div class=\"px-4 py-2 pr-8\">{{ message.body.message }}</div>\n    </div>\n</template>\n\n<script lang=\"ts\">\n    import { defineComponent } from 'vue';\n    import MessageContent from '../MessageContent.vue';\n\n    export default defineComponent({\n        name: 'QuoteContent',\n        components: { MessageContent },\n        props: {\n            message: { type: Object, required: true },\n            preventRecursion: {\n                type: Boolean,\n                default: false,\n                required: false,\n            },\n        },\n    });\n</script>\n","\n    import { defineComponent } from 'vue';\n    import MessageContent from '../MessageContent.vue';\n\n    export default defineComponent({\n        name: 'QuoteContent',\n        components: { MessageContent },\n        props: {\n            message: { type: Object, required: true },\n            preventRecursion: {\n                type: Boolean,\n                default: false,\n                required: false,\n            },\n        },\n    });\n","import { render } from \"./QuoteContent.vue?vue&type=template&id=4871b86c\"\nimport script from \"./QuoteContent.vue?vue&type=script&lang=ts\"\nexport * from \"./QuoteContent.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","import { MessageTypes } from '@/types';\n\nconst isImage = filename => {\n    return (\n        filename.indexOf('.gif') !== -1 ||\n        filename.indexOf('.png') !== -1 ||\n        filename.indexOf('.jpg') !== -1 ||\n        filename.indexOf('.jpeg') !== -1\n    );\n};\n\nconst isAudio = filename => {\n    return filename.indexOf('.mp3') !== -1 || filename.indexOf('.WebM') !== -1;\n};\n\nexport const getComponentForType = message => {\n    switch (message.type) {\n        case MessageTypes.STRING:\n            return 'StringContent';\n        case MessageTypes.GIF:\n            return 'GifContent';\n        case MessageTypes.QUOTE:\n            return 'QuoteContent';\n        case MessageTypes.SYSTEM:\n            return 'SystemContent';\n        case MessageTypes.FILE:\n            if (isImage(message.body.filename)) {\n                return 'ImageContent';\n            }\n            if (isAudio(message.body.filename)) {\n                return 'AudioContent';\n            }\n\n            return 'FileContent';\n        default:\n            return 'StringContent';\n    }\n};\n","\n    import { defineComponent } from 'vue';\n\n    import StringContent from '@/components/MessageContentType/StringContent.vue';\n    import SystemContent from '@/components/MessageContentType/SystemContent.vue';\n    import FileContent from '@/components/MessageContentType/FileContent.vue';\n    import AudioContent from '@/components/MessageContentType/AudioContent.vue';\n    import ImageContent from '@/components/MessageContentType/ImageContent.vue';\n    import GifContent from '@/components/MessageContentType/GifContent.vue';\n    import QuoteContent from '@/components/MessageContentType/QuoteContent.vue';\n    import { getComponentForType } from '@/services/contentService';\n\n    export default defineComponent({\n        name: 'MessageContent',\n        components: {\n            StringContent,\n            SystemContent,\n            FileContent,\n            AudioContent,\n            ImageContent,\n            GifContent,\n            QuoteContent,\n        },\n        props: {\n            message: {\n                type: Object,\n                required: true,\n            },\n            preventRecursion: {\n                type: Boolean,\n                default: false,\n            },\n        },\n        setup(props) {\n            return {\n                contentComponent: getComponentForType(props.message),\n            };\n        },\n    });\n","import { render } from \"./MessageContent.vue?vue&type=template&id=00265cb3\"\nimport script from \"./MessageContent.vue?vue&type=script&lang=ts\"\nexport * from \"./MessageContent.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","import { ref } from 'vue';\n\nexport const clock = ref(new Date().getTime());\nexport const minuteClock = ref(new Date().getTime());\nexport const hourClock = ref(new Date().getTime());\n\nexport enum ClockType {\n    SECONDS = 'SECONDS',\n    MINUTES = 'MINUTES',\n    HOURS = 'HOURS',\n}\n\nsetInterval(() => {\n    clock.value = new Date().getTime();\n}, 1000);\n\n\nsetInterval(() => {\n    minuteClock.value = new Date().getTime();\n}, 1000 * 40);\n\nsetInterval(() => {\n    hourClock.value = new Date().getTime();\n}, 1000 * 60 * 40);\n","<template>\n    <TimeContent\n        :time=\"time\"\n        :key=\"clockType === ClockType.HOURS ? hourClock : clockType === ClockType.MINUTES ? minuteClock : clock\"\n    />\n</template>\n\n<script lang=\"ts\">\n    import { defineComponent } from 'vue';\n    import { clock, minuteClock, hourClock, ClockType } from '@/services/clockService';\n    import TimeContent from '@/components/TimeContent.vue';\n\n    export default defineComponent({\n        name: 'Time',\n        components: { TimeContent },\n        props: {\n            time: { type: Date },\n        },\n        setup(props) {\n            const now = new Date();\n            const diff = now.getTime() - props.time.getTime();\n            let clockType = ClockType.HOURS;\n            if (diff < 1000 * 60 * 5) clockType = ClockType.SECONDS;\n            else if (diff < 1000 * 60 * 40) clockType = ClockType.MINUTES;\n\n            return {\n                clock,\n                clockType,\n                ClockType,\n                hourClock,\n                minuteClock,\n            };\n        },\n    });\n</script>\n\n<style scoped></style>\n","<template>\n    {{ timeString }}\n</template>\n\n<script lang=\"ts\">\n    import { defineComponent, computed } from 'vue';\n    import moment from 'moment';\n\n    export default defineComponent({\n        name: 'TimeContent',\n        props: {\n            time: { type: Date },\n        },\n        setup(props) {\n            const timeString = computed(() => {\n                return moment(props.time).fromNow();\n            });\n\n            return {\n                timeString\n            };\n        },\n    });\n</script>\n\n<style scoped></style>","\n    import { defineComponent, computed } from 'vue';\n    import moment from 'moment';\n\n    export default defineComponent({\n        name: 'TimeContent',\n        props: {\n            time: { type: Date },\n        },\n        setup(props) {\n            const timeString = computed(() => {\n                return moment(props.time).fromNow();\n            });\n\n            return {\n                timeString\n            };\n        },\n    });\n","import { render } from \"./TimeContent.vue?vue&type=template&id=6876e05d\"\nimport script from \"./TimeContent.vue?vue&type=script&lang=ts\"\nexport * from \"./TimeContent.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","\n    import { defineComponent } from 'vue';\n    import { clock, minuteClock, hourClock, ClockType } from '@/services/clockService';\n    import TimeContent from '@/components/TimeContent.vue';\n\n    export default defineComponent({\n        name: 'Time',\n        components: { TimeContent },\n        props: {\n            time: { type: Date },\n        },\n        setup(props) {\n            const now = new Date();\n            const diff = now.getTime() - props.time.getTime();\n            let clockType = ClockType.HOURS;\n            if (diff < 1000 * 60 * 5) clockType = ClockType.SECONDS;\n            else if (diff < 1000 * 60 * 40) clockType = ClockType.MINUTES;\n\n            return {\n                clock,\n                clockType,\n                ClockType,\n                hourClock,\n                minuteClock,\n            };\n        },\n    });\n","import { render } from \"./Time.vue?vue&type=template&id=7c4a8298\"\nimport script from \"./Time.vue?vue&type=script&lang=ts\"\nexport * from \"./Time.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","\n    import { computed, defineComponent, nextTick, onMounted } from 'vue';\n    import moment from 'moment';\n    import AvatarImg from '@/components/AvatarImg.vue';\n    import MessageContent from '@/components/MessageContent.vue';\n    import { Message, MessageBodyType, QuoteBodyType, StringMessageType, MessageTypes } from '@/types';\n    import { uuidv4 } from '@/common';\n    import { useAuthState } from '@/store/authStore';\n    import {\n        clearMessageAction,\n        MessageAction,\n        sendMessageObject,\n        setMessageAction,\n        usechatsActions,\n        selectedMessageId,\n    } from '@/store/chatStore';\n    import { useScrollActions } from '@/store/scrollStore';\n    import { clock } from '@/services/clockService';\n    import Time from '@/components/Time.vue';\n\n    export default defineComponent({\n        name: 'MessageCard',\n        components: { Time, MessageContent, AvatarImg },\n        props: {\n            message: Object,\n            chatId: String,\n            isMine: Boolean,\n            isGroup: Boolean,\n            isreadbyme: Boolean,\n            isread: Boolean,\n            isFirstMessage: Boolean,\n            isLastMessage: Boolean,\n        },\n        setup(props) {\n            const { user } = useAuthState();\n\n            const toggleSendForwardMessage = () => {\n                console.log('toggleSendForwardMessage');\n            };\n\n            const replyMessage = message => {\n                clearMessageAction(props.chatId);\n                //nextTick is needed because vue throws dom errors if you switch between Reply and Edit\n                nextTick(() => {\n                    setMessageAction(props.chatId, message, MessageAction.REPLY);\n                });\n            };\n\n            const { addScrollEvent } = useScrollActions();\n\n            onMounted(() => {\n                addScrollEvent();\n            });\n\n            const read = () => {\n                const { readMessage } = usechatsActions();\n                readMessage(props.chatId, props.message.id);\n            };\n\n            if (!props.isreadbyme) {\n                read();\n            }\n\n            const deleteMessage = message => {\n                //@todo: show dialog\n                const updatedMessage: Message<StringMessageType> = {\n                    id: message.id,\n                    from: message.from,\n                    to: message.to,\n                    body: 'Message has been deleted',\n                    timeStamp: message.timeStamp,\n                    type: MessageTypes.DELETE,\n                    replies: [],\n                    subject: null,\n                };\n                sendMessageObject(props.chatId, updatedMessage);\n            };\n\n            const deleteReply = (message, reply) => {\n                //@todo: show dialog\n                const updatedMessage: Message<StringMessageType> = {\n                    id: reply.id,\n                    from: reply.from,\n                    to: reply.to,\n                    body: 'Message has been deleted',\n                    timeStamp: message.timeStamp,\n                    type: MessageTypes.DELETE,\n                    replies: [],\n                    subject: message.id,\n                };\n                sendMessageObject(props.chatId, updatedMessage);\n            };\n\n            const editMessage = message => {\n                clearMessageAction(props.chatId);\n                //nextTick is needed because vue throws dom errors if you switch between Reply and Edit\n                nextTick(() => {\n                    setMessageAction(props.chatId, message, MessageAction.EDIT);\n                });\n            };\n\n            return {\n                moment,\n                toggleSendForwardMessage,\n                replyMessage,\n                user,\n                deleteMessage,\n                deleteReply,\n                editMessage,\n                MessageTypes,\n                clock,\n                selectedMessageId,\n            };\n        },\n    });\n","import { render } from \"./MessageCard.vue?vue&type=template&id=dc6e5024&scoped=true\"\nimport script from \"./MessageCard.vue?vue&type=script&lang=ts\"\nexport * from \"./MessageCard.vue?vue&type=script&lang=ts\"\n\nimport \"./MessageCard.vue?vue&type=style&index=0&id=dc6e5024&lang=css&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-dc6e5024\"\n\nexport default script","<template>\n    <GifSelector v-if=\"showGif\" v-on:sendgif=\"sendGif\" style=\"z-index: 10000\" v-on:close=\"hideGif\" />\n    <div v-if=\"action\" class=\"flex justify-between m-2 p-4 bg-white rounded-xl\">\n        <div class=\"flex flex-row\">\n            <div class=\"text-accent mr-4 self-center\">\n                <i class=\"fa fa-reply fa-2x\" v-if=\"action?.type === MessageAction.REPLY\"></i>\n                <i class=\"fa fa-pen fa-2x\" v-else-if=\"action?.type === MessageAction.EDIT\"></i>\n            </div>\n            <div class=\"replymsg\">\n                <b>{{ action.message.from }}</b>\n                <p>{{ getActionMessage }}</p>\n            </div>\n        </div>\n\n        <button @click=\"clearAction\">\n            <i class=\"fas fa-times\"></i>\n        </button>\n    </div>\n    <div class=\"md:p-2 md:m-2 md:rounded-3xl bg-white flex flex-col actions md:flex-row\" @paste=\"onPaste\">\n        <div class=\"md:col-span-4 flex flex-nowrap md:bg-transparent bg-gray-200\" :class=\"{ hidden: !collapsed }\">\n            <button class=\"action-btn mx-2 my-0 p-0 self-center flex-1 pt-0.5\" @click=\"toggleGif\">\n                <h2>GIF</h2>\n            </button>\n            <button class=\"action-btn mx-2 my-0 p-0 self-center flex-1\" @click.stop=\"selectFile\">\n                <i class=\"fas fa-paperclip  transform\" style=\"--tw-rotate: -225deg\"></i>\n            </button>\n            <input class=\"hidden\" type=\"file\" id=\"fileinput\" ref=\"fileinput\" @change=\"changeFile\" />\n            <button\n                class=\"action-btn mx-2 my-0 p-0 self-center flex-1\"\n                @click.stop=\"startRecording\"\n                v-if=\"!stopRecording\"\n            >\n                <i class=\"fas fa-microphone \"></i>\n            </button>\n            <button class=\"action-btn mx-2 my-0 p-0 self-center flex-1\" @click.stop=\"stopRecording\" v-else>\n                <i class=\"fas fa-circle text-red-600\"></i>\n            </button>\n\n            <span\n                ref=\"emojipicker\"\n                :class=\"{ hidden: !showEmoji }\"\n                style=\"position: absolute; bottom: 75px; z-index: 10000\"\n            >\n                <unicode-emoji-picker v-pre></unicode-emoji-picker>\n            </span>\n\n            <button class=\"action-btn mx-2 my-0 p-0 self-center flex-1\" @click.stop=\"toggleEmoji\" v-if=\"!file\">\n                😃\n            </button>\n        </div>\n        <div class=\"flex flex-row flex-1\">\n            <button\n                class=\"action-btn mx-2 my-0 p-0 self-center md:hidden\"\n                @click=\"collapsed = !collapsed\"\n                :key=\"collapsed.toString()\"\n            >\n                <i v-if=\"collapsed\" class=\"fas fa-chevron-down \"></i>\n                <i v-else class=\"fas fa-chevron-up \"></i>\n            </button>\n            <div class=\"bg-indigo-100 inline-flex text-sm rounded flex-row h-8 pl-3 self-center mr-2\" v-if=\"file\">\n                <div class=\"self-center\">\n                    <i class=\"fas fa-file\"></i>\n                </div>\n                <span class=\"ml-2 mr-1 leading-relaxed truncate max-w- self-center hidden md:inline-block\">\n                    {{ file.name }}\n                </span>\n                <button class=\"action-btn p-2 mx-0 self-center\" @click.stop=\"removeFile\">\n                    <i class=\"fas  fa-times\"></i>\n                </button>\n            </div>\n            <form class=\"w-full\" @submit.prevent=\"chatsend\">\n                <input type=\"text\" ref=\"message\" v-focus />\n            </form>\n            <button class=\"action-btn mx-2 my-0 p-0 self-center\" @click=\"chatsend\">\n                <i class=\"fas fa-paper-plane\"></i>\n            </button>\n        </div>\n    </div>\n    <div\n        class=\"overlay-emoji\"\n        :class=\"{ hidden: !showEmoji }\"\n        @click=\"hideEmoji\"\n        style=\"\n            position: fixed;\n            width: 100vw;\n            height: 100vh;\n            background: transparent;\n            top: 0;\n            left: 0;\n            z-index: 9999;\n        \"\n    ></div>\n    <div\n        class=\"overlay-gif\"\n        :class=\"{ hidden: !showGif }\"\n        @click=\"hideGif\"\n        style=\"\n            position: fixed;\n            width: 100vw;\n            height: 100vh;\n            background: transparent;\n            top: 0;\n            left: 0;\n            z-index: 9999;\n        \"\n    ></div>\n</template>\n<script lang=\"ts\">\n    import { computed, nextTick, ref, watch } from 'vue';\n    import { clearMessageAction, MessageAction, messageState, usechatsActions } from '@/store/chatStore';\n    import GifSelector from '@/components/GifSelector.vue';\n    import { useAuthState } from '@/store/authStore';\n    import { Message, MessageBodyType, MessageTypes, QuoteBodyType } from '@/types';\n    import { uuidv4 } from '@/common';\n    import { useScrollActions } from '@/store/scrollStore';\n    import { EmojiPickerElement } from 'unicode-emoji-picker';\n\n    export default {\n        name: 'ChatInput',\n        components: {\n            GifSelector,\n        },\n        emits: ['messageSend'],\n        props: {\n            selectedid: { type: String },\n        },\n        setup(props, { emit }) {\n            // Not actually a vue component but CustomElement ShadowRoot. I know vue doesnt really like it and gives a warning.\n            new EmojiPickerElement();\n\n            const { sendMessage, sendFile } = usechatsActions();\n\n            const message = ref(null);\n            const messageBox = ref(null);\n            const fileinput = ref();\n            const file = ref(null);\n            const emojipicker = ref();\n\n            const stopRecording = ref(null);\n            const showEmoji = ref(false);\n\n            const { addScrollEvent } = useScrollActions();\n\n            const action = computed(() => {\n                if (!props.selectedid) {\n                    return;\n                }\n                return messageState?.actions[props.selectedid];\n            });\n\n            const clearAction = () => {\n                clearMessageAction(props.selectedid);\n            };\n\n            watch(action, () => {\n                if (action.value && message.value) {\n                    console.log('Selecting chat ...');\n                    message.value.focus();\n                }\n            });\n\n            const createEditBody = action => {\n                let newBody = action.message.body;\n                //space for later types\n                switch (action.message.type) {\n                    case MessageTypes.QUOTE:\n                        newBody.message = message.value.value;\n                        break;\n\n                    default:\n                        newBody = message.value.value;\n                        break;\n                }\n                return newBody;\n            };\n\n            const createMessage = () => {\n                const { user } = useAuthState();\n\n                switch (action?.value?.type) {\n                    case MessageAction.REPLY: {\n                        return {\n                            id: uuidv4(),\n                            from: user.id,\n                            to: <string>props.selectedid,\n                            body: <QuoteBodyType>{\n                                message: message.value.value,\n                                quotedMessage: action.value.message as Message<MessageBodyType>,\n                            },\n                            timeStamp: new Date(),\n                            type: MessageTypes.QUOTE,\n                            replies: [],\n                            subject: null,\n                        };\n                    }\n\n                    case MessageAction.EDIT: {\n                        const newBody = createEditBody(action.value);\n\n                        const editMessage = {\n                            id: <string>action.value.message.id,\n                            from: user.id,\n                            to: <string>props.selectedid,\n                            body: newBody,\n                            timeStamp: action.value.message.timeStamp,\n                            type: action.value.message.type,\n                            replies: action.value.message.replies,\n                            subject: null,\n                            updated: new Date(),\n                        };\n                        const editWrapperMessage = {\n                            id: uuidv4(),\n                            from: user.id,\n                            to: <string>props.selectedid,\n                            body: editMessage,\n                            timeStamp: new Date(),\n                            type: MessageTypes.EDIT,\n                            replies: [],\n                            subject: null,\n                        };\n\n                        console.log(editWrapperMessage);\n\n                        return editWrapperMessage;\n                    }\n                }\n\n                return {\n                    id: uuidv4(),\n                    from: user.id,\n                    to: <string>props.selectedid,\n                    body: message.value.value,\n                    timeStamp: new Date(),\n                    type: 'STRING',\n                    replies: [],\n                    subject: null,\n                };\n            };\n\n            const clearMessage = () => {\n                message.value.value = '';\n            };\n\n            const chatsend = async e => {\n                const { sendMessageObject } = usechatsActions();\n                console.log('mes', message.value.value);\n\n                if (action.value) {\n                    console.log('action', action.value);\n                    const newMessage = createMessage();\n                    sendMessageObject(props.selectedid, newMessage);\n                    clearAction();\n                    clearMessage();\n                    addScrollEvent();\n                    return;\n                }\n\n                if (message.value.value != '') {\n                    sendMessage(props.selectedid, message.value.value);\n                    clearMessage();\n                }\n\n                if (file.value) {\n                    sendFile(props.selectedid, file.value);\n                    removeFile();\n                }\n                emit('messageSend');\n\n                showEmoji.value = false;\n            };\n\n            const selectFile = () => {\n                fileinput.value.click();\n            };\n\n            const changeFile = () => {\n                file.value = fileinput.value?.files[0];\n                message.value.focus();\n            };\n\n            const removeFile = () => {\n                file.value = null;\n            };\n\n            const startRecording = async () => {\n                const stream = await navigator.mediaDevices.getUserMedia({\n                    audio: true,\n                });\n\n                const mediaRecorder = new MediaRecorder(stream);\n                const audioChunks = [];\n\n                mediaRecorder.addEventListener('dataavailable', event => {\n                    audioChunks.push(event.data);\n                });\n\n                mediaRecorder.start();\n\n                stopRecording.value = () => {\n                    mediaRecorder.addEventListener('stop', async () => {\n                        const audioBlob = new Blob(audioChunks);\n                        console.log(props.selectedid);\n                        console.log(audioBlob);\n                        sendFile(props.selectedid, audioBlob, true);\n                        stopRecording.value = null;\n                    });\n\n                    mediaRecorder.stop();\n                    stream.getAudioTracks().forEach(at => at.stop());\n                };\n            };\n            const toggleEmoji = () => {\n                showEmoji.value = !showEmoji.value;\n            };\n            const hideEmoji = () => {\n                if (!showEmoji) {\n                    return;\n                }\n                showEmoji.value = false;\n            };\n\n            const showGif = ref(false);\n            const toggleGif = () => {\n                showGif.value = !showGif.value;\n            };\n            const sendGif = async gif => {\n                showGif.value = false;\n                const { sendMessage } = usechatsActions();\n                sendMessage(props.selectedid, gif, 'GIF');\n                emit('messageSend');\n                addScrollEvent();\n            };\n            const hideGif = async gif => {\n                showGif.value = false;\n            };\n\n            nextTick(() => {\n                const emojiPicker = document.querySelector('unicode-emoji-picker');\n                emojiPicker.addEventListener('emoji-pick', event => {\n                    message.value.value = `${message.value.value}${event.detail.emoji}`;\n                    message.value.focus();\n                });\n            });\n\n            const onPaste = (e: ClipboardEvent) => {\n                if (!e.clipboardData) {\n                    return;\n                }\n\n                var items = e.clipboardData.items;\n\n                if (!items) {\n                    return;\n                }\n\n                for (var i = 0; i < items.length; i++) {\n                    if (items[i].type.indexOf('image') == -1) {\n                        continue;\n                    }\n\n                    var pastedImage: File = items[i].getAsFile();\n                    file.value = pastedImage;\n                    message.value.focus();\n                }\n            };\n\n            const getActionMessage = computed(() => {\n                if (action.value.message.type === MessageTypes.QUOTE)\n                    return (action.value.message.body as QuoteBodyType).message;\n\n                return action.value.message.body;\n            });\n\n            const collapsed = ref(true);\n            return {\n                sendMessage,\n                message,\n                chatsend,\n                changeFile,\n                selectFile,\n                fileinput,\n                file,\n                removeFile,\n                startRecording,\n                stopRecording,\n                showEmoji,\n                toggleEmoji,\n                hideEmoji,\n                emojipicker,\n                showGif,\n                toggleGif,\n                sendGif,\n                hideGif,\n                collapsed,\n                onPaste,\n                action,\n                clearAction,\n                getActionMessage,\n                MessageAction,\n                MessageTypes,\n            };\n        },\n    };\n</script>\n\n<style scoped>\n    .action-btn:hover {\n        color: rgb(68, 166, 135);\n    }\n\n    .action-btn {\n    }\n\n    .actions {\n        min-height: 3em;\n    }\n</style>\n","<template>\n    <div\n        class=\"relative md:mx-4 px-4 bg-white rounded-t-xl\"\n        style=\"height: 220px; overflow-y: scroll\"\n    >\n        <div class=\"sticky top-0 bg-white flex py-4\">\n            <input\n                type=\"text\"\n                placeholder=\"Search for gif...\"\n                v-model=\"searchTerm\"\n            />\n            <button @click=\"$emit('close')\">\n                <i class=\"fas fa-times\"></i>\n            </button>\n        </div>\n        <div class=\"grid grid-cols-3 place-items-center bg-black\">\n            <img\n                class=\"h-40 object-contain\"\n                v-for=\"gif in gifs\"\n                :src=\"gif\"\n                :key=\"gif\"\n                alt=\"\"\n                @click=\"$emit('sendgif', gif)\"\n            />\n        </div>\n        <span v-if=\"gifs.length === 0\">no Gifs found</span>\n    </div>\n</template>\n<script lang=\"ts\">\n    import { fetchGif } from '@/services/gifService';\n    import { ref, watch } from 'vue';\n\n    export default {\n        name: 'GifSelector',\n        emits: ['close'],\n        setup(props) {\n            const gifs = ref([]);\n            const searchTerm = ref('');\n\n            fetchGif().then(gs => {\n                gifs.value = gs.data.map(g => g.images.original.url);\n            });\n            watch(searchTerm, st => {\n                fetchGif(st).then(gs => {\n                    gifs.value = gs.data.map(g => g.images.original.url);\n                });\n            });\n\n            return { gifs, searchTerm };\n        },\n    };\n</script>\n","import { GiphyFetch } from '@giphy/js-fetch-api/dist';\nimport config from '../../public/config/config';\n\nconst gf = new GiphyFetch(config.giphyApiKey);\n\nexport const fetchGif = (search: string = null) => {\n    if (!search) {\n        return gf.trending({ limit: 10 });\n    }\n\n    return gf.search(search, { limit: 10 });\n};\n","\n    import { fetchGif } from '@/services/gifService';\n    import { ref, watch } from 'vue';\n\n    export default {\n        name: 'GifSelector',\n        emits: ['close'],\n        setup(props) {\n            const gifs = ref([]);\n            const searchTerm = ref('');\n\n            fetchGif().then(gs => {\n                gifs.value = gs.data.map(g => g.images.original.url);\n            });\n            watch(searchTerm, st => {\n                fetchGif(st).then(gs => {\n                    gifs.value = gs.data.map(g => g.images.original.url);\n                });\n            });\n\n            return { gifs, searchTerm };\n        },\n    };\n","import { render } from \"./GifSelector.vue?vue&type=template&id=3ee01990\"\nimport script from \"./GifSelector.vue?vue&type=script&lang=ts\"\nexport * from \"./GifSelector.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","\n    import { computed, nextTick, ref, watch } from 'vue';\n    import { clearMessageAction, MessageAction, messageState, usechatsActions } from '@/store/chatStore';\n    import GifSelector from '@/components/GifSelector.vue';\n    import { useAuthState } from '@/store/authStore';\n    import { Message, MessageBodyType, MessageTypes, QuoteBodyType } from '@/types';\n    import { uuidv4 } from '@/common';\n    import { useScrollActions } from '@/store/scrollStore';\n    import { EmojiPickerElement } from 'unicode-emoji-picker';\n\n    export default {\n        name: 'ChatInput',\n        components: {\n            GifSelector,\n        },\n        emits: ['messageSend'],\n        props: {\n            selectedid: { type: String },\n        },\n        setup(props, { emit }) {\n            // Not actually a vue component but CustomElement ShadowRoot. I know vue doesnt really like it and gives a warning.\n            new EmojiPickerElement();\n\n            const { sendMessage, sendFile } = usechatsActions();\n\n            const message = ref(null);\n            const messageBox = ref(null);\n            const fileinput = ref();\n            const file = ref(null);\n            const emojipicker = ref();\n\n            const stopRecording = ref(null);\n            const showEmoji = ref(false);\n\n            const { addScrollEvent } = useScrollActions();\n\n            const action = computed(() => {\n                if (!props.selectedid) {\n                    return;\n                }\n                return messageState?.actions[props.selectedid];\n            });\n\n            const clearAction = () => {\n                clearMessageAction(props.selectedid);\n            };\n\n            watch(action, () => {\n                if (action.value && message.value) {\n                    console.log('Selecting chat ...');\n                    message.value.focus();\n                }\n            });\n\n            const createEditBody = action => {\n                let newBody = action.message.body;\n                //space for later types\n                switch (action.message.type) {\n                    case MessageTypes.QUOTE:\n                        newBody.message = message.value.value;\n                        break;\n\n                    default:\n                        newBody = message.value.value;\n                        break;\n                }\n                return newBody;\n            };\n\n            const createMessage = () => {\n                const { user } = useAuthState();\n\n                switch (action?.value?.type) {\n                    case MessageAction.REPLY: {\n                        return {\n                            id: uuidv4(),\n                            from: user.id,\n                            to: <string>props.selectedid,\n                            body: <QuoteBodyType>{\n                                message: message.value.value,\n                                quotedMessage: action.value.message as Message<MessageBodyType>,\n                            },\n                            timeStamp: new Date(),\n                            type: MessageTypes.QUOTE,\n                            replies: [],\n                            subject: null,\n                        };\n                    }\n\n                    case MessageAction.EDIT: {\n                        const newBody = createEditBody(action.value);\n\n                        const editMessage = {\n                            id: <string>action.value.message.id,\n                            from: user.id,\n                            to: <string>props.selectedid,\n                            body: newBody,\n                            timeStamp: action.value.message.timeStamp,\n                            type: action.value.message.type,\n                            replies: action.value.message.replies,\n                            subject: null,\n                            updated: new Date(),\n                        };\n                        const editWrapperMessage = {\n                            id: uuidv4(),\n                            from: user.id,\n                            to: <string>props.selectedid,\n                            body: editMessage,\n                            timeStamp: new Date(),\n                            type: MessageTypes.EDIT,\n                            replies: [],\n                            subject: null,\n                        };\n\n                        console.log(editWrapperMessage);\n\n                        return editWrapperMessage;\n                    }\n                }\n\n                return {\n                    id: uuidv4(),\n                    from: user.id,\n                    to: <string>props.selectedid,\n                    body: message.value.value,\n                    timeStamp: new Date(),\n                    type: 'STRING',\n                    replies: [],\n                    subject: null,\n                };\n            };\n\n            const clearMessage = () => {\n                message.value.value = '';\n            };\n\n            const chatsend = async e => {\n                const { sendMessageObject } = usechatsActions();\n                console.log('mes', message.value.value);\n\n                if (action.value) {\n                    console.log('action', action.value);\n                    const newMessage = createMessage();\n                    sendMessageObject(props.selectedid, newMessage);\n                    clearAction();\n                    clearMessage();\n                    addScrollEvent();\n                    return;\n                }\n\n                if (message.value.value != '') {\n                    sendMessage(props.selectedid, message.value.value);\n                    clearMessage();\n                }\n\n                if (file.value) {\n                    sendFile(props.selectedid, file.value);\n                    removeFile();\n                }\n                emit('messageSend');\n\n                showEmoji.value = false;\n            };\n\n            const selectFile = () => {\n                fileinput.value.click();\n            };\n\n            const changeFile = () => {\n                file.value = fileinput.value?.files[0];\n                message.value.focus();\n            };\n\n            const removeFile = () => {\n                file.value = null;\n            };\n\n            const startRecording = async () => {\n                const stream = await navigator.mediaDevices.getUserMedia({\n                    audio: true,\n                });\n\n                const mediaRecorder = new MediaRecorder(stream);\n                const audioChunks = [];\n\n                mediaRecorder.addEventListener('dataavailable', event => {\n                    audioChunks.push(event.data);\n                });\n\n                mediaRecorder.start();\n\n                stopRecording.value = () => {\n                    mediaRecorder.addEventListener('stop', async () => {\n                        const audioBlob = new Blob(audioChunks);\n                        console.log(props.selectedid);\n                        console.log(audioBlob);\n                        sendFile(props.selectedid, audioBlob, true);\n                        stopRecording.value = null;\n                    });\n\n                    mediaRecorder.stop();\n                    stream.getAudioTracks().forEach(at => at.stop());\n                };\n            };\n            const toggleEmoji = () => {\n                showEmoji.value = !showEmoji.value;\n            };\n            const hideEmoji = () => {\n                if (!showEmoji) {\n                    return;\n                }\n                showEmoji.value = false;\n            };\n\n            const showGif = ref(false);\n            const toggleGif = () => {\n                showGif.value = !showGif.value;\n            };\n            const sendGif = async gif => {\n                showGif.value = false;\n                const { sendMessage } = usechatsActions();\n                sendMessage(props.selectedid, gif, 'GIF');\n                emit('messageSend');\n                addScrollEvent();\n            };\n            const hideGif = async gif => {\n                showGif.value = false;\n            };\n\n            nextTick(() => {\n                const emojiPicker = document.querySelector('unicode-emoji-picker');\n                emojiPicker.addEventListener('emoji-pick', event => {\n                    message.value.value = `${message.value.value}${event.detail.emoji}`;\n                    message.value.focus();\n                });\n            });\n\n            const onPaste = (e: ClipboardEvent) => {\n                if (!e.clipboardData) {\n                    return;\n                }\n\n                var items = e.clipboardData.items;\n\n                if (!items) {\n                    return;\n                }\n\n                for (var i = 0; i < items.length; i++) {\n                    if (items[i].type.indexOf('image') == -1) {\n                        continue;\n                    }\n\n                    var pastedImage: File = items[i].getAsFile();\n                    file.value = pastedImage;\n                    message.value.focus();\n                }\n            };\n\n            const getActionMessage = computed(() => {\n                if (action.value.message.type === MessageTypes.QUOTE)\n                    return (action.value.message.body as QuoteBodyType).message;\n\n                return action.value.message.body;\n            });\n\n            const collapsed = ref(true);\n            return {\n                sendMessage,\n                message,\n                chatsend,\n                changeFile,\n                selectFile,\n                fileinput,\n                file,\n                removeFile,\n                startRecording,\n                stopRecording,\n                showEmoji,\n                toggleEmoji,\n                hideEmoji,\n                emojipicker,\n                showGif,\n                toggleGif,\n                sendGif,\n                hideGif,\n                collapsed,\n                onPaste,\n                action,\n                clearAction,\n                getActionMessage,\n                MessageAction,\n                MessageTypes,\n            };\n        },\n    };\n","import { render } from \"./ChatInput.vue?vue&type=template&id=3080ccae&scoped=true\"\nimport script from \"./ChatInput.vue?vue&type=script&lang=ts\"\nexport * from \"./ChatInput.vue?vue&type=script&lang=ts\"\n\nimport \"./ChatInput.vue?vue&type=style&index=0&id=3080ccae&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-3080ccae\"\n\nexport default script","<template>\n    <div\n        class=\"bg-white p-2 w-full relative rounded-lg mb-4 mt-0 md:grid place-items-center grid-cols-1\"\n        v-if=\"groupChat.isGroup\"\n    >\n        <h2>Members</h2>\n        <div\n            v-for=\"contact in groupChat.contacts\"\n            :key=\"contact.id + groupChat.contacts.length\"\n            class=\"w-full\"\n        >\n            <div\n                class=\"chatcard relative grid grid-cols-12 rounded-lg mb-2 py-2\"\n            >\n                <div\n                    class=\"md:col-span-2 col-span-2 place-items-center grid relative\"\n                >\n                    <AvatarImg small :id=\"contact.id\" />\n                </div>\n                <div class=\"md:col-span-8 col-span-8 pl-2\">\n                    <p class=\"flex place-content-between\">\n                        <span\n                            class=\"font-bold overflow-hidden overflow-ellipsis\"\n                        >\n                            {{ contact.id }}\n                        </span>\n                    </p>\n                </div>\n                <div class=\"btns col-span-2\">\n                    <button v-if=\"iAmAdmin\" @click=\"removeFromGroup(contact)\">\n                        <i class=\"fas fa-times text-red-500\"></i>\n                    </button>\n                </div>\n            </div>\n        </div>\n\n        <div\n            class=\"flex flex-col max-h-52 relative overflow-auto my-2 bg-gray-100 px-4 py-2 rounded-xl\"\n            v-if=\"iAmAdmin\"\n        >\n            <h2 class=\"text-center\">Add new members</h2>\n            <div class=\"h-full\">\n                <div v-if=\"!contacts.length\">\n                    <p class=\"text-gray-300 text-center py-4\">\n                        Not able to add any contacts to this group\n                    </p>\n                </div>\n                <div\n                    v-for=\"(contact, i) in contacts\"\n                    :key=\"i\"\n                    class=\"grid grid-cols-12 rounded-lg mb-2 py-2\"\n                >\n                    <div class=\"col-span-2 place-items-center grid\">\n                        <AvatarImg small :id=\"contact.id\" />\n                    </div>\n                    <div\n                        class=\"col-span-8 pl-4 flex-col justify-center overflow-hidden overflow-ellipsis w-full\"\n                    >\n                        {{ contact.id }}\n                    </div>\n                    <div class=\"col-span-2 place-items-center grid\">\n                        <button\n                            class=\"h-12 rounded-full\"\n                            @click=\"addToGroup(contact)\"\n                        >\n                            <i class=\"fas fa-plus\"></i>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div\n        class=\"bg-white p-2 w-full relative rounded-lg mb-4 mt-0 md:grid place-items-center grid-cols-1\"\n    >\n        <h2>Actions</h2>\n\n        <div class=\"flex items-center flex-col w-full\">\n            <div\n                class=\"call bg-gray-100 flex items-center rounded-xl w-full m-2\"\n                @click=\"$emit('app-call')\"\n            >\n                <i class=\"fas fa-video m-3\"></i>\n                <p class=\"m-3\">Join video room</p>\n            </div>\n\n            <div\n                class=\"block bg-gray-100 flex items-center rounded-xl w-full m-2\"\n                @click=\"$emit('app-block')\"\n                v-if=\"!groupChat.isGroup\"\n            >\n                <i class=\"fas fa-minus-circle m-3\"></i>\n                <p class=\"m-3\">Block user</p>\n            </div>\n\n            <div\n                class=\"delete bg-gray-100 flex items-center rounded-xl w-full m-2\"\n                @click=\"$emit('app-delete')\"\n            >\n                <i class=\"fas fa-trash m-3\"></i>\n                <p class=\"m-3\">Delete conversation</p>\n            </div>\n        </div>\n    </div>\n</template>\n<script lang=\"ts\">\n    import { computed } from 'vue';\n    import { statusList } from '@/store/statusStore';\n    import AvatarImg from '@/components/AvatarImg.vue';\n    import { usechatsActions } from '../store/chatStore';\n    import { useContactsState } from '../store/contactStore';\n    import { useAuthState } from '../store/authStore';\n    export default {\n        name: 'GroupManagementBlock',\n        props: {\n            groupChat: { required: true },\n        },\n        emits: ['app-call', 'app-block', 'app-delete'],\n        components: { AvatarImg },\n        setup(props) {\n            const { contacts } = useContactsState();\n            const removeFromGroup = contact => {\n                const { updateContactsInGroup } = usechatsActions();\n                //@ts-ignore\n                updateContactsInGroup(props.groupChat.chatId, contact, true);\n            };\n            const addToGroup = contact => {\n                const { updateContactsInGroup } = usechatsActions();\n                //@ts-ignore\n                updateContactsInGroup(props.groupChat.chatId, contact, false);\n            };\n            const filteredContacts = computed(() => {\n                return contacts.filter(\n                    //@ts-ignore\n                    c => !props.groupChat.contacts.map(x => x.id).includes(c.id)\n                );\n            });\n\n            const iAmAdmin = computed(() => {\n                const { user } = useAuthState();\n                //@ts-ignore\n                return props.groupChat.adminId == user.id;\n            });\n\n            return {\n                status: statusList,\n                removeFromGroup,\n                contacts: filteredContacts,\n                addToGroup,\n                iAmAdmin,\n            };\n        },\n    };\n</script>\n\n<style scoped>\n    .call,\n    .block,\n    .delete {\n        border: 2px solid transparent;\n    }\n\n    .call:hover,\n    .block:hover,\n    .delete:hover {\n        border: 2px solid black;\n        cursor: pointer;\n    }\n</style>\n","\n    import { computed } from 'vue';\n    import { statusList } from '@/store/statusStore';\n    import AvatarImg from '@/components/AvatarImg.vue';\n    import { usechatsActions } from '../store/chatStore';\n    import { useContactsState } from '../store/contactStore';\n    import { useAuthState } from '../store/authStore';\n    export default {\n        name: 'GroupManagementBlock',\n        props: {\n            groupChat: { required: true },\n        },\n        emits: ['app-call', 'app-block', 'app-delete'],\n        components: { AvatarImg },\n        setup(props) {\n            const { contacts } = useContactsState();\n            const removeFromGroup = contact => {\n                const { updateContactsInGroup } = usechatsActions();\n                //@ts-ignore\n                updateContactsInGroup(props.groupChat.chatId, contact, true);\n            };\n            const addToGroup = contact => {\n                const { updateContactsInGroup } = usechatsActions();\n                //@ts-ignore\n                updateContactsInGroup(props.groupChat.chatId, contact, false);\n            };\n            const filteredContacts = computed(() => {\n                return contacts.filter(\n                    //@ts-ignore\n                    c => !props.groupChat.contacts.map(x => x.id).includes(c.id)\n                );\n            });\n\n            const iAmAdmin = computed(() => {\n                const { user } = useAuthState();\n                //@ts-ignore\n                return props.groupChat.adminId == user.id;\n            });\n\n            return {\n                status: statusList,\n                removeFromGroup,\n                contacts: filteredContacts,\n                addToGroup,\n                iAmAdmin,\n            };\n        },\n    };\n","import { render } from \"./GroupManagement.vue?vue&type=template&id=46c6b3a9&scoped=true\"\nimport script from \"./GroupManagement.vue?vue&type=script&lang=ts\"\nexport * from \"./GroupManagement.vue?vue&type=script&lang=ts\"\n\nimport \"./GroupManagement.vue?vue&type=style&index=0&id=46c6b3a9&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-46c6b3a9\"\n\nexport default script","import { onMounted, Ref, ref, onUnmounted } from 'vue';\n\nexport const useIntersectionObserver = (\n    target: Ref<HTMLElement>,\n    options: IntersectionObserverInit = { root: null, rootMargin: '0px' }\n) => {\n    const intersectionRatio = ref(0);\n    const isIntersecting = ref(false);\n    const isFullyInView = ref(false);\n\n    const observe = () => {\n        if (target.value) {\n            observer.observe(target.value);\n        }\n    };\n\n    let observer: IntersectionObserver;\n    onMounted(() => {\n        observer = new IntersectionObserver(([entry]) => {\n            intersectionRatio.value = entry.intersectionRatio;\n            if (entry.intersectionRatio > 0) {\n                isIntersecting.value = true;\n                isFullyInView.value = entry.intersectionRatio >= 1;\n                return;\n            }\n\n            isIntersecting.value = false;\n        }, options);\n\n        observe();\n    });\n\n    const unobserve = () => {\n        if (!observer) return;\n\n        if (target.value) {\n            observer.unobserve(target.value);\n        }\n    };\n\n    onUnmounted(unobserve);\n\n    return {\n        intersectionRatio,\n        isIntersecting,\n        isFullyInView,\n        observe,\n        unobserve,\n    };\n};\n","import { readonly, ref } from 'vue';\nconst showSideBar = ref(false);\n\nexport const getShowSideBar = () => readonly(showSideBar);\nexport const toggleSideBar = () => {\n    showSideBar.value = !showSideBar.value;\n};\n","<template>\n    <div class=\"flex-grow relative overflow-y-auto\" ref=\"messageBox\" @scroll=\"handleScroll\">\n        <div class=\"absolute w-full mt-8 px-4\">\n            <div v-if=\"chatInfo.isLoading\" class=\"flex flex-col justify-center items-center w-full\">\n                <Spinner />\n                <span>Loading more messages</span>\n            </div>\n            <div v-for=\"(message, i) in chat.messages\">\n                <div v-if=\"showDivider(chat, i)\" class=\"grey--text text-sm text-center p-4\">\n                    {{ moment(message.timeStamp).calendar() }}\n                </div>\n\n                <MessageCard\n                    :isread=\"i <= lastRead\"\n                    :isreadbyme=\"i <= lastReadByMe\"\n                    :message=\"message\"\n                    :chatId=\"chat.chatId\"\n                    :isGroup=\"chat.isGroup\"\n                    :isMine=\"message.from === user.id\"\n                    :isLastMessage=\"isLastMessage(chat, i)\"\n                    :isFirstMessage=\"isFirstMessage(chat, i)\"\n                    :key=\"`${message.id}-${i <= lastRead}`\"\n                />\n            </div>\n\n            <slot name=\"viewAnchor\" />\n        </div>\n    </div>\n</template>\n<script lang=\"ts\">\n    import MessageCard from '@/components/MessageCard.vue';\n    import { useAuthState } from '@/store/authStore';\n    import moment from 'moment';\n    import { computed, onMounted, onUnmounted, ref } from 'vue';\n    import { findLastIndex } from 'lodash';\n    import { isFirstMessage, isLastMessage, messageBox, showDivider } from '@/services/messageHelperService';\n    import { Chat } from '@/types';\n    import { usechatsActions } from '@/store/chatStore';\n    import { useScrollActions } from '@/store/scrollStore';\n    import Spinner from '@/components/Spinner.vue';\n\n    export default {\n        name: 'MessageBox',\n        components: { MessageCard, Spinner },\n        props: {\n            chat: {},\n        },\n        setup(props: { chat: Chat }) {\n            const { getChatInfo, getNewMessages } = usechatsActions();\n            const lastRead = computed(() => {\n                let id = <string>user.id;\n                //@ts-ignore\n                const { [id]: _, ...read } = props.chat.read;\n\n                const reads = Object.values(read);\n\n                return findLastIndex(props.chat.messages, message => reads.includes(<string>message.id));\n            });\n\n            const lastReadByMe = computed(() => {\n                return findLastIndex(props.chat.messages, message => props.chat.read[<string>user.id] === message.id);\n            });\n\n            const handleScroll = async e => {\n                let element = messageBox.value;\n                const oldScrollHeight = element.scrollHeight;\n                if (element.scrollTop < 100) {\n                    getNewMessages(<string>props.chat.chatId).then(newMessagesLoaded => {\n                        if (!newMessagesLoaded) return;\n\n                        element.scrollTo({\n                            top: element.scrollHeight - oldScrollHeight + element.scrollTop,\n                            behavior: 'auto',\n                        });\n                    });\n                }\n            };\n            const { addScrollEvent } = useScrollActions();\n            onMounted(() => {\n                addScrollEvent(true);\n            });\n\n            const { user } = useAuthState();\n            return {\n                isLastMessage,\n                isFirstMessage,\n                user,\n                moment,\n                lastRead,\n                lastReadByMe,\n                showDivider,\n                messageBox,\n                handleScroll,\n                chatInfo: computed(() => getChatInfo(<string>props.chat.chatId)),\n            };\n        },\n    };\n</script>\n<style scoped type=\"text/css\">\n    @tailwind base;\n    @tailwind components;\n    @tailwind utilities;\n\n    @layer utilities {\n        @variants responsive {\n        }\n    }\n</style>\n","import { Chat, MessageTypes } from '@/types';\nimport moment from 'moment';\nimport { ref } from 'vue';\n\nexport const messageBox = ref(null);\nexport const scrollMessageBoxToBottom = () => {\n    messageBox?.value?.scrollTo(0, messageBox.value.scrollHeight);\n}\n\nexport const isLastMessage = (chat: Chat, index: number) => {\n    if (index + 1 === chat.messages.length) {\n        return true;\n    }\n    const currentMessage = chat.messages[index];\n    const nextMessage = chat.messages[index + 1];\n\n    if (nextMessage.type === MessageTypes.SYSTEM) return true;\n    if (showDivider(chat, index + 1)) return true;\n\n    return currentMessage.from !== nextMessage.from;\n};\nexport const isFirstMessage = (chat: Chat, index: number) => {\n    if (index === 0) {\n        return true;\n    }\n    const currentMessage = chat.messages[index];\n    const prevMessage = chat.messages[index - 1];\n\n    if (prevMessage.type === MessageTypes.SYSTEM) return true;\n    if (showDivider(chat, index)) return true;\n\n    return currentMessage.from !== prevMessage.from;\n};\nexport const showDivider = (chat: Chat, index) => {\n    const currentMessage = chat.messages[index];\n    const previousMessage = chat.messages[index - 1];\n    if (!previousMessage) {\n        return true;\n    }\n    const time = moment(currentMessage.timeStamp);\n\n    return time.diff(previousMessage.timeStamp, 'm') > 5;\n};\n","<template>\n    <div\n        class=\"loader ease-linear rounded-full border-4 border-gray-200 h-8 w-8 inline-block\"\n        :class='{\n            \"h-12 w-12 border-4\": xlarge,\n            \"h-10 w-10\": large,\n            \"h-6 w-6\": small,\n            \"h-4 w-4 border-2\":xsmall\n        }'\n    >\n\n    </div>\n</template>\n\n<script>\n    export default {\n        name: 'Spinner',\n        props: {\n            xlarge: { required: false, default: false, type: Boolean },\n            large: { required: false, default: false, type: Boolean },\n            small: { required: false, default: false, type: Boolean },\n            xsmall: { required: false, default: false, type: Boolean },\n        }\n    };\n</script>\n\n<style scoped>\n    .loader {\n        border-top-color: rgb(78, 196, 143) !important;\n        -webkit-animation: 1.5s spinner linear infinite;\n        animation: 1.5s spinner linear infinite;\n    }\n</style>\n","import { render } from \"./Spinner.vue?vue&type=template&id=bb2f2f22&scoped=true\"\nimport script from \"./Spinner.vue?vue&type=script&lang=js\"\nexport * from \"./Spinner.vue?vue&type=script&lang=js\"\n\nimport \"./Spinner.vue?vue&type=style&index=0&id=bb2f2f22&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-bb2f2f22\"\n\nexport default script","\n    import MessageCard from '@/components/MessageCard.vue';\n    import { useAuthState } from '@/store/authStore';\n    import moment from 'moment';\n    import { computed, onMounted, onUnmounted, ref } from 'vue';\n    import { findLastIndex } from 'lodash';\n    import { isFirstMessage, isLastMessage, messageBox, showDivider } from '@/services/messageHelperService';\n    import { Chat } from '@/types';\n    import { usechatsActions } from '@/store/chatStore';\n    import { useScrollActions } from '@/store/scrollStore';\n    import Spinner from '@/components/Spinner.vue';\n\n    export default {\n        name: 'MessageBox',\n        components: { MessageCard, Spinner },\n        props: {\n            chat: {},\n        },\n        setup(props: { chat: Chat }) {\n            const { getChatInfo, getNewMessages } = usechatsActions();\n            const lastRead = computed(() => {\n                let id = <string>user.id;\n                //@ts-ignore\n                const { [id]: _, ...read } = props.chat.read;\n\n                const reads = Object.values(read);\n\n                return findLastIndex(props.chat.messages, message => reads.includes(<string>message.id));\n            });\n\n            const lastReadByMe = computed(() => {\n                return findLastIndex(props.chat.messages, message => props.chat.read[<string>user.id] === message.id);\n            });\n\n            const handleScroll = async e => {\n                let element = messageBox.value;\n                const oldScrollHeight = element.scrollHeight;\n                if (element.scrollTop < 100) {\n                    getNewMessages(<string>props.chat.chatId).then(newMessagesLoaded => {\n                        if (!newMessagesLoaded) return;\n\n                        element.scrollTo({\n                            top: element.scrollHeight - oldScrollHeight + element.scrollTop,\n                            behavior: 'auto',\n                        });\n                    });\n                }\n            };\n            const { addScrollEvent } = useScrollActions();\n            onMounted(() => {\n                addScrollEvent(true);\n            });\n\n            const { user } = useAuthState();\n            return {\n                isLastMessage,\n                isFirstMessage,\n                user,\n                moment,\n                lastRead,\n                lastReadByMe,\n                showDivider,\n                messageBox,\n                handleScroll,\n                chatInfo: computed(() => getChatInfo(<string>props.chat.chatId)),\n            };\n        },\n    };\n","import { render } from \"./MessageBox.vue?vue&type=template&id=44436712&scoped=true\"\nimport script from \"./MessageBox.vue?vue&type=script&lang=ts\"\nexport * from \"./MessageBox.vue?vue&type=script&lang=ts\"\n\nimport \"./MessageBox.vue?vue&type=style&index=0&id=44436712&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-44436712\"\n\nexport default script","<template>\n    <div\n        id=\"image-viewer\"\n        class=\"fixed z-10 left-0 top-0 w-full h-full overflow-auto bg-black bg-opacity-90 flex\"\n        v-if='src'\n        @click=\"close\"\n    >\n        <div class=\"absolute w-full top-4 left-0 flex justify-end md:pr-8\">\n            <a class=\"cursor-pointer text-gray-100 size hover:text-accent mr-4\" :href='src' :download='src.split(\"/\").reverse()[0]'>\n                <i class=\"fas fa-download fa-2x\"></i>\n            </a>\n            <button class=\"cursor-pointer text-gray-100 size hover:text-gray-500\" @click=\"close\">\n                <i class=\"fas fa-times fa-2x\"></i>\n            </button>\n        </div>\n\n        <img class=\"modal-content m-auto block md:max-w-80p md:max-h-80p max-w-full max-w-full self-center\" id=\"full-image\" :src=\"src\" />\n    </div>\n</template>\n\n<script lang=\"ts\">\n    import { defineComponent } from 'vue';\n    import { clearImageSrc, getImageSrc } from '@/store/imageStore';\n\n    export default defineComponent({\n        name: 'ImagePreview',\n        setup() {\n            const close = () => {\n                clearImageSrc();\n            };\n\n            return {\n                close,\n                src: getImageSrc(),\n            };\n        },\n    });\n</script>\n\n<style scoped>\n    @media (min-width: 768px) {\n        .md\\:max-w-80p {     max-width: 80%;   }\n        .md\\:max-h-80p {     max-height: 80%;   }\n    }\n</style>\n","\n    import { defineComponent } from 'vue';\n    import { clearImageSrc, getImageSrc } from '@/store/imageStore';\n\n    export default defineComponent({\n        name: 'ImagePreview',\n        setup() {\n            const close = () => {\n                clearImageSrc();\n            };\n\n            return {\n                close,\n                src: getImageSrc(),\n            };\n        },\n    });\n","import { render } from \"./ImagePreview.vue?vue&type=template&id=519d4542&scoped=true\"\nimport script from \"./ImagePreview.vue?vue&type=script&lang=ts\"\nexport * from \"./ImagePreview.vue?vue&type=script&lang=ts\"\n\nimport \"./ImagePreview.vue?vue&type=style&index=0&id=519d4542&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-519d4542\"\n\nexport default script","\n    import { useScrollActions, useScrollState } from '@/store/scrollStore';\n\n    import appLayout from '../../layout/AppLayout.vue';\n    import moment from 'moment';\n    import { defineComponent, onMounted, watch, ref, toRefs, nextTick, computed, onBeforeMount, onUpdated } from 'vue';\n\n    import { each } from 'lodash';\n    import { statusList } from '@/store/statusStore';\n    import { usechatsState, usechatsActions } from '@/store/chatStore';\n    import { sendBlockChat, sendRemoveChat } from '@/store/socketStore';\n    import { useAuthState } from '@/store/authStore';\n    import { popupCenter } from '@/services/popupService';\n    import MessageCard from '@/components/MessageCard.vue';\n    import ChatList from '@/components/ChatList.vue';\n    import ChatInput from '@/components/ChatInput.vue';\n    import AvatarImg from '@/components/AvatarImg.vue';\n    import GroupManagement from '@/components/GroupManagement.vue';\n    import Dialog from '@/components/Dialog.vue';\n    import * as crypto from 'crypto-js';\n    import { useIntersectionObserver } from '@/lib/intersectionObserver';\n    import { useRoute, useRouter } from 'vue-router';\n    import { getShowSideBar, toggleSideBar } from '@/services/sidebarService';\n    import { JoinedVideoRoomBody, MessageTypes, SystemMessageTypes } from '@/types';\n    import MessageBox from '@/components/MessageBox.vue';\n    import { scrollMessageBoxToBottom } from '@/services/messageHelperService';\n    import Button from '@/components/Button.vue';\n    import ImagePreview from '@/components/ImagePreview.vue';\n\n    export default defineComponent({\n        name: 'ChatView',\n        components: {\n            Button,\n            MessageBox,\n            AvatarImg,\n            ChatInput,\n            MessageCard,\n            jdialog: Dialog,\n            appLayout,\n            GroupManagement,\n            ChatList,\n            ImagePreview,\n        },\n        setup(props) {\n            const route = useRoute();\n            let selectedId = ref(<string>route.params.id);\n            watch(\n                () => route.params.id,\n                id => {\n                    selectedId.value = <string>id;\n                },\n            );\n\n            const { retrievechats } = usechatsActions();\n            onBeforeMount(retrievechats);\n\n            const { chats } = usechatsState();\n            const { sendMessage } = usechatsActions();\n            const { user } = useAuthState();\n            const m = val => moment(val);\n            const showMenu = ref(false);\n            const file = ref();\n            const router = useRouter();\n            let showDialog = ref(false);\n            let showDeleteDialog = ref(false);\n            const propRefs = toRefs(props);\n            const truncate = (value, limit = 20) => {\n                if (value.length > limit) {\n                    value = value.substring(0, limit - 3) + '...';\n                }\n                return value;\n            };\n\n            const getMessagesSortedByUser = computed(() => {\n                let chatBlockIndex = 0;\n\n                return chat.value.messages.reduce((acc: any, message) => {\n                    if (acc[chatBlockIndex] && acc[chatBlockIndex].user === <string>message.from) {\n                        acc[chatBlockIndex].messages.push(message);\n                        return acc;\n                    } else {\n                        chatBlockIndex++;\n                    }\n\n                    acc[chatBlockIndex] = {\n                        user: <string>message.from,\n                        messages: [],\n                    };\n                    acc[chatBlockIndex].messages.push(message);\n\n                    return acc;\n                }, {});\n            });\n\n            const message = ref('');\n\n            const chat = computed(() => {\n                return chats.value.find(c => c.chatId == selectedId.value);\n            });\n\n            const getChatStatus = computed(() => {\n                if (!chat.value) {\n                    return;\n                }\n\n                if (chat.value.isGroup) {\n                    let message = `${chat.value.contacts.length} members`;\n                    const onlineMembers = chat.value.contacts\n                        .filter(c => c.id != user.id)\n                        .map(c => ({\n                            ...c,\n                            isOnline: statusList[<string>c.id]?.isOnline ?? false,\n                        })).length;\n\n                    if (onlineMembers > 0) {\n                        message += `, ${onlineMembers} online`;\n                    }\n\n                    return message;\n                }\n\n                const status = statusList[<string>chat.value.chatId];\n                return status?.isOnline ? 'Online' : 'Offline';\n            });\n\n            const popupMeeting = () => {\n                // @ts-ignore\n                // const str = chat?.contacts ? chat.id : [user.id, chat.id].sort().join();\n                const str: string = chat.value.isGroup\n                    ? chat.value.chatId\n                    : chat.value.contacts\n                        .map(c => c.id)\n                        .sort()\n                        .join();\n\n                const id = crypto.SHA1(str);\n                sendMessage(\n                    chat.value.chatId,\n                    {\n                        type: SystemMessageTypes.JOINED_VIDEOROOM,\n                        message: `${user.id} joined the video chat`,\n                        id: id.toString(),\n                    } as JoinedVideoRoomBody,\n                    MessageTypes.SYSTEM,\n                );\n\n                popupCenter(`/videoroom/${id}`, 'video room', 800, 550);\n            };\n\n            const deleteChat = () => {\n                showDeleteDialog.value = true\n            };\n            const doDeleteChat = () => {\n                sendRemoveChat(chat.value.chatId);\n                router.push({ name: 'chat' });\n            };\n\n            const blockChat = () => {\n                showDialog.value = true;\n            };\n            const doBlockChat = () => {\n                showDialog.value = false;\n                sendBlockChat(chat.value.chatId);\n                router.push({ name: 'chat' });\n            };\n\n            const reads = computed(() => {\n                const preReads = {};\n                each(chat.value.read, (val: string, key: string) => {\n                    if (key === user.id) {\n                        return;\n                    }\n                    preReads[val] = preReads[val] ? [key, ...preReads[val]] : [key];\n                });\n                return preReads;\n            });\n\n            const viewAnchor = ref(null);\n\n            const { isIntersecting } = useIntersectionObserver(viewAnchor);\n\n            const scrollToBottom = (force = false) => {\n                if (!force && !isIntersecting.value) {\n                    return;\n                }\n\n                nextTick(() => {\n                    scrollMessageBoxToBottom();\n                });\n            };\n\n            onMounted(() => {\n                nextTick(() => {\n                    scrollToBottom(true);\n                });\n            });\n\n            const status = computed(() => {\n                return statusList[selectedId.value];\n            });\n\n            const { scrollEvents } = useScrollState();\n            const { clearScrollEvents } = useScrollActions();\n\n            watch(scrollEvents, () => {\n                const forced = scrollEvents.find(x => x);\n                nextTick(() => {\n                    scrollToBottom(forced);\n                    clearScrollEvents();\n                });\n            });\n\n            return {\n                chats,\n                selectedId,\n                chat,\n                getMessagesSortedByUser,\n                truncate,\n                message,\n                file,\n                m,\n                scrollToBottom,\n                status,\n                statusList,\n                popupMeeting,\n                deleteChat,\n                doDeleteChat,\n                blockChat,\n                doBlockChat,\n                viewAnchor,\n                reads,\n                showDialog,\n                showDeleteDialog,\n                showMenu,\n                showSideBar: getShowSideBar(),\n                toggleSideBar,\n                getChatStatus,\n                moment,\n                ...propRefs,\n            };\n        },\n    });\n","import { render } from \"./Single.vue?vue&type=template&id=0ee35422&scoped=true\"\nimport script from \"./Single.vue?vue&type=script&lang=ts\"\nexport * from \"./Single.vue?vue&type=script&lang=ts\"\n\nimport \"./Single.vue?vue&type=style&index=0&id=0ee35422&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-0ee35422\"\n\nexport default script","<template>\n    <div>\n        <h2>Redirecting you to your digitaltwin.</h2>\n    </div>\n</template>\n\n<script lang=\"ts\">\n    import { defineComponent } from 'vue';\n    import { useRouter } from 'vue-router';\n\n    export default defineComponent({\n        name: 'Home',\n        mounted() {\n            let name = window.location.host.split('.')[0];\n\n            const user = {\n                name,\n                image: `${window.location.origin}/api/user/avatar`,\n                email: `${name.replace(/ /g, '')}@domain.com`,\n            };\n\n            localStorage.setItem('user', JSON.stringify(user));\n\n            const router = useRouter();\n            router.push('/chat');\n        },\n        setup() {\n\n        },\n    });\n</script>\n","\n    import { defineComponent } from 'vue';\n    import { useRouter } from 'vue-router';\n\n    export default defineComponent({\n        name: 'Home',\n        mounted() {\n            let name = window.location.host.split('.')[0];\n\n            const user = {\n                name,\n                image: `${window.location.origin}/api/user/avatar`,\n                email: `${name.replace(/ /g, '')}@domain.com`,\n            };\n\n            localStorage.setItem('user', JSON.stringify(user));\n\n            const router = useRouter();\n            router.push('/chat');\n        },\n        setup() {\n\n        },\n    });\n","import { render } from \"./Callback.vue?vue&type=template&id=3fe40db4\"\nimport script from \"./Callback.vue?vue&type=script&lang=ts\"\nexport * from \"./Callback.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\n    <div>\n        <h2>Unauthorised</h2>\n        <p>\n            this is not your digital twin, please go to our\n            <a href=\"https://digitaltwin.jimbertesting.be\">homepage</a>\n        </p>\n    </div>\n</template>\n<script lang=\"ts\">\n    import { defineComponent } from 'vue';\n\n    export default defineComponent({\n        name: 'Unauthorised',\n    });\n</script>\n","\n    import { defineComponent } from 'vue';\n\n    export default defineComponent({\n        name: 'Unauthorised',\n    });\n","import { render } from \"./Unauthorised.vue?vue&type=template&id=de32cf8a\"\nimport script from \"./Unauthorised.vue?vue&type=script&lang=ts\"\nexport * from \"./Unauthorised.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","import { createRouter, createWebHistory, RouteRecordRaw } from 'vue-router';\nimport Home from '@/views/Home.vue';\nimport FileBrowser from '@/views/app/FileBrowser.vue';\nimport VideoRoom from '@/views/app/VideoRoom.vue';\nimport Basic from '@/layout/Basic.vue';\nimport Chat from '@/views/app/Chat.vue';\nimport Single from '@/views/app/Single.vue';\nimport Callback from '@/views/Callback.vue';\nimport Unauthorised from '@/views/Unauthorised.vue';\nimport { isUserAuthenticated } from '@/store/userStore';\n\nconst routes: Array<RouteRecordRaw> = [\n    {\n        path: '/',\n        name: 'Home',\n        component: Home,\n    },\n    {\n        path: '/callback',\n        name: 'Callback/:signedAttempt',\n        component: Callback,\n        meta: { requiresAuth: true },\n    },\n    {\n        path: '/unauthorized',\n        name: 'Unauthorized',\n        component: Unauthorised,\n    },\n    {\n        path: '/chat',\n        component: Basic,\n        children: [\n            {\n                path: '',\n                name: 'chat',\n                component: Chat,\n                meta: { requiresAuth: true },\n            },\n            {\n                path: ':id',\n                name: 'single',\n                component: Single,\n                meta: {\n                    back: 'chat',\n                    requiresAuth: true,\n                },\n            },\n        ],\n    },\n    {\n        // fake security since the actual filebrowser has no security yet?\n        name: 'filebrowser',\n        path: '/filebrowser',\n        component: FileBrowser,\n        meta: { requiresAuth: true },\n    },\n    {\n        name: 'videoroom',\n        path: '/videoroom/:id',\n        component: VideoRoom,\n    },\n];\n\nconst router = createRouter({\n    history: createWebHistory(process.env.BASE_URL),\n    routes,\n});\n\nrouter.beforeEach(async (to, from, next) => {\n    if (\n        to.matched.some(record => record.meta.requiresAuth) &&\n        !(await isUserAuthenticated())\n    ) {\n        next({ name: 'Home' });\n    }\n    next();\n});\n\nexport default router;\n","import { io } from 'socket.io-client';\n\nexport default {\n    install: (app: any, { connection, options }) => {\n        const socket = io(connection, options);\n        app.config.globalProperties.$socket = socket;\n\n        app.provide('socket', socket);\n    },\n};\n","export const clickOutside = {\n    beforeMount: (el, binding) => {\n        el.clickOutsideEvent = event => {\n            // here I check that click was outside the el and his children\n            if (!(el == event.target || el.contains(event.target))) {\n                // and if it did, call method provided in attribute value\n                binding.value();\n            }\n        };\n        document.addEventListener('click', el.clickOutsideEvent);\n    },\n    unmounted: el => {\n        document.removeEventListener('click', el.clickOutsideEvent);\n    },\n};\n","import { createApp } from 'vue';\nimport App from './App.vue';\nimport './assets/index.css';\nimport router from '@/plugins/Router';\nimport '@fortawesome/fontawesome-free/js/all';\nimport socketIo from '@/plugins/SocketIo';\nimport config from '../public/config/config';\nimport MessageContent from '@/components/MessageContent.vue';\nimport { clickOutside } from '@/plugins/ClickOutside';\n\n// console.log(Socketio)\n// const a = Socketio.install\n\nconst app = createApp(App)\n    .directive('click-outside', clickOutside)\n    .use(router)\n    .use(socketIo, {\n        connection: config.baseUrl,\n        options: {\n            debug: true,\n        },\n        transports: ['websocket'],\n    });\n\n// this fixes some issues with rendering inside of QouteContent n\napp.component('MessageContent', MessageContent);\n\napp.directive('focus', {\n    // When the bound element is mounted into the DOM...\n    mounted(el) {\n        // Focus the element\n        el.focus();\n    },\n});\n\napp.mount('#app');\n\nexport default app;\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Single.vue?vue&type=style&index=0&id=0ee35422&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Chat.vue?vue&type=style&index=0&id=127bea5a&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./AppLayout.vue?vue&type=style&index=0&id=25b66247&scoped=true&lang=css\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=598bb154&lang=css\""],"sourceRoot":""}